{"version":3,"sources":["webpack:///webpack/bootstrap 931a7d84603c9695b521","webpack:///external \"babel-runtime/helpers/classCallCheck\"","webpack:///external \"babel-runtime/core-js/object/get-prototype-of\"","webpack:///external \"babel-runtime/helpers/inherits\"","webpack:///external \"babel-runtime/helpers/possibleConstructorReturn\"","webpack:///external \"babel-runtime/helpers/createClass\"","webpack:///external \"picolog\"","webpack:///external \"babel-runtime/helpers/extends\"","webpack:///external \"react\"","webpack:///./src/components/Entity/Entity.jsx","webpack:///external \"ws.suid\"","webpack:///external \"babel-runtime/helpers/objectWithoutProperties\"","webpack:///external \"redux-apis\"","webpack:///external \"babel-runtime/helpers/typeof\"","webpack:///external \"redux-fetch-api\"","webpack:///external \"classnames\"","webpack:///external \"react-mdl\"","webpack:///./src/components/Auth/Role.jsx","webpack:///./src/components/Mdl/mdl-extras.jsx","webpack:///./src/store.jsx","webpack:///external \"babel-runtime/core-js/promise\"","webpack:///external \"react-redux\"","webpack:///external \"redux-load-api\"","webpack:///external \"babel-runtime/core-js/object/define-properties\"","webpack:///external \"react-router\"","webpack:///./src/components/Auth/PasswordCredential.jsx","webpack:///./src/components/Auth/api.jsx","webpack:///./src/components/Publication/Publication.jsx","webpack:///./src/components/Publication/api.jsx","webpack:///./src/components/Scroller/Scroller.jsx","webpack:///external \"babel-runtime/core-js/object/keys\"","webpack:///./src/components/Auth/Account.jsx","webpack:///./src/components/Auth/AuthDialog.jsx","webpack:///./src/components/Auth/Credential.jsx","webpack:///./src/components/Auth/Group.jsx","webpack:///./src/components/Brands/Brand.jsx","webpack:///./src/components/Mdl/api.jsx","webpack:///./src/components/Products/Product.jsx","webpack:///./src/components/Stores/Store.jsx","webpack:///external \"babel-runtime/helpers/defineProperty\"","webpack:///external \"babel-runtime/helpers/toConsumableArray\"","webpack:///external \"react-dom\"","webpack:///external \"react-dom/server\"","webpack:///external \"redux-async-api\"","webpack:///./config.js","webpack:///./src/components/App/App.jsx","webpack:///./src/components/App/api.jsx","webpack:///./src/components/Auth/index.jsx","webpack:///./src/components/Brands/BrandBrowser.jsx","webpack:///./src/components/Brands/BrandCard.jsx","webpack:///./src/components/Brands/Brands.jsx","webpack:///./src/components/Brands/api.jsx","webpack:///./src/components/Card/Card.jsx","webpack:///./src/components/Entity/api.jsx","webpack:///./src/components/Home/Home.jsx","webpack:///./src/components/Html/Html.jsx","webpack:///./src/components/Products/ProductBrowser.jsx","webpack:///./src/components/Products/ProductCard.jsx","webpack:///./src/components/Products/ProductDetails.jsx","webpack:///./src/components/Products/ProductEdit.jsx","webpack:///./src/components/Products/Products.jsx","webpack:///./src/components/Products/Rating.jsx","webpack:///./src/components/Products/api.jsx","webpack:///./src/components/Stores/StoreBrowser.jsx","webpack:///./src/components/Stores/StoreCard.jsx","webpack:///./src/components/Stores/Stores.jsx","webpack:///./src/components/Stores/api.jsx","webpack:///./src/routes.jsx","webpack:///./src/server.jsx","webpack:///./package.json","webpack:///external \"babel-polyfill\"","webpack:///external \"babel-runtime/core-js/json/stringify\"","webpack:///external \"babel-runtime/core-js/object/create\"","webpack:///external \"babel-runtime/helpers/get\"","webpack:///external \"chalk\"","webpack:///external \"compression\"","webpack:///external \"cookie-parser\"","webpack:///external \"express\"","webpack:///external \"http\"","webpack:///external \"http-proxy\"","webpack:///external \"node-fetch\"","webpack:///external \"path\"","webpack:///external \"redux\"","webpack:///external \"redux-logger\"","webpack:///external \"redux-thunk\"","webpack:///external \"serialize-javascript\""],"names":[],"mappings":"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","file":"server.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 931a7d84603c9695b521\n **/","module.exports = require(\"babel-runtime/helpers/classCallCheck\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"babel-runtime/helpers/classCallCheck\"\n ** module id = 1\n ** module chunks = 0\n **/","module.exports = require(\"babel-runtime/core-js/object/get-prototype-of\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"babel-runtime/core-js/object/get-prototype-of\"\n ** module id = 2\n ** module chunks = 0\n **/","module.exports = require(\"babel-runtime/helpers/inherits\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"babel-runtime/helpers/inherits\"\n ** module id = 3\n ** module chunks = 0\n **/","module.exports = require(\"babel-runtime/helpers/possibleConstructorReturn\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"babel-runtime/helpers/possibleConstructorReturn\"\n ** module id = 4\n ** module chunks = 0\n **/","module.exports = require(\"babel-runtime/helpers/createClass\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"babel-runtime/helpers/createClass\"\n ** module id = 5\n ** module chunks = 0\n **/","module.exports = require(\"picolog\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"picolog\"\n ** module id = 6\n ** module chunks = 0\n **/","module.exports = require(\"babel-runtime/helpers/extends\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"babel-runtime/helpers/extends\"\n ** module id = 7\n ** module chunks = 0\n **/","module.exports = require(\"react\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"react\"\n ** module id = 8\n ** module chunks = 0\n **/","import log from 'picolog';\r\nimport Suid from 'ws.suid';\r\n\r\nexport function Entity(target) {\r\n\treturn register(target.name, target);\r\n}\r\nexport default Entity;\r\n\r\nexport function\tfromJSON(json) {\r\n\tif (typeof json == 'string') {\r\n\t\tconst result = JSON.parse(json, revive);\r\n\t\tlog.trace('fromJSON => ', result);\r\n\t\treturn result;\r\n\t}\r\n\tlog.debug('fromJSON', json, this);\r\n\tif (this) {\r\n\t\tconst result = Object.create(this.prototype);\r\n\t\tconst keys = Object.keys(json);\r\n\t\tlog.trace('fromJSON: keys=', keys);\r\n\t\tfor (let i=0,key; key=keys[i]; i++) {\r\n\t\t\tresult[key] = json[key];\r\n\t\t}\r\n\t\tlog.trace('fromJSON => ', result);\r\n\t\treturn result;\r\n\t}\r\n\treturn fromJSON(JSON.stringify(json));\r\n}\r\n\r\nexport function toJSON(entity) {\r\n\t// if toJSON is called with an entity object as argument, it returns the JSON for that entity\r\n\tif (typeof entity == 'object') return JSON.stringify(entity);\r\n\t// otherwise, it creates a result object with an extra `type` field and `toJSON` method\r\n\tconst result = { ...this, type:this.constructor.name };\r\n\tObject.defineProperty(result, 'toJSON', {value:toJSON});\r\n\treturn result;\r\n}\r\n\r\nexport function equals(one, other) {\r\n\tif (arguments.length === 1) {return equals(this, one);}\r\n\treturn (\r\n\t\t// comparison of entity with itself\r\n\t\t(one === other) ||\r\n\t\t// comparison of entity with some id\r\n\t\t(one && one.id === other) ||\r\n\t\t(one && hasEquals(one.id) && one.id.equals(other)) ||\r\n\t\t(other && other.id === one) ||\r\n\t\t(other && hasEquals(other.id) && other.id.equals(one)) ||\r\n\t\t// comparison of two entities of same type\r\n\t\t(one && other && one.constructor === other.constructor &&\r\n\t\t\t(\r\n\t\t\t\t(one.id === other.id) ||\r\n\t\t\t\t(hasEquals(one.id) && one.id.equals(other.id)) ||\r\n\t\t\t\t(hasEquals(other.id) && other.id.equals(one.id))\r\n\t\t\t)\r\n\t\t)\r\n\t)\r\n}\r\n\r\nexport function indexOf(list, entity) {\r\n\tfor (let i=0; i<list.length; i++) {\r\n\t\tif (equals(list[i], entity)) {return i;}\r\n\t}\r\n\treturn -1;\r\n}\r\n\r\n/**\r\n * Creates a new object that has all of the properties of `entity`, including it's id.\r\n * A clone is a different instance of *the same* entity. Any sub-entities will also be\r\n * cloned, unless you set `shallow` to `true`.\r\n */\r\nexport function clone(entity, shallow=false) {\r\n\tif (! entity) {entity = this;}\r\n\tconst result = Object.create(entity.constructor.prototype);\r\n\tconst keys = Object.keys(entity);\r\n\tfor (let i=0,key; key=keys[i]; i++) {\r\n\t\tconst val = entity[key];\r\n\t\tresult[key] = val && val.clone && !shallow ? val.clone() : val;\r\n\t}\r\n\treturn result;\r\n}\r\n\r\n/**\r\n * Creates a new object that has all of the properties of `entity`, except for it's id.\r\n * A copy is a new instance of *a new* entity. The copy will not have any id set, allowing\r\n * (requiring) you to set it yourself. By default, sub-entities will not be copied, unless\r\n * you set `recurse` to `true`.\r\n */\r\nexport function copy(entity, recurse=false) {\r\n\tif (! entity) {entity = this;}\r\n\tconst result = Object.create(entity.constructor.prototype);\r\n\tconst keys = Object.keys(entity).filter(val => val !== 'id');\r\n\tfor (let i=0,key; key=keys[i]; i++) {\r\n\t\tconst val = entity[key];\r\n\t\tresult[key] = val && val.copy && recurse ? val.copy() : val;\r\n\t}\r\n\treturn result;\r\n}\r\n\r\nexport function revive(key, value) {\r\n\tlog.trace('revive', key, value);\r\n\tconst t = value && typeof value == 'object' && typeof value.type == 'string' && value.type;\r\n\tconst type = t && registry[t];\r\n\tconst result = type ? type.fromJSON(value) : Suid.revive((k) => idKey(k))(key, value);\r\n\tlog.trace('revive => ', result);\r\n\treturn result;\r\n}\r\n\r\nexport function register(name, type) {\r\n\tfunction enhance(entity, obj) {\r\n\t\tObject.defineProperty(entity, 'id', {enumerable:true,\r\n\t\t\tget:function(){return this.__id;},\r\n\t\t\tset:function(id) {Object.defineProperty(this, '__id', {value:id});},\r\n\t\t});\r\n\t\tObject.defineProperty(entity, 'version', {enumerable:true,\r\n\t\t\tget:function(){return this.__version;},\r\n\t\t\tset:function(version) {Object.defineProperty(this, '__version', {value:version});},\r\n\t\t});\r\n\t\tconst keys = obj && Object.keys(obj) || [];\r\n\t\tfor (let i=0,key; key=keys[i]; i++) {entity[key] = obj[key];}\r\n\t\tif (keys.indexOf('version') === -1) {entity.version = null;}\r\n\t}\r\n\tlet wrapped;\r\n\teval(`\r\n\t\twrapped = function ${name}(obj){\r\n\t\t\tenhance(this, obj);\r\n\t\t\ttype.apply(this, arguments);\r\n\t\t};\r\n\t`);\r\n\twrapped.prototype = Object.create(type.prototype);\r\n\twrapped.toString = type.toString.bind(wrapped);\r\n\tregistry[name] = wrapped;\r\n\tif (! wrapped.prototype.toJSON) {Object.defineProperty(wrapped.prototype, 'toJSON', {value:toJSON});}\r\n\tif (! wrapped.prototype.equals) {Object.defineProperty(wrapped.prototype, 'equals', {value:equals});}\r\n\tif (! wrapped.prototype.clone) {Object.defineProperty(wrapped.prototype, 'clone', {value:clone});}\r\n\tif (! wrapped.fromJSON) {Object.defineProperty(wrapped, 'fromJSON', {value:fromJSON});}\r\n\treturn wrapped;\r\n}\r\n\r\nconst registry = {};\r\n\r\nfunction idKey(key) {\r\n\treturn key === 'id' || key.substring && key.substring(key.length - 2) === 'Id';\r\n}\r\n\r\nfunction hasEquals(obj) {\r\n\treturn obj && typeof obj.equals == 'function';\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/components/Entity/Entity.jsx\n **/","module.exports = require(\"ws.suid\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"ws.suid\"\n ** module id = 10\n ** module chunks = 0\n **/","module.exports = require(\"babel-runtime/helpers/objectWithoutProperties\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"babel-runtime/helpers/objectWithoutProperties\"\n ** module id = 11\n ** module chunks = 0\n **/","module.exports = require(\"redux-apis\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"redux-apis\"\n ** module id = 12\n ** module chunks = 0\n **/","module.exports = require(\"babel-runtime/helpers/typeof\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"babel-runtime/helpers/typeof\"\n ** module id = 13\n ** module chunks = 0\n **/","module.exports = require(\"redux-fetch-api\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"redux-fetch-api\"\n ** module id = 14\n ** module chunks = 0\n **/","module.exports = require(\"classnames\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"classnames\"\n ** module id = 15\n ** module chunks = 0\n **/","module.exports = require(\"react-mdl\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"react-mdl\"\n ** module id = 16\n ** module chunks = 0\n **/","import Entity, { fromJSON } from '../Entity/Entity';\r\nimport Suid from 'ws.suid';\r\n\r\n@Entity\r\nexport class Role {\r\n}\r\nRole.GUEST = new Role({id:1, name:'Guest'});\r\nRole.USER = new Role({id:2, name:'User'});\r\nRole.STORE_USER = new Role({id:3, name:'Store-User'});\r\nRole.STORE_MANAGER = new Role({id:4, name:'Store-Manager'});\r\nRole.BRAND_USER = new Role({id:5, name:'Brand-User'});\r\nRole.BRAND_MANAGER = new Role({id:6, name:'Brand-Manager'});\r\nRole.BRAUTSCHLOSS_USER = new Role({id:7, name:'Brautschloss-User'});\r\nRole.BRAUTSCHLOSS_MANAGER = new Role({id:8, name:'Brautschloss-Manager'});\r\nRole.ADMINISTRATOR = new Role({id:9, name:'Administrator'});\r\nexport default Role;\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/components/Auth/Role.jsx\n **/","import log from 'picolog';\r\nimport React, { Component, PropTypes, Children } from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { Drawer as MdlDrawer, Textfield as MdlTextfield, FABButton, Icon, Card, Spinner } from 'react-mdl';\r\nlog.assert(MdlDrawer, 'MdlDrawer is not defined');\r\nlog.assert(MdlTextfield, 'MdlTextfield is not defined');\r\nconst { bool, number, string, object, func, array, node, shape, oneOfType, arrayOf } = PropTypes;\r\nimport classNames from 'classnames';\r\n\r\nexport function component(displayName, defaultClass, conditionals={}, elem='div', propTypes={}, defaultProps={}, createElement=React.createElement) {\r\n\tfunction render(props) {\r\n\t\tlog.debug('render', props);\r\n\t\tconst { className, defaultClass, children, ...others } = props;\r\n\t\tconst extraClasses = Object.keys(conditionals).map(x => ({[others[x + 'Class']]: others[x]}));\r\n\t\treturn createElement(elem, {className:classNames(className, defaultClass, extraClasses), ...others}, children);\r\n\t}\r\n\trender.displayName = displayName;\r\n\trender.propTypes = {\r\n\t\tdefaultClass: string,\r\n\t\tclassName: string,\r\n\t\tchildren: node,\r\n\t\t...propTypes\r\n\t}\r\n\trender.defaultProps = {\r\n\t\tdefaultClass,\r\n\t\t...defaultProps\r\n\t}\r\n\tfor (let key in conditionals) {\r\n\t\trender.propTypes[key + 'Class'] = string;\r\n\t\trender.propTypes[key] = oneOfType([bool, string, object, number, node]);\r\n\t\trender.defaultProps[key + 'Class'] = conditionals[key];\r\n\t}\r\n\treturn render;\r\n}\r\n\r\nexport const LayoutTitle = component('LayoutTitle', 'mdl-layout__title')\r\nexport const LayoutObfuscator = component('LayoutObfuscator', 'mdl-layout__obfuscator', {open:'is-visible'}, 'div', {onCancel: func.isRequired}, {},\r\n\t(elem, props, children) => {\r\n\t\tconst { onCancel, ...others } = props;\r\n\t\treturn (\r\n\t\t\t<div onClick={onCancel} onTouchEnd={onCancel} {...others} />\r\n\t\t)\r\n\t}\r\n)\r\n\r\nexport const Sprite = component('Sprite', 'material-icons-sprite', {}, 'i', {name: string.isRequired}, {},\r\n\t(elem, props, children) => {\r\n\t\tconst { name, className, ...others } = props;\r\n\t\tconst classes = classNames(className, name);\r\n\t\treturn (\r\n\t\t\t<i className={classes} {...others} />\r\n\t\t)\r\n\t}\r\n)\r\n\r\n/**\r\n * Controlled version of the MDL TextField component that adds a property `value`.\r\n */\r\nexport class Textfield extends Component {\r\n\tstatic propTypes = {...MdlTextfield.propTypes}\r\n\tstatic defaultProps = {...MdlTextfield.defaultProps}\r\n\r\n\tconstructor(...props) {\r\n\t\tsuper(...props);\r\n\t\tthis.onChange = this.onChange.bind(this);\r\n\t\tObject.defineProperty(this, 'value', {get:()=>this.props.value});\r\n\t}\r\n\r\n\tonChange(evt, ...params) {\r\n\t\tlog.debug('onChange', evt, evt.target.value);\r\n\t\tconst { onChange } = this.props;\r\n\t\treturn onChange && onChange(evt.target.value, evt, ...params);\r\n\t}\r\n\r\n\trender() {\r\n\t\tlog.debug('render', this.props);\r\n\t\tconst { onChange, children, ...props } = this.props;\r\n\t\treturn <MdlTextfield onChange={this.onChange} {...props} />\r\n\t}\r\n}\r\n\r\n/**\r\n * Stateful version of the MDL TextField component that adds a property `value`.\r\n *\r\n * This component is stateful; it uses `this.state` to keep track of the underlying\r\n * input's value. It basically does the work for you that is mentioned here:\r\n * https://facebook.github.io/react/docs/forms.html#controlled-components\r\n */\r\nexport class StatefulTextfield extends Component {\r\n\tstatic propTypes = {...MdlTextfield.propTypes}\r\n\tstatic defaultProps = {...MdlTextfield.defaultProps}\r\n\r\n\tconstructor(...props) {\r\n\t\tsuper(...props);\r\n\t\tthis.onChange = this.onChange.bind(this);\r\n\t\tthis.state = {value:this.props.value};\r\n\t\tObject.defineProperty(this, 'value', {get:()=>this.state.value});\r\n\t}\r\n\r\n\tonChange(evt, ...params) {\r\n\t\tlog.debug('onChange', evt, evt.target.value);\r\n\t\tthis.setState({value:evt.target.value});\r\n\t\tconst { onChange } = this.props;\r\n\t\treturn onChange && onChange(evt, ...params);\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst { value } = this.state;\r\n\t\tlog.debug('render', value);\r\n\t\tconst { children, onChange, ...props } = this.props;\r\n\t\treturn <MdlTextfield value={value} onChange={this.onChange} {...props} />\r\n\t}\r\n}\r\n\r\n/** The front face of a flippable Card */\r\nexport const FrontFace = component('FrontFace', 'mdl-card__face mdl-card__front');\r\n/** The back face of a flippable Card */\r\nexport const BackFace = component('BackFace', 'mdl-card__face mdl-card__back');\r\n\r\n\r\nexport const FlipCard = component('FlipCard', 'mdl-card is-flippable', {flipped: 'is-flipped'});\r\n\r\n/**\r\n * A base class to create a MDL Card that is flippable.\r\n *\r\n * This class is stateful; it manages the flip state in `this.state`.\r\n * If you extend from it, you need to implement `render()` and use\r\n * the methods `isFlipped()` and `flip()` to inspect/update the\r\n * flip state in response to e.g. clicks etc.\r\n */\r\nexport class StatefulFlipCard extends Component {\r\n\tstatic propTypes = {\r\n\t\tflipped: bool,\r\n\t\tclassName: string,\r\n\t\tfrontLoadDelay: number,\r\n\t\tbackLoadDelay: number,\r\n\t}\r\n\tstatic defaultProps = {\r\n\t\tflipped: false,\r\n\t\tfrontLoadDelay: 250,\r\n\t\tbackLoadDelay: 2500,\r\n\t}\r\n\tconstructor(...props) {\r\n\t\tsuper(...props);\r\n\t\tthis.state = {\r\n\t\t\tflipped: this.props.flipped,\r\n\t\t\tbackLoaded:!this.props.backLoadDelay,\r\n\t\t\tfrontLoaded:!this.props.frontLoadDelay,\r\n\t\t};\r\n\t\tthis.flip = this.flip.bind(this);\r\n\t}\r\n\r\n\tisFlipped() {\r\n\t\treturn this.state.flipped;\r\n\t}\r\n\r\n\tflip(event) {\r\n\t\tif (event && event.defaultPrevented) {return;}\r\n\t\tconst { flipped, frontLoaded, backLoaded } = this.state;\r\n\t\tthis.setState({...this.state, flipped: !flipped, backLoaded: backLoaded || !flipped, frontLoaded: frontLoaded || flipped});\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tconst { frontLoadDelay, backLoadDelay } = this.props;\r\n\t\tif (frontLoadDelay) {\r\n\t\t\tthis.frontLoad = setTimeout(() => {this.setState({...this.state, frontLoaded:true});}, frontLoadDelay);\r\n\t\t}\r\n\t\tif (backLoadDelay) {\r\n\t\t\tthis.backLoad = setTimeout(() => {this.setState({...this.state, backLoaded:true});}, backLoadDelay);\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentWillUnmount() {\r\n\t\tclearTimeout(this.frontLoad);\r\n\t\tclearTimeout(this.backLoad);\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst { className, flipped, frontLoadDelay, backLoadDelay, children, ...others } = this.props;\r\n\t\tlet frontProps, frontChilds, backProps, backChilds;\r\n\t\tfor (let i=0, elem; elem=children[i]; i++) {\r\n\t\t\tif (elem.type === FrontFace) {\r\n\t\t\t\tconst { children, ...others } = elem.props;\r\n\t\t\t\tfrontProps = others;\r\n\t\t\t\tfrontChilds = children;\r\n\t\t\t}\r\n\t\t\telse if (elem.type === BackFace) {\r\n\t\t\t\tconst { children, ...others } = elem.props;\r\n\t\t\t\tbackProps = others;\r\n\t\t\t\tbackChilds = children;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<FlipCard className={className} flipped={this.isFlipped()} onClick={this.flip} {...others} >\r\n\t\t\t\t<FrontFace {...frontProps}>\r\n\t\t\t\t\t{this.state.frontLoaded ? frontChilds : ''}\r\n\t\t\t\t</FrontFace>\r\n\t\t\t\t<BackFace {...backProps}>\r\n\t\t\t\t\t{this.state.backLoaded ? backChilds : ''}\r\n\t\t\t\t</BackFace>\r\n\t\t\t</FlipCard>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nexport const SimpleDialog = component('SimpleDialog', 'mdl-dialog', {visible:'is-visible'}, 'div')\r\nexport const Modal = component('Modal', 'mdl-modal', {}, 'div', {open:bool.isRequired, onCancel: func.isRequired}, {},\r\n\t(elem, props, children) => {\r\n\t\tconst { open, onCancel, ...others } = props;\r\n\t\treturn (\r\n\t\t\t<div {...others}>\r\n\t\t\t\t{children}\r\n\t\t\t\t<LayoutObfuscator open={open} onCancel={onCancel} />\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n)\r\n\r\nexport const Dialog = component('Dialog', '', {}, 'div',\r\n\t{\r\n\t\topen: bool,\r\n\t\tmodal: bool,\r\n\t\tonCancel: func,\r\n\t},\r\n\t{\r\n\t\topen: false,\r\n\t\tmodal: false\r\n\t},\r\n\t(elem, props, children) => {\r\n\t\tconst { open, modal, onCancel, ...others } = props;\r\n\t\treturn (modal\r\n\t\t?\r\n\t\t\t<Modal open={open} onCancel={onCancel}>\r\n\t\t\t\t<SimpleDialog visible={open} {...others}>\r\n\t\t\t\t\t{children}\r\n\t\t\t\t</SimpleDialog>\r\n\t\t\t</Modal>\r\n\t\t:\r\n\t\t\t<SimpleDialog visible={open} {...others}>\r\n\t\t\t\t{children}\r\n\t\t\t</SimpleDialog>\r\n\t\t)\r\n\t}\r\n)\r\n\r\nexport const Drawer = component('Drawer', '', {right:'mdl-layout__drawer-right', open:'is-visible'}, 'div',\r\n\t{\r\n\t\tmodal: bool,\r\n\t\tautoClose: bool,\r\n\t\tonCancel: func,\r\n\t},\r\n\t{\r\n\t\tmodal: false,\r\n\t\tautoClose: false,\r\n\t},\r\n\t(elem, props, children) => {\r\n\t\tlog.debug('render', props);\r\n\t\tconst { open, modal, autoClose, onCancel, onClick, ...others } = props;\r\n\t\treturn (modal\r\n\t\t?\r\n\t\t\t<Modal open={open} onCancel={onCancel}>\r\n\t\t\t\t<MdlDrawer visible={open} onClick={(e) => onClick ? onClick(e) : (autoClose ? onCancel(e) : undefined)} {...others}>\r\n\t\t\t\t\t{children}\r\n\t\t\t\t</MdlDrawer>\r\n\t\t\t</Modal>\r\n\t\t:\r\n\t\t\t<MdlDrawer {...others}>\r\n\t\t\t\t{children}\r\n\t\t\t</MdlDrawer>\r\n\t\t)\r\n\t}\r\n)\r\n\r\n\r\nexport class Lightbox extends Component {\r\n\tstatic displayName = 'Lightbox';\r\n\r\n\tstatic propTypes = {\r\n\t\topen: bool,\r\n\t\timages: arrayOf(shape({\r\n\t\t\tsrc: string.isRequired,\r\n\t\t\tsrcset: array,\r\n\t\t\tcaption: string,\r\n\t\t})),\r\n\t\tindex: number,\r\n\t\tonCancel: func,\r\n\t\tonNext: func,\r\n\t\tonPrev: func,\r\n\t\tonNav: func,\r\n\r\n\t\tnoKeyboardInput: bool,\r\n\t\tnoBackdropCancel: bool,\r\n\t\tnoNextOnClick: bool,\r\n\t\tnoCloseButton: bool,\r\n\t\tnoImageCount: bool,\r\n\t\tnoPositionIndicators: bool,\r\n\t\tnoPreload: bool,\r\n\t\tnoSpinner: bool,\r\n\t\tnoRotate: bool,\r\n\t\twidth: number,\r\n\t}\r\n\r\n\tstatic defaultProps = {\r\n\t\topen: false,\r\n\t\timages: [],\r\n\t\tindex: 0,\r\n\r\n\t\tnoKeyboardInput: false,\r\n\t\tnoBackdropCancel: false,\r\n\t\tnoNextOnClick: false,\r\n\t\tnoCloseButton: false,\r\n\t\tnoImageCount: false,\r\n\t\tnoPositionIndicators: false,\r\n\t\tnoPreload: false,\r\n\t\tnoSpinner: false,\r\n\t\tnoRotate: false,\r\n\t\twidth: 900,\r\n\t}\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.state = {loaded:[]}\r\n\t\tthis.cancel = this.cancel.bind(this);\r\n\t\tthis.next = this.next.bind(this);\r\n\t\tthis.prev = this.prev.bind(this);\r\n\t\tthis.nav = this.nav.bind(this);\r\n\t\tthis.imageClicked = this.imageClicked.bind(this);\r\n\t\tthis.keyPressed = this.keyPressed.bind(this);\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tconst { noKeyboardInput } = this.props;\r\n\t\tif (!noKeyboardInput && typeof window == 'object') {window.addEventListener('keydown', this.keyPressed);}\r\n\t}\r\n\r\n\tcomponentWillUnmount() {\r\n\t\tconst { noKeyboardInput } = this.props;\r\n\t\tif (!noKeyboardInput && typeof window == 'object') {window.removeEventListener('keydown', this.keyPressed);}\r\n\t}\r\n\r\n\tcancel(event) {\r\n\t\tlog.log('cancel', event);\r\n\t\tconst { noBackdropCancel, onCancel } = this.props;\r\n\t\tif (noBackdropCancel) return;\r\n\t\tthis.setState({loaded:[]});\r\n\t\tif (onCancel) {onCancel(event);}\r\n\t\tif (event) {event.preventDefault(); event.stopPropagation();}\r\n\t}\r\n\r\n\tnext(event) {\r\n\t\tlog.log('next', event);\r\n\t\tconst { images, index, onNext, onNav, noRotate } = this.props;\r\n\t\tif (index === images.length - 1) {\r\n\t\t\tif (noRotate) {return;}\r\n\t\t\tif (onNav) {onNav(0, event);}\r\n\t\t} else {\r\n\t\t\tif (onNext) {onNext(event);}\r\n\t\t}\r\n\t\tif (event) {event.preventDefault(); event.stopPropagation();}\r\n\t}\r\n\r\n\tprev(event) {\r\n\t\tlog.log('prev', event);\r\n\t\tconst { images, index, onPrev, onNav, noRotate } = this.props;\r\n\t\tif (index === 0) {\r\n\t\t\tif (noRotate) {return;}\r\n\t\t\tif (onNav) {onNav(images.length - 1, event);}\r\n\t\t} else {\r\n\t\t\tif (onPrev) {onPrev(event);}\r\n\t\t}\r\n\t\tif (event) {event.preventDefault(); event.stopPropagation();}\r\n\t}\r\n\r\n\tnav(idx, event) {\r\n\t\tlog.log('nav', event);\r\n\t\tconst { onNav } = this.props;\r\n\t\tif (onNav) {onNav(idx, event);}\r\n\t\tif (event) {event.preventDefault(); event.stopPropagation();}\r\n\t}\r\n\r\n\timageClicked(event) {\r\n\t\tlog.log('imageClicked', event);\r\n\t\tif (this.props.noNextOnClick) return;\r\n\t\tthis.next(event);\r\n\t}\r\n\r\n\r\n\timageLoaded(event, index) {\r\n\t\tlog.log('imageLoaded', event, index);\r\n\t\tconst loaded = this.state.loaded.concat();\r\n\t\tloaded[index] = true;\r\n\t\tthis.setState({loaded});\r\n\t}\r\n\r\n\tkeyPressed(event) {\r\n\t\tif (event.keyCode === 37) {\r\n\t\t\tthis.prev(event);\r\n\t\t} else if (event.keyCode === 39) {\r\n\t\t\tthis.next(event);\r\n\t\t} else if (event.keyCode === 27) {\r\n\t\t\tthis.cancel(event);\r\n\t\t}\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst { open, index, images, noCloseButton, noImageCount, noPositionIndicators, noPreload, noSpinner, noRotate } = this.props;\r\n\t\tconst noImages = !images || !images.length;\r\n\t\tconst caption = !noImages && images[index].caption;\r\n\t\tconst style = { cursor: this.props.noNextOnClick ? 'auto' : 'pointer', opacity: this.state.loaded[index] ? 1 : 0};\r\n\t\tconst alt = !noImages && images[index].alt;\r\n\t\tconst imgStyle = !this.state.loaded[index] ? {position:'absolute', width:0, height:0} : {};\r\n\t\tconst positionIndicators = noPositionIndicators ? undefined : (\r\n\t\t\t<div className=\"mdl-lightbox__position-indicators\">\r\n\t\t\t\t{images.map((img, i) => (\r\n\t\t\t\t\t<a key={i} href=\"#\" className={'mdl-lightbox__position-indicator' + (i === index ? ' is-active' : '')}\r\n\t\t\t\t\t\tonClick={(evt) => this.nav(i, evt)} onTouchEnd={(evt) => this.nav(i, evt)}><b></b></a>\r\n\t\t\t\t))}\r\n\t\t\t</div>\r\n\t\t)\r\n\t\tconst imageCount = noImageCount ? undefined : <div className=\"mdl-lightbox__image-count\">{index + 1} / {images.length}</div>;\r\n\t\tconst figcaption = !caption ? undefined : <figcaption className=\"mdl-lightbox__caption\">{caption}</figcaption>;\r\n\t\tconst noFooter = !caption && !positionIndicators && !imageCount;\r\n\t\treturn (\r\n\t\t\t<Modal open={open} onCancel={this.cancel}>\r\n\t\t\t\t<div className={'mdl-lightbox' + (open ? ' is-visible' : '')}>\r\n\t\t\t\t\t<div className=\"mdl-lightbox__content\">\r\n\r\n\t\t\t\t\t\t{noCloseButton ? undefined :\r\n\t\t\t\t\t\t\t<FABButton className=\"mdl-lightbox__close-button\" onClick={this.cancel} onTouchEnd={this.cancel}>\r\n\t\t\t\t\t\t\t\t<Icon name=\"close\" />\r\n\t\t\t\t\t\t\t</FABButton>\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t{noImages ? undefined :\r\n\t\t\t\t\t\t\t<figure>\r\n\t\t\t\t\t\t\t\t{!this.state.loaded[index] ?\r\n\t\t\t\t\t\t\t\t\t<Spinner />\r\n\t\t\t\t\t\t\t\t:''}\r\n\t\t\t\t\t\t\t\t{!this.state.loaded[index] && alt ?\r\n\t\t\t\t\t\t\t\t\t<img src={alt.src} style={alt.style} />\r\n\t\t\t\t\t\t\t\t:''}\r\n\t\t\t\t\t\t\t\t<img\r\n\t\t\t\t\t\t\t\t\tonClick={this.imageClicked}\r\n\t\t\t\t\t\t\t\t\tonLoad={e => this.imageLoaded(e, index)}\r\n\t\t\t\t\t\t\t\t\tonTouchEnd={this.imageClicked}\r\n\t\t\t\t\t\t\t\t\tsrc={images[index].src}\r\n\t\t\t\t\t\t\t\t\tstyle={{...style, ...imgStyle}}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t{noFooter ? undefined :\r\n\t\t\t\t\t\t\t\t\t<div className=\"mdl-lightbox__footer\">\r\n\t\t\t\t\t\t\t\t\t\t{positionIndicators}\r\n\t\t\t\t\t\t\t\t\t\t{imageCount}\r\n\t\t\t\t\t\t\t\t\t\t{figcaption}\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t</figure>\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t{noPreload || !this.state.loaded[index] ? undefined :\r\n\t\t\t\t\t\t\t<div className=\"mdl-lightbox__preload\" style={{width:0, height:0, overflow:'hidden', opacity:0}}>\r\n\t\t\t\t\t\t\t\t{images.map(({src}, i) => (i === index ? undefined :\r\n\t\t\t\t\t\t\t\t\t<img key={i} src={src} onLoad={e => this.imageLoaded(e, i)} />\r\n\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<FABButton className=\"mdl-lightbox__prev-button\" disabled={noRotate && (index === 0)} onClick={this.prev} onTouchEnd={this.prev}>\r\n\t\t\t\t\t\t<Icon name=\"navigate_before\" />\r\n\t\t\t\t\t</FABButton>\r\n\r\n\t\t\t\t\t<FABButton className=\"mdl-lightbox__next-button\" disabled={noRotate && (index === images.length - 1)} onClick={this.next} onTouchEnd={this.next}>\r\n\t\t\t\t\t\t<Icon name=\"navigate_next\" />\r\n\t\t\t\t\t</FABButton>\r\n\r\n\t\t\t\t</div>\r\n\t\t\t</Modal>\r\n\t\t);\r\n\t}\r\n};\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/components/Mdl/mdl-extras.jsx\n **/","import log from 'picolog';\r\nimport { createStore, applyMiddleware, combineReducers, compose } from 'redux';\r\nimport thunk from 'redux-thunk';\r\nimport createLogger from 'redux-logger';\r\n// import { createResponsiveStateReducer, responsiveStoreEnhancer } from 'redux-responsive';\r\nimport { link, namedLink } from 'redux-apis';\r\n\r\nimport { fromJSON } from './components/Entity/Entity';\r\n\r\nfunction createReducer(app) {\r\n\tconst rootReducer = combineReducers({\r\n\t\t/*\r\n\t\tbrowser: createResponsiveStateReducer({\r\n\t\t\t// Breakpoints for responsive layout. Chosen to group similar devices.\r\n\t\t\t// Note that these are *CSS pixels* we are talking about, not *physical pixels*.\r\n\t\t\t// Read more here: http://www.quirksmode.org/blog/archives/2010/04/a_pixel_is_not.html\r\n\t\t\t// E.G. the iPhone 4 screen has a resolution of 640x960 physical pixels, but only 320x480\r\n\t\t\t// CSS pixels; manufacturers choose a `devicePixelRatio` suitable for their device, because\r\n\t\t\t// if we render text at the normal size on these device's high DPI screens, it would become\r\n\t\t\t// illegibly small. As such, these numbers are unlikely to radically change, even if\r\n\t\t\t// physical resolutions keep improving, because they are more related to the dimensions of\r\n\t\t\t// the screen in centimeters than to the resolution in pixels.\r\n\t\t\t// SEE: http://www.mydevice.io/devices/\r\n\t\t\t\t\t\t// < 320: unsupported\r\n\t\t\txxs: 320,\t// < 360: small phones, portrait (e.g. iPhone 4)\r\n\t\t\txs: 360,\t// < 480: large phones/phablets, portrait (e.g. Samsung Galaxy S5, iPhone 6 Plus)\r\n\t\t\tsm: 480,\t// < 720: small tablets, portrait\r\n\t\t\tmd: 720,\t// < 1025: large tablets, portrait\r\n\t\t\tlg: 1025,\t// < 1600: small monitor, landscape (cutoff at 1025 i.s.o 1024 to exclude tablets with 1024x1440 resolution)\r\n\t\t\txl: 1600,\t// < 2560: HD monitor\r\n\t\t\txxl: 2560,\t// Projection screens, VR devices?\r\n\t\t}),\r\n\t\t*/\r\n\t\tapp: app.reducer,\r\n\t});\r\n\r\n\treturn function(state, action) {\r\n\t\tconst currentState = action.type === '@@bridalapp/RESET' ? undefined : state;\r\n\t\treturn rootReducer(currentState, action);\r\n\t}\r\n}\r\n\r\nconst storeEnhancer = typeof window == 'object'\r\n\t\t? compose(applyMiddleware(thunk, createLogger({logger: log})))\r\n\t\t: compose(applyMiddleware(thunk));\r\n\r\n\r\nlet AppApi = require('./components/App/api').AppApi;\r\nlet app = new AppApi();\r\nexport const store = createStore(\r\n\tcreateReducer(app),\r\n\ttypeof window == 'object' && window.__data && fromJSON(window.__data) || undefined,\r\n\tstoreEnhancer\r\n);\r\nstore.app = link(store, app);\r\nexport default store;\r\n\r\n\r\nif (typeof window == 'object') {\r\n\twindow.bridalapp = store.app;\r\n}\r\n\r\nif (module.hot) {\r\n\tmodule.hot.accept('./components/App/api', () => {\r\n\r\n\t\tconst msg = 'Hot-reloading \\'./components/App/api\\'',\r\n\t\t\targs = typeof window=='object'? [`%c${msg}`,'color:green'] : [msg];\r\n\r\n\t\tAppApi = require('./components/App/api').AppApi;\r\n\t\tapp = new AppApi();\r\n\t\tstore.replaceReducer(createReducer(app));\r\n\t\tstore.app = link(store, app);\r\n\t\tif (typeof window == 'object') {window.bridalapp = app;}\r\n\t});\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/store.jsx\n **/","module.exports = require(\"babel-runtime/core-js/promise\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"babel-runtime/core-js/promise\"\n ** module id = 20\n ** module chunks = 0\n **/","module.exports = require(\"react-redux\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"react-redux\"\n ** module id = 21\n ** module chunks = 0\n **/","module.exports = require(\"redux-load-api\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"redux-load-api\"\n ** module id = 22\n ** module chunks = 0\n **/","module.exports = require(\"babel-runtime/core-js/object/define-properties\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"babel-runtime/core-js/object/define-properties\"\n ** module id = 23\n ** module chunks = 0\n **/","module.exports = require(\"react-router\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"react-router\"\n ** module id = 24\n ** module chunks = 0\n **/","import Entity from '../Entity/Entity';\r\nimport Credential from './Credential';\r\n\r\n@Entity\r\nexport class PasswordCredential extends Credential {\r\n\tconstructor(id, password) {\r\n\t\tsuper(id)\r\n\t\tthis.password = password;\r\n\t}\r\n}\r\nexport default PasswordCredential;\n\n\n/** WEBPACK FOOTER **\n ** ./src/components/Auth/PasswordCredential.jsx\n **/","import log from 'picolog';\r\nimport Api, { link } from 'redux-apis';\r\nimport Async from 'redux-async-api';\r\nimport { remote } from 'redux-fetch-api';\r\n\r\nimport { TextfieldApi } from '../Mdl/api';\r\nimport { fromJSON, toJSON } from '../Entity/Entity';\r\n\r\nimport Suid from 'ws.suid';\r\nimport PasswordCredential from './PasswordCredential';\r\nimport Account from './Account';\r\nimport Role from './Role';\r\n\r\nexport class LoginDialogApi extends Api {\r\n\tconstructor(...args) {\r\n\t\tsuper(...args);\r\n\t\tthis.username = link(this, new TextfieldApi());\r\n\t\tthis.username.type = 'text';\r\n//\t\tthis.username.pattern = '\\s*\\S.{1,}\\S\\s*';\r\n\t\tthis.password = link(this, new TextfieldApi());\r\n\t\tthis.password.type = 'password';\r\n//\t\tthis.password.pattern = '\\s*\\S.{5,}\\S\\s*';\r\n\t}\r\n\r\n}\r\n\r\nexport class RegisterDialogApi extends Api {\r\n\tconstructor(...args) {\r\n\t\tsuper(...args);\r\n\t\tthis.username = link(this, new TextfieldApi());\r\n\t\tthis.username.type = 'text';\r\n//\t\tthis.username.pattern = '\\s*\\S.{1,}\\S\\s*';\r\n\t\tthis.password = link(this, new TextfieldApi());\r\n\t\tthis.password.type = 'password';\r\n//\t\tthis.password.pattern = '\\s*\\S.{5,}\\S\\s*';\r\n\t\tthis.confirm = link(this, new TextfieldApi());\r\n\t\tthis.confirm.type = 'password';\r\n//\t\tthis.confirm.pattern = '\\s*\\S.{5,}\\S\\s*';\r\n\t}\r\n}\r\n\r\n@remote\r\nexport class Auth extends Async {\r\n\tstatic CHALLENGE = 'AUTH_CHALLENGE';\r\n\tstatic LOGGED_IN = 'LOGGED_IN';\r\n\tstatic LOGGED_OUT = 'LOGGED_OUT';\r\n\tstatic CANCEL = 'CANCEL_AUTH';\r\n\r\n\tstatic INITIAL_STATE = {\r\n\t\t...Async.INITIAL_STATE,\r\n\t\tsession: null,\r\n\t\tchallenge: null,\r\n\t};\r\n\r\n\tconstructor(state = Auth.INITIAL_STATE) {\r\n\t\tsuper(state);\r\n\t\tthis.setHandler(Auth.CHALLENGE, (state, {payload}) => ({...state, challenge:payload}));\r\n\t\tthis.setHandler(Auth.LOGGED_IN,\t(state, {payload}) => ({...state, session:payload, challenge:null}));\r\n\t\tthis.setHandler(Auth.LOGGED_OUT, (state, action) => ({...state, session:null, challenge:null}));\r\n\t\tthis.setHandler(Auth.CANCEL, (state, action) => ({...state, challenge:null}));\r\n\t\tObject.defineProperty(this, 'loggedIn', {enumerable:true, get: () => !!this.session});\r\n\t\tObject.defineProperty(this, 'challenged', {enumerable:true, get: () => !!(this.challenge() && this.challenge().url && !this.challenge().accepted)});\r\n\t\tObject.defineProperty(this, 'session', {enumerable:true, get: () => this.getState().session});\r\n\t\tObject.defineProperty(this, 'onProvoke', {enumerable:true, value: () => this.provoke()});\r\n\t\tObject.defineProperty(this, 'onCancel', {enumerable:true, value: () => this.cancel()});\r\n\t\tObject.defineProperty(this, 'onLogin', {enumerable:true, value: () => this.login()});\r\n\t\tObject.defineProperty(this, 'onLogout', {enumerable:true, value: () => this.logout()});\r\n\t\tObject.defineProperty(this, 'onRegister', {enumerable:true, value: () => this.register()});\r\n\t\tthis.loginDialog = link(this, new LoginDialogApi())\r\n\t\tthis.registerDialog = link(this, new RegisterDialogApi())\r\n\t}\r\n\r\n\tloadSession() {\r\n\t\tlog.debug('loadSession');\r\n\t\tthis.setBusy();\r\n\t\treturn fetchSessionInfo(this)\r\n\t\t\t.then(session => {\r\n\t\t\t\tlog.debug('loadSession => ', session);\r\n\t\t\t\tthis.setDone();\r\n\t\t\t\treturn session;\r\n\t\t\t});\r\n\t}\r\n\r\n\tlogin(username, password) {\r\n\t\tif (username === undefined) {return this.login(this.loginDialog.username.value, this.loginDialog.password.value);}\r\n\r\n\t\tfunction remoteLogin(auth, challenge) {\r\n\t\t\tlog.debug('remoteLogin', auth, challenge);\r\n\t\t\treturn auth.fetch(challenge.url, {\r\n\t\t\t\tmethod: challenge.method,\r\n\t\t\t\theaders: {\r\n\t\t\t\t\t'Content-Type': challenge.contentType,\r\n\t\t\t\t},\r\n\t\t\t\tbody: encode(challenge, username, password),\r\n\t\t\t})\r\n\t\t\t.then(response => {\r\n\t\t\t\tlog.debug('remoteLogin => ', response);\r\n\t\t\t\treturn fetchSessionInfo(auth)\r\n\t\t\t\t\t.then(session => {\r\n\t\t\t\t\t\tauth.setDone();\r\n\t\t\t\t\t\tchallenge.resolve(response);\r\n\t\t\t\t\t\treturn session;\r\n\t\t\t\t\t});\r\n\t\t\t})\r\n\t\t\t.catch(error => {\r\n\t\t\t\tauth.setError(error);\r\n\t\t\t\tchallenge.reject(error);\r\n\t\t\t})\r\n\t\t}\r\n\r\n\t\tif (this.loggedIn) {\r\n\t\t\tlog.log('Already logged in as `' + this.session.user.name + '`: ', this.session.user);\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tthis.setBusy();\r\n\t\treturn this.dispatch(() => {\r\n\t\t\treturn new Promise((resolve,reject)=>{\r\n\t\t\t\tif (! this.challenge()) {\r\n\t\t\t\t\tlog.debug('Provoking login challenge');\r\n\t\t\t\t\treturn this.provoke()\r\n\t\t\t\t\t\t.then(challenge => {\r\n\t\t\t\t\t\t\tlog.debug('Server issued a login challenge');\r\n\t\t\t\t\t\t\treturn remoteLogin(this, challenge).then(resolve).catch(reject);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\treturn remoteLogin(this, this.challenge()).then(resolve).catch(reject);\r\n\t\t\t}).then((results) => {log.debug('Login', this.session.user); return results;});\r\n\t\t\tlog.debug('Posting credentials to ', challenge.url);\r\n\t\t});\r\n\t}\r\n\r\n\tlogout() {\r\n\t\tlog.debug('logout', this.session.user);\r\n\t\treturn this.dispatch(() => {\r\n\t\t\tthis.setBusy();\r\n\t\t\tthis.cancel();\r\n\t\t\treturn this.fetch('/logout').catch().then(() => {\r\n\t\t\t\tthis.setDone();\r\n\t\t\t\tthis.dispatch(this.createAction(Auth.LOGGED_OUT)());\r\n\t\t\t})\r\n\t\t});\r\n\t}\r\n\r\n\tregister(username, password, confirm) {\r\n\t\tif (username === undefined) {return this.register(this.registerDialog.username.value, this.registerDialog.password.value, this.registerDialog.confirm.value);}\r\n\r\n\t\tlog.log('register', username, password, confirm);\r\n\t\tthis.setBusy();\r\n\t\treturn this.dispatch(() => {\r\n\t\t\treturn new Promise((resolve,reject)=>{\r\n\t\t\t\tconst account = new Account(\r\n\t\t\t\t\tSuid.next(),\r\n\t\t\t\t\tusername,\r\n\t\t\t\t\t[new PasswordCredential(Suid.next(), password)]\r\n\t\t\t\t);\r\n\r\n\t\t\t\tlog.log('register: creating account', account);\r\n\t\t\t\treturn this.fetch('/accounts', {\r\n\t\t\t\t\tmethod: 'POST',\r\n\t\t\t\t\theaders: {\r\n\t\t\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t\t\t},\r\n\t\t\t\t\tbody: toJSON(account),\r\n\t\t\t\t})\r\n\t\t\t\t.then(response => response.text())\r\n\t\t\t\t.then(text => fromJSON(text))\r\n\t\t\t\t.then(account => {\r\n\t\t\t\t\tlog.log('register: created account', account);\r\n\t\t\t\t\tthis.login(username, password).then(result => {\r\n\t\t\t\t\t\tthis.setDone();\r\n\t\t\t\t\t\tresolve(result);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch(error => {\r\n\t\t\t\t\t\tlog.error(error);\r\n\t\t\t\t\t\tthis.setError(error);\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t\t.catch(error => {\r\n\t\t\t\t\tlog.error(error);\r\n\t\t\t\t\tthis.setError(error);\r\n\t\t\t\t})\r\n\t\t\t})\r\n\t\t\t.catch(error => {\r\n\t\t\t\tlog.error(error);\r\n\t\t\t\tthis.setError(error);\r\n\t\t\t})\r\n\t\t})\r\n\t}\r\n\r\n\tcancel() {\r\n\t\tlog.log('cancel');\r\n\t\treturn this.dispatch(() => {\r\n\t\t\tconst c = this.challenge();\r\n\t\t\tif (c) {\r\n\t\t\t\tconst error = Error('Login/registration cancelled');\r\n\t\t\t\tthis.setError(error);\r\n\t\t\t\tthis.dispatch(this.createAction(Auth.CANCEL)());\r\n\t\t\t\tif (c.reject) {c.reject(error);}\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tauthenticated() {\r\n\t\tlog.log('authenticated');\r\n\t\tconst auth = this;\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tif (auth.loggedIn) {resolve(auth.session);}\r\n\t\t\telse auth.provoke(resolve, reject);\r\n\t\t});\r\n\t}\r\n\r\n\tprovoke(resolve, reject) {\r\n\t\tlog.log('provoke', resolve, reject);\r\n\t\t// provoke a login challenge, async\r\n\t\t// provoke a challenge by fetching url\r\n\t\treturn new Promise((accept, deny) => {\r\n\t\t\t// set up intermediate challenge to make accept and deny survive the round-trip\r\n\t\t\tthis.challenge({}, accept, deny);\r\n\t\t\t// this fetch will result in 401 and be intercepted, after which\r\n\t\t\t// challenge will be called again with the actual server challenge\r\n\t\t\tthis.fetch('/challenge')\r\n\t\t\t\t.then(response => {\r\n\t\t\t\t\tif (response && response.status == 200) {\r\n\t\t\t\t\t\treturn response.text();\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn response.text().then(text => {\r\n\t\t\t\t\t\tconst error = new Error(text);\r\n\t\t\t\t\t\terror.status = response.status;\r\n\t\t\t\t\t\terror.statusText = response.statusText;\r\n\t\t\t\t\t\tthrow error;\r\n\t\t\t\t\t});\r\n\t\t\t\t})\r\n\t\t\t\t.then(text => fromJSON(text))\r\n\t\t\t\t.then(session => processSession(this, session))\r\n\t\t\t\t.then(session => {\r\n\t\t\t\t\tif (resolve) {resolve(session);}\r\n\t\t\t\t\treturn session;\r\n\t\t\t\t})\r\n\t\t\t\t.catch(error => {\r\n\t\t\t\t\tlog.log('Provoking login challenge failed.', error);\r\n\t\t\t\t\tif (reject) {reject(error);}\r\n\t\t\t\t})\r\n\t\t});\r\n\t}\r\n\r\n\tchallenge(challenge, resolve, reject) {\r\n\t\t// paramless invocation is sync\r\n\t\tif (!challenge) {return this.getState().challenge}\r\n\t\t// only accept challenges on the client side\r\n\t\tif (typeof window != 'object') {reject(new Error('Unauthorized'));}\r\n\r\n\t\tlog.log('challenge', challenge, resolve, reject);\r\n\r\n\t\t// reject any old login challenge\r\n\t\tconst c = this.getState().challenge;\r\n\t\tif (c && c.url) {c.reject(new Error(\"Login challenge cancelled\"));}\r\n\r\n\t\t// dispatch the challenge\r\n\t\tchallenge.resolve = resolve;\r\n\t\tchallenge.reject = reject;\r\n\t\tlog.debug('dispatching challenge', challenge);\r\n\t\tthis.dispatch(this.createAction(Auth.CHALLENGE)(challenge));\r\n\r\n\t\t// If there is an old, forced challenge and new challenge is login challenge\r\n\t\tif (c && !c.url && c.resolve && challenge.url) {\r\n\t\t\t// if new challenge is login challenge (does have url), forcing challenge is now resolved\r\n\t\t\tc.resolve(challenge);\r\n\t\t}\r\n\t}\r\n}\r\nexport default Auth;\r\n\r\nexport function authenticated(target) {\r\n\tfunction enhance(target) {\r\n\t\tlog.debug('authenticated', target);\r\n\t\tObject.defineProperties(target.prototype, {\r\n\t\t\tauthenticated: {value:function() {\r\n\t\t\t\tlet p = this;\r\n\t\t\t\twhile (p = p.__parent) {\r\n\t\t\t\t\tif (p.authenticated) {\r\n\t\t\t\t\t\treturn p.authenticated();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn Promise.reject(new Error('No authentication method'));\r\n\t\t\t}},\r\n\r\n\t\t\tgetSession: {value:function() {\r\n\t\t\t\tlet p = this;\r\n\t\t\t\twhile (p = p.__parent) {\r\n\t\t\t\t\tif (p.getSession) {\r\n\t\t\t\t\t\treturn p.getSession();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn null;\r\n\t\t\t}},\r\n\t\t});\r\n\t\tlog.trace('authenticated => ', target);\r\n\t\treturn target;\r\n\t}\r\n\treturn target ? enhance(target) : enhance;\r\n}\r\n\r\nfunction fetchSessionInfo(auth) {\r\n\tlog.debug('fetchSessionInfo');\r\n\treturn auth.fetch('/session')\r\n\t\t.then(response => {\r\n\t\t\tlog.debug('fetchSessionInfo => response.status=', response.status);\r\n\t\t\treturn response.status == 200 && response.text();\r\n\t\t})\r\n\t\t.then(text => {\r\n\t\t\tlog.debug('fetchSessionInfo => text=', text);\r\n\t\t\treturn fromJSON(text);\r\n\t\t})\r\n\t\t.then(session => processSession(auth, session))\r\n}\r\n\r\nfunction processSession(auth, session) {\r\n\tlog.debug('processSession', session);\r\n\tconst { user, sessionId } = session;\r\n\tlog.debug('processSession => sessionId=', sessionId);\r\n\tlog.debug('processSession => user=', user);\r\n\tif (typeof document == 'object') {\r\n\t\tconst maxAge = sessionId ? 10 * 24 * 60 * 60 : 0;\r\n\t\tdocument.cookie = `BASESSION=${sessionId}; Max-Age=${maxAge}; path=/`;\r\n\t\tlog.debug('processSession => cookie ' + (maxAge ? 'set' : 'cleared'));\r\n\t}\r\n\tif (user && !auth.loggedIn) {\r\n\t\tlog.debug('fetchSessionInfo => Dispatching LOGGED_IN action', session);\r\n\t\tauth.dispatch(auth.createAction(Auth.LOGGED_IN)(session));\r\n\t}\r\n\telse if (!user && auth.loggedIn) {\r\n\t\tlog.debug('fetchSessionInfo => Dispatching LOGGED_OUT action');\r\n\t\tauth.dispatch(auth.createAction(Auth.LOGGED_OUT)());\r\n\t}\r\n\treturn session;\r\n}\r\n\r\n\r\nfunction encode(challenge, username, password) {\r\n\tif (challenge.contentType === 'application/x-www-form-urlencoded') {\r\n\t\treturn urlEncode(challenge, username, password);\r\n\t}\r\n\telse {\r\n\t\terror = Error(`Unable to encode the given credentials. Unsupported content type '${challenge.contentType}'.`);\r\n\t}\r\n}\r\n\r\nfunction urlEncode(challenge, username, password) {\r\n\tconst uf = encodeURIComponent(challenge.usernameField);\r\n\tconst u = encodeURIComponent(username);\r\n\tconst pf = encodeURIComponent(challenge.passwordField);\r\n\tconst p = encodeURIComponent(password);\r\n\treturn `${uf}=${u}&${pf}=${p}`;\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/components/Auth/api.jsx\n **/","import log from 'picolog';\r\nimport React, { Component, PropTypes } from 'react';\r\nconst { object, func } = PropTypes;\r\n\r\nexport class Publication extends Component {\r\n\tstatic propTypes = {\r\n\t\tonMayPublish: func.isRequired,\r\n\t\tonPublish: func.isRequired,\r\n\t\tonUnpublish: func.isRequired,\r\n\t};\r\n\r\n\tconstructor(...props) {\r\n\t\tsuper(...props);\r\n\t}\r\n\r\n\tmayPublish(item) {\r\n\t\treturn this.props.onMayPublish(item)\r\n\t}\r\n\r\n\tpublishClicked(item, event) {\r\n\t\tlog.log('publishClicked', item, event);\r\n\t\tevent.preventDefault();\r\n\t\treturn this.props.onPublish(item);\r\n\t}\r\n\r\n\tunpublishClicked(item, event) {\r\n\t\tlog.log('unpublishClicked', item, event);\r\n\t\tevent.preventDefault();\r\n\t\treturn this.props.onUnpublish(item);\r\n\t}\r\n}\r\nexport default Publication;\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/components/Publication/Publication.jsx\n **/","import log from 'picolog';\r\nimport { link } from 'redux-apis';\r\nimport { remote } from 'redux-fetch-api';\r\n\r\nimport { fromJSON, indexOf } from '../Entity/Entity';\r\nimport { EntityApi } from '../Entity/api';\r\nimport { authenticated } from '../Auth/api';\r\nimport Role from '../Auth/Role';\r\n\r\n@remote\r\n@authenticated\r\nexport class PublicationApi extends EntityApi {\r\n\tstatic INITIAL_STATE = {\r\n\t\t...EntityApi.INITIAL_STATE,\r\n\t}\r\n\r\n\tconstructor(state = PublicationApi.INITIAL_STATE) {\r\n\t\tsuper(state);\r\n\t\tthis.item.onMayPublish = this.mayPublish.bind(this);\r\n\t\tthis.item.onPublish = this.publish.bind(this);\r\n\t\tthis.item.onUnpublish = this.unpublish.bind(this);\r\n\t}\r\n\r\n\tmayPublish(item) {\r\n\t\tlog.trace('mayPublish', item, this, this.getSession);\r\n\t\tif (this.getSession()) {\r\n\t\t\tfor (let i=0, role; role=this.getSession().user.roles[i]; i++) {\r\n\t\t\t\tif (role.equals(Role.BRAUTSCHLOSS_USER) ||\r\n\t\t\t\t\trole.equals(Role.BRAUTSCHLOSS_MANAGER) ||\r\n\t\t\t\t\trole.equals(Role.ADMINISTRATOR)) {\r\n\t\t\t\t\tlog.trace('mayPublish => true');\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tlog.trace('mayPublish => false');\r\n\t\treturn false;\r\n\t}\r\n\r\n\tsetPublished(item, published) {\r\n\t\tlog.debug('setPublished', item, published);\r\n\t\tconst newItem = item.clone();\r\n\t\tnewItem.published = published;\r\n\t\treturn this.save(newItem)\r\n\t\t\t.then(saved => {\r\n\t\t\t\tlog.debug('saved successfully', saved);\r\n\t\t\t\tconst newItems = [ ...this.items ];\r\n\t\t\t\tconst idx = indexOf(newItems, item);\r\n\t\t\t\tnewItems[idx] = saved;\r\n\t\t\t\tthis.setItems(newItems);\r\n\t\t\t\treturn saved;\r\n\t\t\t})\r\n\t\t\t.catch(error => {\r\n\t\t\t\tlog.error('Unable to change published status for item ' + item + '.', error);\r\n\t\t\t});\r\n\t}\r\n\r\n\tpublish(item) {\r\n\t\tlog.log('publish', item);\r\n\t\treturn this.setPublished(item, true);\r\n\t}\r\n\r\n\tunpublish(item) {\r\n\t\tlog.log('unpublish', item);\r\n\t\treturn this.setPublished(item, false);\r\n\t}\r\n}\r\nexport default PublicationApi;\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/components/Publication/api.jsx\n **/","import log from 'picolog';\r\nimport React from 'react';\r\nimport ReactDOM from 'react-dom';\r\n\r\nexport default class Scroller extends React.Component {\r\n\tstatic propTypes = {\r\n\t\t/**\r\n\t\t * The direction to scroll in, either 'vertical' or 'horizontal'.\r\n\t\t * Defaults to 'vertical'.\r\n\t\t */\r\n//\t\tdirection: React.PropTypes.oneOf(['vertical','horizontal']),\r\n\r\n\t\t/**\r\n\t\t * The items to be scrolled over.\r\n\t\t * Defaults to `{0:[]}`.\r\n\t\t *\r\n\t\t * An object mapping page indexes to arrays of items for those pages\r\n\t\t * that will be used as the initial data to load into the page buffer.\r\n\t\t * When paging is not used or only a single page is provided as initial\r\n\t\t * data, one can supply an array as shorthand for assigning an object\r\n\t\t * with only page 0 set:\r\n\t\t *\r\n\t\t * items = {[{..}, {..}, ..]}\r\n\t\t *\r\n\t\t * is equivalent to\r\n\t\t *\r\n\t\t * items = {{0: [{..}, {..}, ..]}}\r\n\t\t */\r\n\t\titems: React.PropTypes.oneOfType([\r\n\t\t\tReact.PropTypes.object,\r\n\t\t\tReact.PropTypes.array,\r\n\t\t]),\r\n\r\n\t\t/**\r\n\t\t * Default size of an item in the scroll direction, in pixels.\r\n\t\t * Defaults to 300.\r\n\t\t *\r\n\t\t * For a vertical scroller, set this to the height of each\r\n\t\t * item, for a horizontal scroller, the screen width is used.\r\n\t\t */\r\n\t\titemSize: React.PropTypes.number.isRequired,\r\n\r\n\t\t/**\r\n\t\t * Number of items to be rendered initially, before the component\r\n\t\t * is mounted.\r\n\t\t * Defaults to 12.\r\n\t\t *\r\n\t\t * This will determine how many items are rendered\r\n\t\t * during server-side rendering and hence how many items googlebot\r\n\t\t * will see when visiting the page.\r\n\t\t */\r\n\t\tinitialItemsInView: React.PropTypes.number,\r\n\r\n\t\t/**\r\n\t\t * Number of items shown per row/column.\r\n\t\t * Defaults to 1.\r\n\t\t *\r\n\t\t * For a vertical scroller, set this if there are multiple items per row,\r\n\t\t * for a horizontal scroller, if there are multiple items per column. You\r\n\t\t * must ensure that this setting corresponds with the actual situation.\r\n\t\t * If this setting differs from what is really happening, the scroll\r\n\t\t * calculations will be off and the behavior will break down.\r\n\t\t */\r\n//\t\titemsPer: React.PropTypes.number,\r\n\r\n\t\t/**\r\n\t\t * Size of buffer before the first visible item, defaults to 1.\r\n\t\t * Enables smoother scrolling by pre-rendering some items into a buffer area\r\n\t\t * just outside the visible viewport, causing images to be pre-loaded.\r\n\t\t * The number of items rendered before the first visible item will be\r\n\t\t * the value of this property, multiplied by `itemsPer`.\r\n\t\t */\r\n\t\tbufferBefore: React.PropTypes.number,\r\n\r\n\t\t/**\r\n\t\t * Size of buffer after the last visible item, defaults to 1.\r\n\t\t * Enables smoother scrolling by pre-rendering some items into a buffer area\r\n\t\t * just outside the visible viewport, causing images to be pre-loaded.\r\n\t\t * The number of items rendered after the last visible item will be\r\n\t\t * the value of this property, multiplied by `itemsPer`.\r\n\t\t */\r\n\t\tbufferAfter: React.PropTypes.number,\r\n\r\n\t\t/**\r\n\t\t * Whether to snap items to grid when scrolling comes to an end.\r\n\t\t *\r\n\t\t * NOT IMPLEMENTED YET. IMPLEMENTATION SHOULD BE BASED ON CSS Scroll Snap Points\r\n\t\t * http://www.w3.org/TR/css-snappoints-1/\r\n\t\t * Backed by a polyfill for non-compliant browsers (many still unfortunately)\r\n\t\t *\r\n\t\t * Reason: We want fluid native scrolling on iPhone.\r\n\t\t */\r\n\t\tsnap: React.PropTypes.bool,\r\n\r\n\t\t/**\r\n\t\t * Render function accepting an item and it's index and returning\r\n\t\t * the markup for that item. This function should accept empty\r\n\t\t * objects for it's item parameter and return valid markup either way.\r\n\t\t */\r\n\t\trenderItem: React.PropTypes.func.isRequired, // function(item, index)\r\n\r\n\t\t/**\r\n\t\t * Function accepting an item and it's index and returning\r\n\t\t * an identifying key for that item. The key is used for technical\r\n\t\t * purposes. This function should accept null for it's item parameter\r\n\t\t * and return a valid key either way. If this function is not provided,\r\n\t\t * the key will default to `'item' + index`.\r\n\t\t */\r\n\t\tkeyForItem: React.PropTypes.func, // function(item, index)\r\n\r\n\t\t/**\r\n\t\t * Function accepting an item and it's index and returning\r\n\t\t * an identifying slug for that item. The slug is used for\r\n\t\t * bookmarking etc, so should preferably be human-friendly.\r\n\t\t * This function should accept null for it's item parameter\r\n\t\t * and return a valid slug either way. If this function is\r\n\t\t * not provided, the slug will default to `'item' + index`.\r\n\t\t */\r\n\t\tslugForItem: React.PropTypes.func, // function(item, index)\r\n\r\n\t\t/**\r\n\t\t * Time, in ms, to capture scroll events before processing them.\r\n\t\t * Defaults to 10.\r\n\t\t */\r\n\t\tscrollDebounce: React.PropTypes.number,\r\n\r\n\r\n\t\t/* PROPERTIES RELATED TO PAGING */\r\n\r\n\t\t/**\r\n\t\t * Total number of items available in the virtual scroller.\r\n\t\t * Defaults to `items[0].length`;\r\n\t\t *\r\n\t\t * When paging is enabled, set this to the total number of\r\n\t\t * items in the resultset. E.g. for a query with 9,287 results,\r\n\t\t * set this to 9287.\r\n\t\t */\r\n\t\titemCount: React.PropTypes.number,\r\n\r\n\t\t/**\r\n\t\t * The number of items per page.\r\n\t\t * Defaults to `items[0].length` (just one page with all items).\r\n\t\t *\r\n\t\t * When paging is enabled, set this to the number of items per\r\n\t\t * page. It will be used i.c.w. `itemCount` to determine the\r\n\t\t * number of pages in the resultset. You can supply more than\r\n\t\t * one page of data initially by setting `items` to an object\r\n\t\t * with the data for multiple pages.\r\n\t\t */\r\n\t\tpageSize: React.PropTypes.number,\r\n\r\n\t\t/**\r\n\t\t * The number of pages to buffer.\r\n\t\t * Defaults to 5 when `pageSize` is set, otherwise to 1.\r\n\t\t *\r\n\t\t * When the user scrolls to pages that are not in the buffer,\r\n\t\t * `pageFetch` will be called and it's results will be added\r\n\t\t * to the buffer. When the number of pages exceeds the number\r\n\t\t * of pages specified by this setting, those pages furthest\r\n\t\t * away from the user's current scroll position will be removed\r\n\t\t * from the buffer until this number is no longer exceeded.\r\n\t\t */\r\n\t\tpageBufferSize: React.PropTypes.number,\r\n\r\n\t\t/**\r\n\t\t * Function that fetches a page of results.\r\n\t\t *\r\n\t\t * When paging is enabled, the scroller will call `pageFetch`,\r\n\t\t * passing it the index of the page to fetch, whenever it needs\r\n\t\t * the data for a certain page but does not have it. This function\r\n\t\t * should return a Promise that yields an array with the results\r\n\t\t * for the given page index.\r\n\t\t *\r\n\t\t * The scroller will call `renderLoadingItem` when it needs to\r\n\t\t * render results from a page that has not been fetched yet.\r\n\t\t */\r\n\t\tpageFetch: React.PropTypes.func, // function(pageIndex)\r\n\r\n\t\t/**\r\n\t\t * Render function accepting an item index and returning markup\r\n\t\t * indicating that the item is still loading.\r\n\t\t *\r\n\t\t * This function is called when paging is enabled and the item to\r\n\t\t * be rendered is not (yet) available. If this function is not\r\n\t\t * provided, the system will fall back to calling `renderItem`\r\n\t\t * and providing an empty object as item parameter.\r\n\t\t */\r\n\t\trenderLoadingItem: React.PropTypes.func, // function(index)\r\n\t};\r\n\r\n\tstatic defaultProps = {\r\n\t\titems: {0: []},\r\n\t\titemSize: 560,\r\n\t\tinitialItemsInView: 20,\r\n//\t\titemsPer: 1,\r\n\t\tbufferBefore: 1,\r\n\t\tbufferAfter: 1,\r\n\t\tscrollDebounce: 100,\r\n//\t\tdirection: 'vertical',\r\n\t\tsnap: false,\r\n\t};\r\n\r\n\tconstructor(...args) {\r\n\t\tlog.debug('Scroller', ...args);\r\n\t\tsuper(...args);\r\n\t\tconst { items, itemSize, initialItemsInView, bufferBefore, bufferAfter } = this.props;\r\n\t\tconst itemsInView = Math.min(initialItemsInView, items.length);\r\n\t\tconst renderedItems = items.slice(0, itemsInView);\r\n\t\tconst sizeItems = itemsInView * itemSize;\r\n\t\tthis.state = {\r\n\t\t\thorizontal: false,\r\n\t\t\trenderedItems,\r\n\t\t\tsizeBefore: 0,\r\n\t\t\tsizeItems,\r\n\t\t\tsizeAfter: (items.length - itemsInView) * itemSize,\r\n\t\t\titemSize,\r\n\t\t\tfirstRenderedItemIndex: 0,\r\n\t\t\tlastRenderedItemIndex: itemsInView - 1,\r\n\t\t\tsize: sizeItems,\r\n\t\t};\r\n\r\n\t\tthis.onScroll = this.onScroll.bind(this);\r\n\t}\r\n\r\n\tgetState(props) {\r\n\t\t// let dir = props.direction;\r\n\t\tconst win = typeof window == 'object' && window;\r\n\t\tconst w = win && window.innerWidth || 767;\r\n\t\tconst horizontal = win && w < 480;\r\n\t\tconst scroller = this.mounted ? ReactDOM.findDOMNode(this) : undefined;\r\n\t\tconst scrollPos = scroller ? getScrollPos(horizontal, scroller) : 0;\r\n\r\n\t\tconst { items, bufferBefore, bufferAfter } = props;\r\n\t\tconst itemSize = horizontal ? w : props.itemSize;\r\n\t\tconst itemsPer = !win ? 1 : (w > 1024 ? 3 : (w > 767 ? 2 : 1));\r\n\t\tconst containerCount = ~~(items.length / itemsPer) + (~~(items.length % itemsPer) ? 1 : 0);\r\n\r\n\t\tconst scrollerSize = scroller ? getSize(horizontal, scroller) : Math.min(initialItemsInView, containerCount) * itemSize;\r\n\t\tconst slider = this.refs.slider;\r\n\t\tconst sliderOffset = scroller ? posDifference(horizontal, slider, scroller) : 0;\r\n\r\n\t\tconst renderedItems = [];\r\n\r\n\t\tconst containersBefore = ~~(scrollPos / itemSize);\r\n\t\tconst bufBefore = Math.min(containersBefore, bufferBefore);\r\n\t\tconst skippedContainers = containersBefore - bufBefore;\r\n\t\tconst skippedItems = skippedContainers * itemsPer;\r\n\t\tconst firstIdx = skippedItems;\r\n\t\tconst containersInView = ~~(scrollerSize / itemSize) + (~~(scrollerSize % itemSize) ? 2 : 1)\r\n\t\tconst lastIdx = Math.min(firstIdx + containersInView * itemsPer + bufferAfter * itemsPer, items.length - 1);\r\n\t\tfor (let i=firstIdx; i<=lastIdx; i++) {\r\n\t\t\tconst item = items[i] || null;\r\n\t\t\trenderedItems.push(item);\r\n\t\t}\r\n\t\tconst renderedContainerCount = ~~(renderedItems.length / itemsPer) + (~~(renderedItems.length % itemsPer) ? 1 : 0);\r\n\t\tconst sizeBefore = ~~(firstIdx / itemsPer) * itemSize;\r\n\t\tconst sizeItems = renderedContainerCount * itemSize;\r\n\t\tconst sizeAfter = containerCount * itemSize - sizeBefore - sizeItems;\r\n\r\n\t\treturn {\r\n\t\t\thorizontal,\r\n\t\t\trenderedItems,\r\n\t\t\tsizeBefore,\r\n\t\t\tsizeItems,\r\n\t\t\tsizeAfter,\r\n\t\t\titemSize,\r\n\t\t\t// scrollPos,\r\n\t\t\tfirstRenderedItemIndex: firstIdx,\r\n\t\t\tlastRenderedItemIndex: lastIdx,\r\n\t\t\tsize: scrollerSize,\r\n\t\t};\r\n\t}\r\n\r\n\tshouldComponentUpdate(nextProps, nextState) {\r\n\t\tlog.debug('shouldComponentUpdate', nextProps, nextState);\r\n\t\tif (this.state.size !== nextState.size) return true;\r\n\t\tif (this.state.sizeBefore !== nextState.sizeBefore) return true;\r\n\t\tif (this.state.sizeAfter !== nextState.sizeAfter) return true;\r\n\t\tif (this.props.items !== nextProps.items) return true;\r\n\t\tif (this.props.state !== nextProps.state) return true;\r\n\t\tif (this.props.items.length !== nextProps.items.length) return true;\r\n\t\tif (!arraysEqual(this.state.renderedItems, nextState.renderedItems)) return true;\r\n\t\tif (!arraysEqual(this.props.items, nextProps.items)) return true;\r\n\t\treturn false;\r\n\t}\r\n\r\n\tcomponentWillReceiveProps(nextProps) {\r\n\t\tlog.debug('componentWillReceiveProps', nextProps);\r\n\t\tthis.setState(this.getState(nextProps));\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tlog.debug('componentDidMount');\r\n\t\tthis.mounted = true;\r\n\t\tthis.onScrollDebounced = window.innerWidth < 480\r\n\t\t\t? debounce(this.onScroll, this.props.scrollDebounce, false)\r\n\t\t\t: this.onScroll;\r\n\t\tthis.setState(this.getState(this.props));\r\n\t\tReactDOM.findDOMNode(this).addEventListener('scroll', this.onScrollDebounced);\r\n\t}\r\n\r\n\tcomponentWillUnmount() {\r\n\t\tlog.debug('componentWillUnmount');\r\n\t\tReactDOM.findDOMNode(this).removeEventListener('scroll', this.onScrollDebounced);\r\n\t\tthis.mounted = false;\r\n\t}\r\n\r\n\tonScroll() {\r\n\t\tlog.trace('onscroll');\r\n\t\tthis.setState(this.getState(this.props));\r\n\t}\r\n\r\n\trender() {\r\n\t\tlog.debug('render', this.props, this.state);\r\n\t\tlet slider={}, before={}, after={}, itm={};\r\n\t\tconst dim = (this.state.horizontal ? 'width' : 'height');\r\n\t\tslider[dim] = this.state.sizeBefore + this.state.sizeItems + this.state.sizeAfter;\r\n\t\tbefore[dim] = this.state.sizeBefore;\r\n\t\titm[dim] = this.state.itemSize;\r\n\t\tafter[dim] = this.state.sizeAfter;\r\n\t\treturn (\r\n\t\t\t<div className=\"Scroller\">\r\n\t\t\t\t<div className=\"ScrollSlider\" ref=\"slider\" style={slider}\r\n\t\t\t\t\t><div className=\"ScrollSpacer ScrollSpacerBefore\" ref=\"spacerBefore\" style={before}></div\r\n\t\t\t\t\t>{this.state.renderedItems.map((item, idx) => {\r\n\t\t\t\t\t\tidx = idx + this.state.firstRenderedItemIndex;\r\n\t\t\t\t\t\tconst key = this.props.keyForItem ? this.props.keyForItem(item, idx) : 'item' + idx;\r\n\t\t\t\t\t\tlet { renderItem } = this.props;\r\n\t\t\t\t\t\tif (item === null) {\r\n\t\t\t\t\t\t\tif (this.props.renderLoadingItem) {renderItem = this.props.renderLoadingItem;}\r\n\t\t\t\t\t\t\telse {item = {};}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// style={itm}\r\n\t\t\t\t\t\treturn(\r\n\t\t\t\t\t\t\t<div className=\"ScrollItem\" key={key} style={itm}>{\r\n\t\t\t\t\t\t\t\trenderItem(item, idx)\r\n\t\t\t\t\t\t\t}</div>\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t})}<div className=\"ScrollSpacer ScrollSpacerAfter\" ref=\"spacerAfter\" style={after}></div\r\n\t\t\t\t></div\r\n\t\t\t></div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nfunction arraysEqual(a, b) {\r\n\tif (!a || !b) return false;\r\n\tif (a.length != b.length) return false;\r\n\tfor (var i = 0, length = a.length; i < length; i++) {\r\n\t\tif (a[i] != b[i]) return false;\r\n\t}\r\n\treturn true;\r\n}\r\n\r\nfunction posFromWindow(horizontal, element) {\r\n\tconst dir = horizontal ? 'Left' : 'Top';\r\n\tif (!element || element === window) return 0;\r\n\treturn element['offset' + dir] + posFromWindow(horizontal, element.offsetParent);\r\n}\r\n\r\nfunction posDifference(horizontal, element, container) {\r\n\treturn posFromWindow(horizontal, element) - posFromWindow(horizontal, container);\r\n}\r\n\r\nfunction getSize(horizontal, element) {\r\n\tconst dir = horizontal ? 'Width' : 'Height';\r\n\treturn typeof element['inner' + dir] != 'undefined' ? element['inner' + dir] : element['client' + dir];\r\n}\r\n\r\nfunction getScrollPos(horizontal, element) {\r\n\tlet res;\r\n\tconst { axis, dir } = horizontal ? {axis:'X', dir:'Left'} : {axis:'Y', dir:'Top'};\r\n\tif (element === window) {\r\n\t\tres = window['page' + axis + 'Offset'];\r\n\t\tif (res == null) res = document.documentElement['scroll' + dir];\r\n\t\tif (res == null) res = document.body['scroll' + dir];\r\n\t}\r\n\telse {\r\n\t\tres = element['scroll' + axis];\r\n\t\tif (res == null) res = element['scroll' + dir];\r\n\t}\r\n\treturn (res == null) ? 0 : res;\r\n}\r\n\r\nfunction debounce(func, wait, immediate) {\r\n\tif (!wait) return func;\r\n\tvar timeout;\r\n\treturn function() {\r\n\t\tvar context = this, args = arguments;\r\n\t\tvar later = function() {\r\n\t\t\ttimeout = null;\r\n\r\n\t\t\tif (!immediate) func.apply(context, args);\r\n\t\t};\r\n\t\tvar callNow = immediate && !timeout;\r\n\t\tclearTimeout(timeout);\r\n\t\ttimeout = setTimeout(later, wait);\r\n\t\tif (callNow) func.apply(context, args);\r\n\t};\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/components/Scroller/Scroller.jsx\n **/","module.exports = require(\"babel-runtime/core-js/object/keys\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"babel-runtime/core-js/object/keys\"\n ** module id = 30\n ** module chunks = 0\n **/","import Entity from '../Entity/Entity';\r\nimport Role from './Role';\r\nimport Group from './Group';\r\nimport PasswordCredential from './PasswordCredential';\r\n\r\nimport Suid from 'ws.suid';\r\n\r\n@Entity\r\nexport class Account {\r\n\tconstructor(id, name, credentials=[], roles=[Role.USER], groups=[]) {\r\n\t\tthis.id = id || 0;\r\n\t\tthis.version = null;\r\n\t\tthis.name = name;\r\n\t\tthis.credentials = credentials;\r\n\t\tthis.roles = roles;\r\n\t\tthis.groups = groups;\r\n\t}\r\n}\r\nexport default Account;\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/components/Auth/Account.jsx\n **/","import log from 'picolog';\r\nimport React, { PropTypes, Component } from 'react';\r\nconst { string, bool, object, func, array, shape } = PropTypes;\r\nimport { Tabs, Tab, Button, DialogTitle, DialogContent, DialogActions } from 'react-mdl';\r\nlog.assert(Button && DialogTitle && DialogContent && DialogActions, 'Not all react-mdl components are defined.');\r\nimport classNames from 'classnames';\r\n\r\nimport { Dialog, Textfield } from '../Mdl/mdl-extras';\r\nlog.assert(Dialog && Textfield, 'Not all react-mdl-extras components are defined.');\r\n\r\nexport class AuthDialog extends Component {\r\n\tstatic propTypes = {\r\n\t\tdefaultClass: string.isRequired,\r\n\t\tclassName: string,\r\n\t\tchallenged: bool,\r\n\t\tloginDialog: object,\r\n\t\tregisterDialog: object,\r\n\t}\r\n\r\n\tstatic defaultProps = {\r\n\t\tdefaultClass: 'AuthDialog',\r\n\t}\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = { activeTab: 0 };\r\n\t}\r\n\r\n\trender() {\r\n\t\tlog.debug('render', this.props);\r\n\t\tconst { className, defaultClass, challenged, onCancel, onLogin, onRegister, loginDialog, registerDialog, ...props } = this.props;\r\n\t\tconst classes = classNames(className, defaultClass);\r\n\t\treturn (\r\n\t\t\t<Dialog modal className={classes} open={challenged} onCancel={onCancel} {...props}>\r\n\t\t\t\t<Tabs activeTab={this.state.activeTab}\r\n\t\t\t\t\tonChange={(activeTab) => {this.setState({...this.state, activeTab})}} ripple>\r\n\t\t\t\t\t<Tab>&nbsp; Login &nbsp;</Tab>\r\n\t\t\t\t\t<Tab>Register</Tab>\r\n\t\t\t\t</Tabs>\r\n\t\t\t\t{ !this.state.activeTab ?\r\n\t\t\t\t\t<DialogContent>\r\n\t\t\t\t\t\t<p><b>Login</b> or <a href=\"#\" onClick={() => this.setState({...this.state, activeTab:1})}>create an account</a>.</p>\r\n\t\t\t\t\t\t<form className=\"LoginForm\">\r\n\t\t\t\t\t\t\t<Textfield name=\"username\" label=\"Username\" floatingLabel {...loginDialog.username} />\r\n\t\t\t\t\t\t\t<Textfield name=\"password\" label=\"Password\" floatingLabel {...loginDialog.password} />\r\n\t\t\t\t\t\t</form>\r\n\t\t\t\t\t</DialogContent>\r\n\t\t\t\t:\r\n\t\t\t\t\t<DialogContent>\r\n\t\t\t\t\t\t<p><b>Create an account</b> or <a href=\"#\" onClick={() => this.setState({...this.state, activeTab:0})}>Login</a>.</p>\r\n\t\t\t\t\t\t<form className=\"RegistrationForm\">\r\n\t\t\t\t\t\t\t<Textfield name=\"username\" label=\"Username\" floatingLabel {...registerDialog.username} />\r\n\t\t\t\t\t\t\t<Textfield name=\"password\" label=\"Password\" floatingLabel {...registerDialog.password} />\r\n\t\t\t\t\t\t\t<Textfield name=\"passwordConfirm\" label=\"Password (confirm)\" floatingLabel {...registerDialog.confirm}/>\r\n\t\t\t\t\t\t</form>\r\n\t\t\t\t\t</DialogContent>\r\n\t\t\t\t}\r\n\t\t\t\t{ !this.state.activeTab ?\r\n\t\t\t\t\t<DialogActions>\r\n\t\t\t\t\t\t<Button raised colored onClick={onLogin}> &nbsp; Login &nbsp; </Button>\r\n\t\t\t\t\t\t<Button onClick={onCancel}>Cancel</Button>\r\n\t\t\t\t\t</DialogActions>\r\n\t\t\t\t:\r\n\t\t\t\t\t<DialogActions>\r\n\t\t\t\t\t\t<Button raised colored onClick={onRegister}>Register</Button>\r\n\t\t\t\t\t\t<Button onClick={onCancel}>Cancel</Button>\r\n\t\t\t\t\t</DialogActions>\r\n\t\t\t\t}\r\n\t\t\t</Dialog>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nexport default AuthDialog;\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/components/Auth/AuthDialog.jsx\n **/","export class Credential {\r\n\tconstructor(id) {\r\n\t\tthis.id = id;\r\n\t}\r\n}\r\n\r\nexport default Credential;\n\n\n/** WEBPACK FOOTER **\n ** ./src/components/Auth/Credential.jsx\n **/","import Entity from '../Entity/Entity';\r\n\r\n@Entity\r\nexport class Group {\r\n\tconstructor(id, name) {\r\n\t\tthis.id = id;\r\n\t\tthis.name = name;\r\n\t}\r\n}\r\nexport default Group;\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/components/Auth/Group.jsx\n **/","import Entity from '../Entity/Entity';\r\n\r\nimport Suid from 'ws.suid';\r\n\r\n@Entity\r\nexport class Brand {}\r\nexport default Brand;\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/components/Brands/Brand.jsx\n **/","import log from 'picolog';\r\nimport Api from 'redux-apis';\r\n\r\nexport class TextfieldApi extends Api {\r\n\tstatic INITIAL_STATE = { value: '' };\r\n\r\n\tstatic SET_VALUE = 'SET_VALUE';\r\n\r\n\tconstructor(state = TextfieldApi.INITIAL_STATE) {\r\n\t\tsuper(state);\r\n\t\tthis.setHandler(TextfieldApi.SET_VALUE, (state, {payload}) => ({...state, value:payload}));\r\n\t\tObject.defineProperties(this, {\r\n\t\t\tvalue: {enumerable:true, get: () => this.getState().value},\r\n\t\t\tonChange: {enumerable:true, value:this.setValue.bind(this)}\r\n\t\t})\r\n\t}\r\n\r\n\tsetValue(value) {\r\n\t\treturn this.dispatch(this.createAction(TextfieldApi.SET_VALUE)(value));\r\n\t}\r\n}\r\n\r\nexport class DrawerApi extends Api {\r\n\tstatic INITIAL_STATE = { open: false };\r\n\r\n\tstatic OPEN = 'OPEN';\r\n\tstatic CLOSE = 'CLOSE';\r\n\r\n\tconstructor(state = DrawerApi.INITIAL_STATE) {\r\n\t\tsuper(state);\r\n\t\tthis.setHandler(DrawerApi.OPEN, (state, action) => ({...state, open:true}));\r\n\t\tthis.setHandler(DrawerApi.CLOSE, (state, action) => ({...state, open:false}));\r\n\t\tObject.defineProperties(this, {\r\n\t\t\topen: {enumerable:true, get:() => this.getState().open},\r\n\t\t\tonCancel: {enumerable:true, value:this.closeDrawer.bind(this)},\r\n\t\t\tonActivate: {enumerable:true, value:this.openDrawer.bind(this)}\r\n\t\t})\r\n\t}\r\n\r\n\topenDrawer() {\r\n\t\tlog.debug('openDrawer');\r\n\t\treturn this.dispatch(this.createAction(DrawerApi.OPEN)());\r\n\t}\r\n\r\n\tcloseDrawer() {\r\n\t\tlog.debug('closeDrawer');\r\n\t\treturn this.dispatch(this.createAction(DrawerApi.CLOSE)());\r\n\t}\r\n}\r\n\r\nexport class LightboxApi extends Api {\r\n\tstatic INITIAL_STATE = {open:false, images:[], index:0};\r\n\r\n\tstatic OPEN = 'OPEN';\r\n\tstatic NEXT = 'NEXT';\r\n\tstatic PREV = 'PREV';\r\n\tstatic NAV = 'NAV';\r\n\tstatic CANCEL = 'CANCEL';\r\n\r\n\tconstructor(state = LightboxApi.INITIAL_STATE) {\r\n\t\tsuper(state);\r\n\t\tthis.setHandler(LightboxApi.OPEN, (state, { payload:{images, index } }) => ({ ...state, open:true, images, index }));\r\n\t\tthis.setHandler(LightboxApi.NEXT, ({ images, index, ...state }) => ({ ...state, images, index: index < images.length - 1 ? index + 1 : index }));\r\n\t\tthis.setHandler(LightboxApi.PREV, ({ index, ...state }) => ({ ...state, index: index > 0 ? index - 1 : index }));\r\n\t\tthis.setHandler(LightboxApi.NAV, ({ index, ...state }, {payload}) => ({ ...state, index:payload }));\r\n\t\tthis.setHandler(LightboxApi.CANCEL, (state, action) => ({ ...state, open:false, images:[], index:0 }));\r\n\t\tObject.defineProperties(this, {\r\n\t\t\topen: {enumerable:true, get:() => this.getState() && this.getState().open},\r\n\t\t\tindex: {enumerable:true, get:() => this.getState() && this.getState().index},\r\n\t\t\timages: {enumerable:true, get:() => this.getState() && this.getState().images},\r\n\t\t\tonOpenLightbox: {enumerable:true, value:this.openLightbox.bind(this)},\r\n\t\t\tonCancel: {enumerable:true, value:this.cancel.bind(this)},\r\n\t\t\tonNext: {enumerable:true, value:this.next.bind(this)},\r\n\t\t\tonPrev: {enumerable:true, value:this.prev.bind(this)},\r\n\t\t\tonNav: {enumerable:true, value:this.nav.bind(this)}\r\n\t\t})\r\n\t}\r\n\r\n\topenLightbox(images = [], index = 0) {\r\n\t\tlog.log('openLightbox', images, index);\r\n\t\treturn this.dispatch(this.createAction(LightboxApi.OPEN)({images, index}));\r\n\t}\r\n\r\n\tnext() {\r\n\t\tlog.log('next');\r\n\t\tthis.dispatch(this.createAction(LightboxApi.NEXT)());\r\n\t}\r\n\r\n\tprev() {\r\n\t\tlog.log('prev');\r\n\t\tthis.dispatch(this.createAction(LightboxApi.PREV)());\r\n\t}\r\n\r\n\tnav(idx) {\r\n\t\tlog.log('nav', idx);\r\n\t\tthis.dispatch(this.createAction(LightboxApi.NAV)(idx));\r\n\t}\r\n\r\n\tcancel() {\r\n\t\tlog.log('cancel');\r\n\t\tthis.dispatch(this.createAction(LightboxApi.CANCEL)());\r\n\t}\r\n}\r\n\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/components/Mdl/api.jsx\n **/","import Entity from '../Entity/Entity';\r\n\r\nimport Suid from 'ws.suid';\r\n\r\n@Entity\r\nexport class Product {}\r\nexport default Product;\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/components/Products/Product.jsx\n **/","import Entity from '../Entity/Entity';\r\n\r\nimport Suid from 'ws.suid';\r\n\r\n@Entity\r\nexport class Store {}\r\nexport default Store;\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/components/Stores/Store.jsx\n **/","module.exports = require(\"babel-runtime/helpers/defineProperty\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"babel-runtime/helpers/defineProperty\"\n ** module id = 39\n ** module chunks = 0\n **/","module.exports = require(\"babel-runtime/helpers/toConsumableArray\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"babel-runtime/helpers/toConsumableArray\"\n ** module id = 40\n ** module chunks = 0\n **/","module.exports = require(\"react-dom\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"react-dom\"\n ** module id = 41\n ** module chunks = 0\n **/","module.exports = require(\"react-dom/server\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"react-dom/server\"\n ** module id = 42\n ** module chunks = 0\n **/","module.exports = require(\"redux-async-api\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"redux-async-api\"\n ** module id = 43\n ** module chunks = 0\n **/","var path = require('path');\r\n\r\nvar buildPath = path.resolve(__dirname);\r\nvar publicPath = path.resolve(__dirname, 'public');\r\nvar testPath = path.resolve(publicPath, 'test');\r\nvar pkg = require('./package.json');\r\n\r\nvar cfg = {\r\n\tversion: pkg.version,\r\n\tpublicPath: publicPath,\r\n\tbuildPath: buildPath,\r\n\tclient: {\r\n\t\tname: 'BridalApp UI Client',\r\n\t\tentry: './src/client',\r\n\t\toutput: {\r\n\t\t\tfilename: 'bridalapp-ui.js',\r\n\t\t\tpath: path.resolve(publicPath, 'assets'),\r\n\t\t\tpublicPath: '/assets/',\r\n\t\t},\r\n\t},\r\n\tserver: {\r\n\t\tname: 'BridalApp UI Server',\r\n\t\tprotocol: 'http://',\r\n\t\tprotocol: process.env.OPENSHIFT_NODEJS_PROTOCOL || 'http://',\r\n\t\thost: process.env.OPENSHIFT_NODEJS_IP || undefined,\r\n\t\tport: process.env.OPENSHIFT_NODEJS_PORT || process.env.PORT || 80,\r\n\t\tpath: process.env.OPENSHIFT_NODEJS_PATH || '/',\r\n\t\tentry: './src/server',\r\n\t\toutput: {\r\n\t\t\tfilename: 'server.js',\r\n\t\t\tpath: '',\r\n\t\t},\r\n\t},\r\n\tapiServer: {\r\n\t\tname: 'BridalApp API Server',\r\n\t\tprotocol: process.env.BRIDALAPP_API_SERVER_PROTOCOL || 'http://',\r\n\t\thost: process.env.BRIDALAPP_API_SERVER_HOST || 'localhost',\r\n\t\tport: process.env.BRIDALAPP_API_SERVER_PORT || 8080,\r\n\t\tpath: process.env.BRIDALAPP_API_SERVER_PATH || '/api',\r\n\t},\r\n\ttests: {\r\n\t\tname: 'BridalApp UI Tests',\r\n\t\tentry: './src/tests',\r\n\t\toutput: {\r\n\t\t\tfilename: 'bridalapp-ui-tests.js',\r\n\t\t\tpath: path.resolve(testPath, 'assets'),\r\n\t\t\tpublicPath: '/test/assets/',\r\n\t\t},\r\n\t}\r\n};\r\n\r\ncfg.server.url = url(cfg.server);\r\ncfg.apiServer.url = url(cfg.apiServer);\r\n\r\nmodule.exports = cfg;\r\n\r\nfunction url(srv) {\r\n\treturn srv.protocol + srv.host + (srv.port == '80' ? '' : ':' + srv.port) + srv.path;\r\n}\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./config.js\n ** module id = 44\n ** module chunks = 0\n **/","import log from 'picolog';\r\nimport React, { Component, PropTypes } from 'react';\r\nconst { bool, number, string, object, func, array, shape, any } = PropTypes;\r\nimport { Link } from 'react-router';\r\nimport { onload } from 'redux-load-api';\r\nimport { connect } from 'react-redux';\r\nimport { Layout, Header, Navigation, Content, Button, Icon } from 'react-mdl';\r\n\r\nimport store from '../../store';\r\nconst app = store.app;\r\nimport { LayoutTitle, Drawer, Lightbox } from '../Mdl/mdl-extras';\r\nimport AuthDialog from '../Auth/AuthDialog';\r\n\r\n@connect(app.connector)\r\nexport class App extends Component {\r\n\tstatic propTypes = {\r\n\t\tauth: shape({\r\n\t\t\tloggedIn: bool.isRequired,\r\n\t\t\tchallenged: bool.isRequired,\r\n\t\t\tonProvoke: func,\r\n\t\t\tonLogin: func,\r\n\t\t\tonLogout: func,\r\n\t\t\tonRegister: func,\r\n\t\t\tonCancel: func,\r\n\t\t\tuser: shape({\r\n\t\t\t\tid: any.isRequired,\r\n\t\t\t\tname: string.isRequired,\r\n\t\t\t}),\r\n\t\t}).isRequired,\r\n\t\tleftDrawer: object,\r\n\t\trightDrawer: object,\r\n\t\tlightbox: object,\r\n\t};\r\n\r\n\tstatic childContextTypes = {\r\n\t\tauth: shape({\r\n\t\t\tloggedIn: bool.isRequired,\r\n\t\t\tchallenged: bool.isRequired,\r\n\t\t\tonProvoke: func,\r\n\t\t\tonLogin: func,\r\n\t\t\tonLogout: func,\r\n\t\t\tonRegister: func,\r\n\t\t\tonCancel: func,\r\n\t\t\tuser: shape({\r\n\t\t\t\tid: any.isRequired,\r\n\t\t\t\tname: string.isRequired,\r\n\t\t\t}),\r\n\t\t}).isRequired,\r\n\t\tlightbox: object,\r\n\t}\r\n\r\n\tconstructor(props) {\r\n\t\tlog.debug('constructor', props);\r\n\t\tsuper(props);\r\n\t}\r\n\r\n\tgetChildContext() {\r\n\t\tconst { auth, lightbox } = this.props;\r\n\t\treturn { auth, lightbox };\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tlog.debug('componentDidMount');\r\n//\t\tapp.auth.loadUser();\r\n\t}\r\n\r\n\trender() {\r\n\t\tlog.debug('render', this.props);\r\n\t\tconst { auth, leftDrawer, rightDrawer, lightbox, children } = this.props;\r\n\t\treturn (\r\n\t\t\t<div className=\"mdl-layout mdl-layout--fixed-header\"><div className=\"mdl-layout__inner-container\">\r\n\t\t\t\t<header className=\"AppBar mdl-layout__header is-casting-shadow\">\r\n\t\t\t\t\t<div tabIndex=\"0\" className=\"mdl-layout__drawer-button\" onClick={leftDrawer.onActivate}>\r\n\t\t\t\t\t\t<i className=\"material-icons\">menu</i>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div className=\"mdl-layout__header-row\">\r\n\t\t\t\t\t\t<img className=\"logo\" src=\"https://cdn.rawgit.com/download/bridalapp-static/1.0.0/bridalapp/logo-bridalapp.png\" />\r\n\r\n\t\t\t\t\t\t<div className=\"mdl-layout-spacer\"></div>\r\n\r\n\t\t\t\t\t\t{false ? <Navigation className=\"ActionBar\">\r\n\t\t\t\t\t\t\t<p style={{color:'black'}} onClick={()=>{\r\n\t\t\t\t\t\t\t}}>{auth.loggedIn && auth.session.user.name || 'anon'}</p>\r\n\t\t\t\t\t\t</Navigation> : undefined}\r\n\r\n\t\t\t\t\t\t<Navigation className=\"RightDrawer\">\r\n\t\t\t\t\t\t\t{!rightDrawer.open ? (\r\n\t\t\t\t\t\t\t\t<Icon name=\"account_circle\" onClick={rightDrawer.onActivate} />\r\n\t\t\t\t\t\t\t) : <i></i>}\r\n\t\t\t\t\t\t</Navigation>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</header>\r\n\r\n\t\t\t\t<Drawer\tmodal autoClose {...leftDrawer}>\r\n\t\t\t\t\t<LayoutTitle>\r\n\t\t\t\t\t\t<img className=\"logo\" src=\"https://cdn.rawgit.com/download/bridalapp-static/1.0.0/bridalapp/logo-bridalapp.png\" />\r\n\t\t\t\t\t</LayoutTitle>\r\n\t\t\t\t\t<Navigation>\r\n\t\t\t\t\t\t<Link to=\"/Wedding+Dresses\">Wedding Dresses</Link>\r\n\t\t\t\t\t\t<Link to=\"/stores\">Bridal Stores</Link>\r\n\t\t\t\t\t\t<Link to=\"/brands\">Bridal Brands</Link>\r\n\t\t\t\t\t</Navigation>\r\n\t\t\t\t</Drawer>\r\n\r\n\t\t\t\t<Drawer right modal autoClose {...rightDrawer}>\r\n\t\t\t\t\t<LayoutTitle className={auth.loggedIn ? 'logged-in' : ''}>{auth.loggedIn ?\r\n\t\t\t\t\t\t<h4>\r\n\t\t\t\t\t\t\t<p>Logged in</p>\r\n\t\t\t\t\t\t\t<Button colored onClick={auth.onLogout}>Logout</Button>\r\n\t\t\t\t\t\t\t<Icon name=\"account_circle\" /><b title={auth.session.user.name}>{auth.session.user.name}</b>\r\n\t\t\t\t\t\t</h4>\r\n\t\t\t\t\t\t:\r\n\t\t\t\t\t\t<h4>\r\n\t\t\t\t\t\t\t<p>Not logged in</p>\r\n\t\t\t\t\t\t\t<Button colored raised onClick={auth.onProvoke}>Login</Button>\r\n\t\t\t\t\t\t</h4>\r\n\t\t\t\t\t}</LayoutTitle>\r\n\t\t\t\t\t{auth.loggedIn ? <Navigation>\r\n\t\t\t\t\t\t<Link to=\"/loved/Wedding+Dresses\"><Icon name=\"favorite\" /> My Favorites</Link>\r\n\t\t\t\t\t</Navigation> : ''}\r\n\t\t\t\t</Drawer>\r\n\r\n\t\t\t\t<Content className=\"main\">\r\n\t\t\t\t\t{children}\r\n\t\t\t\t</Content>\r\n\r\n\t\t\t\t<AuthDialog {...auth} />\r\n\r\n\t\t\t\t<Lightbox noNextOnClick noImageCount {...lightbox} />\r\n\t\t\t</div></div>\r\n\t\t);\r\n/*\t\t\t<Layout fixedHeader>\r\n\t\t\t\t<LoginDialog open={!!auth.challenge} api={api.auth}/>\r\n\t\t\t\t<Header className=\"AppBar\" title=\"Title\">\r\n\t\t\t\t\t<img className=\"logo\" src=\"https://cdn.rawgit.com/download/bridalapp-static/1.0.0/bridalapp/logo-bridalapp.png\" />\r\n\t\t\t\t\t<Navigation className=\"ActionBar\">\r\n\t\t\t\t\t\t<p>this.props.appbar</p>\r\n\t\t\t\t\t</Navigation>\r\n\t\t\t\t\t<Navigation className=\"RightDrawer\">\r\n\t\t\t\t\t\t{!rightDrawer.open ? (\r\n\t\t\t\t\t\t\t<i className=\"material-icons\" onClick={()=>api.rightDrawer.open()}>account_circle</i>\r\n\t\t\t\t\t\t) : ''}\r\n\t\t\t\t\t</Navigation>\r\n\t\t\t\t</Header>\r\n\t\t\t\t<Drawer api={api.leftDrawer} onClose={()=>api.leftDrawer.close()} open={leftDrawer.open}>\r\n\t\t\t\t\t<LayoutTitle><h2>Title</h2></LayoutTitle>\r\n\t\t\t\t\t<Navigation>\r\n\t\t\t\t\t\t<Link to=\"/\">Home</Link>\r\n\t\t\t\t\t\t<Link to=\"/products\">Products</Link>\r\n\t\t\t\t\t\t<Link to=\"/stores\">Stores</Link>\r\n\t\t\t\t\t\t<Link to=\"/brands\">Brands</Link>\r\n\t\t\t\t\t</Navigation>\r\n\t\t\t\t</Drawer>\r\n\t\t\t\t<Drawer align=\"right\" onClose={()=>api.rightDrawer.close()} open={rightDrawer.open}>\r\n\t\t\t\t\t<LayoutTitle>{auth.loggedIn ?\r\n\t\t\t\t\t\t<h2>{auth.session.user.name}</h2>\r\n\t\t\t\t\t\t:\r\n\t\t\t\t\t\t<Button onClick={() => {\r\n\t\t\t\t\t\t\tapi.rightDrawer.close();\r\n\t\t\t\t\t\t\tapi.auth.challenge('/challenge')\r\n\t\t\t\t\t\t}}>Login</Button>\r\n\t\t\t\t\t}</LayoutTitle>\r\n\t\t\t\t\t<Navigation>\r\n\t\t\t\t\t\t<Link to=\"/\">Home</Link>\r\n\t\t\t\t\t\t<Link to=\"/products\">Products</Link>\r\n\t\t\t\t\t\t<Link to=\"/stores\">Stores</Link>\r\n\t\t\t\t\t\t<Link to=\"/brands\">Brands</Link>\r\n\t\t\t\t\t</Navigation>\r\n\t\t\t\t</Drawer>\r\n\t\t\t\t<Content className=\"main\">\r\n\t\t\t\t\t<div>{children}</div>\r\n\t\t\t\t</Content>\r\n\t\t\t</Layout>\r\n\r\n\t\t);\r\n*/\r\n\t}\r\n}\r\n\r\nexport default App;\n\n\n/** WEBPACK FOOTER **\n ** ./src/components/App/App.jsx\n **/","import log from 'picolog';\r\nimport Api, { link } from 'redux-apis';\r\nimport { remote, endpoint, fetcher } from 'redux-fetch-api';\r\nimport Suid from 'ws.suid';\r\n\r\nimport { AuthApi } from '../Auth';\r\nimport { Brand } from '../Brands/Brand';\r\nimport { BrandsApi }   from '../Brands/api';\r\nimport { Product } from '../Products/Product';\r\nimport { ProductsApi } from '../Products/api';\r\nimport { Store } from '../Stores/Store';\r\nimport { StoresApi } from '../Stores/api';\r\nimport { DrawerApi, LightboxApi } from '../Mdl/api';\r\n\r\nconst API_URL = apiUrl();\r\nlog.info('Using BridalApp API Server url: ', API_URL);\r\nlet idx, lastSlash = 0;\r\nwhile ((idx = API_URL.indexOf('/', lastSlash + 1)) !== -1) {lastSlash = idx;}\r\nconst SUID_URL = API_URL.substring(0, lastSlash) + '/suid/suid.json';\r\nlog.info('Using Suid Server url: ', SUID_URL);\r\nSuid.config({server: SUID_URL});\r\n\r\n// override the default fetcher with one that does a cross-origin (CORS) request and has a timeout\r\n@fetcher(authenticatedCrossOriginFetchWithTimeout)\r\n@remote(API_URL)\r\nexport class AppApi extends Api {\r\n\r\n\tconstructor(state) {\r\n\t\tsuper(state);\r\n\r\n\t\tObject.defineProperties(this, {\r\n\t\t\tBrand: {enumerable:true, get:() => Brand},\r\n\t\t\tProduct: {enumerable:true, get:() => Product},\r\n\t\t\tStore: {enumerable:true, get:() => Store},\r\n\t\t});\r\n\r\n\t\tthis.auth = remote('/auth')(\r\n\t\t\tlink(this, new AuthApi())\r\n\t\t);\r\n\r\n\t\tthis.brands = remote('/brands')(\r\n\t\t\tlink(this, new BrandsApi())\r\n\t\t);\r\n\r\n\t\tthis.products = remote('/products')(\r\n\t\t\tlink(this, new ProductsApi())\r\n\t\t);\r\n\r\n\t\tthis.stores = remote('/stores')(\r\n\t\t\tlink(this, new StoresApi())\r\n\t\t);\r\n\r\n\t\tthis.leftDrawer = link(this, new DrawerApi());\r\n\t\tthis.rightDrawer = link(this, new DrawerApi());\r\n\t\tthis.lightbox = link(this, new LightboxApi());\r\n\t}\r\n\r\n\tauthenticated() {\r\n\t\tlog.debug('authenticated');\r\n\t\treturn this.auth.authenticated();\r\n\t}\r\n\r\n\tgetSession() {\r\n\t\treturn this.auth.session;\r\n\t}\r\n}\r\n\r\n// A version of fetch that sets cors headers and intercepts 401 Unauthorized responses.\r\n// J2EE servers will, after a succesful login, send a 302 redirect with the original url.\r\n// This function capitalizes on that to do transparent interception\r\nfunction authenticatedCrossOriginFetchWithTimeout(url, opts) {\r\n\tlog.log('authenticatedCrossOriginFetchWithTimeout', url);\r\n\topts = {credentials:'include', mode:'cors', ...opts};\r\n\r\n\tif (typeof global == 'object' && global.session) {\r\n\t\topts.headers = opts.headers || {};\r\n\t\topts.headers['Cookie'] = 'JSESSIONID=' + global.session;\r\n\t}\r\n\tconst result = new Promise((resolve, reject)=>{\r\n\t\tconst timeout = setTimeout(() => {reject(Error(`timed out after 30s.`))}, 30000);\r\n\t\tfetch(url, opts)\r\n\t\t\t.then(response => {\r\n\t\t\t\tclearTimeout(timeout);\r\n\t\t\t\tif (response.status && response.status === 401) {\r\n\t\t\t\t\t// auth needed\r\n\t\t\t\t\tif (typeof window == 'object') {\r\n\t\t\t\t\t\t// client, allow user to login\r\n\t\t\t\t\t\treturn response.json()\r\n\t\t\t\t\t\t\t.then(json => this.auth.challenge(json.challenge, resolve, reject))\r\n\t\t\t\t\t\t\t.catch(reject);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// server, reject with error\r\n\t\t\t\t\treturn response.text().then(text => {\r\n\t\t\t\t\t\tconst error = Error(text);\r\n\t\t\t\t\t\terror.status = response.status;\r\n\t\t\t\t\t\terror.statusText = response.statusText;\r\n\t\t\t\t\t\treject(error);\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t\tresolve(response);\r\n\t\t\t})\r\n\t\t\t.catch(reject);\r\n\t});\r\n\treturn result;\r\n}\r\n\r\nfunction apiUrl() {\r\n\tif (typeof window == 'object') {\r\n\t\treturn window.__bridalapp_api_server || 'http://api.bridalapp.net/api';\r\n\t}\r\n\tconst protocol = process.env.BRIDALAPP_API_SERVER_PROTOCOL || 'http://';\r\n\tconst host = process.env.BRIDALAPP_API_SERVER_HOST || 'localhost';\r\n\tconst port = process.env.BRIDALAPP_API_SERVER_PORT || '8080';\r\n\tconst path = process.env.BRIDALAPP_API_SERVER_PATH || '/api';\r\n\treturn protocol + host + (port == '80' ? '' : ':' + port) + path;\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/components/App/api.jsx\n **/","export AuthApi from './api';\r\nexport AuthDialog from './AuthDialog';\r\nexport Role from './Role';\r\nexport Group from './Group';\r\nexport Account from './Account';\r\nexport Credential from './Credential';\r\nexport PasswordCredential from './PasswordCredential';\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/components/Auth/index.jsx\n **/","import log from 'picolog';\r\nimport React, { Component, PropTypes } from 'react';\r\nconst { bool, object, array, func, any } = PropTypes;\r\nimport { connect } from 'react-redux';\r\nimport { onload } from 'redux-load-api';\r\n\r\nimport store from '../../store';\r\nconst app = store.app;\r\nimport Role from '../Auth/Role';\r\nimport Scroller from '../Scroller/Scroller';\r\nimport Card, { Front, Back } from '../Card/Card';\r\nimport BrandCard from './BrandCard'\r\n\r\nfunction load(params) {\r\n\tlog.log('load', params);\r\n\tparams && app.brands.setFilter(params);\r\n\treturn app.brands.search()\r\n\t\t.then(results => {\r\n\t\t\tlog.log('load: search returned ' + results.length + ' brands.');\r\n\t\t\treturn results;\r\n\t\t})\r\n\t\t.catch((error) => {\r\n\t\t\tlog.error('Searching brands failed.', error);\r\n\t\t\treturn error;\r\n\t\t});\r\n}\r\n\r\n@onload(load)\r\n@connect(app.brands.connector)\r\nexport class BrandBrowser extends React.Component {\r\n\tstatic propTypes = {\r\n\t\tparams: object.isRequired,\r\n\t\tfilter: object.isRequired,\r\n\t\titems: array.isRequired,\r\n\t\tpending: bool.isRequired,\r\n\t\terror: any,\r\n\t\tonFilterChange: func.isRequired,\r\n\t\tonSearch: func.isRequired,\r\n\t\tonItemsChange: func.isRequired,\r\n\t\tonMayPublish: func.isRequired,\r\n\t\tonPublish: func.isRequired,\r\n\t\tonUnpublish: func.isRequired,\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tlog.debug('componentDidMount()');\r\n\t\tconst { pending, error, params } = this.props;\r\n\t\tif (pending || error) {load(params);}\r\n\t}\r\n\r\n\trender() {\r\n\t\tlog.debug('render', this.props);\r\n\t\tconst { items, onMayPublish, onPublish, onUnpublish } = this.props;\r\n\t\treturn (\r\n\t\t\t<Scroller\r\n\t\t\t\tclassName={'BrandBrowser '}\r\n\t\t\t\tbufferBefore={2}\r\n\t\t\t\titems={items}\r\n\t\t\t\tbufferAfter={4}\r\n\t\t\t\trenderItem ={ (item, idx) => (\r\n\t\t\t\t\t<BrandCard brand={item}\r\n\t\t\t\t\t\tonMayPublish={onMayPublish}\r\n\t\t\t\t\t\tonPublish={onPublish}\r\n\t\t\t\t\t\tonUnpublish={onUnpublish}\r\n\t\t\t\t\t/>\r\n\t\t\t\t)}\r\n\t\t\t/>\r\n\t\t);\r\n\t}\r\n}\r\nexport default BrandBrowser;\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/components/Brands/BrandBrowser.jsx\n **/","import log from 'picolog';\r\nimport React, { Component, PropTypes } from 'react';\r\nconst { any, bool, string, object, func, shape } = PropTypes;\r\nimport classNames from 'classnames';\r\nimport Suid from 'ws.suid';\r\nimport { CardTitle, FABButton, Icon } from 'react-mdl';\r\nimport { StatefulFlipCard, FrontFace, BackFace } from '../Mdl/mdl-extras';\r\nimport { Publication } from '../Publication/Publication';\r\n\r\nexport class BrandCard extends Publication {\r\n\tstatic propTypes = {\r\n\t\tbrand: shape({\r\n\t\t\tid: any,\r\n\t\t\tname: string,\r\n\t\t}).isRequired,\r\n\t}\r\n\r\n\tstatic contextTypes = {\r\n\t\tlightbox: shape({\r\n\t\t\tonOpenLightbox: func.isRequired,\r\n\t\t}).isRequired,\r\n\t}\r\n\r\n\tconstructor(...props) {\r\n\t\tsuper(...props);\r\n\t\tthis.state = {size: {height:'100%'}};\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis.setState({size: window.innerWidth < 480 ? {width:'100%'} : {height:'100%'}});\r\n\t}\r\n\r\n\tthumbnailClicked(images, index, event) {\r\n\t\tconst { lightbox: { onOpenLightbox } } = this.context;\r\n\t\tonOpenLightbox(images, index, event);\r\n\t\tif (event) {event.preventDefault(); event.stopPropagation();}\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst { brand } = this.props;\r\n\t\tconst { id, name, published } = brand;\r\n\t\tconst { size } = this.state;\r\n\t\tconst bid = id.toString();\r\n\t\tconst img = 'data:image/gif;base64,R0lGODlhAgADAIAAAP///////yH5BAEKAAEALAAAAAACAAMAAAICjF8AOw==';\r\n\t\tconst prdUrl = `https://cdn.rawgit.com/Download/bridalapp-static/1.0.8/products/${bid}/Brand`;\r\n\t\tconst brandUrl = `https://cdn.rawgit.com/Download/bridalapp-static/1.0.8/brands/${bid}/logo-brand-name.png`;\r\n\t\tconst thumbs = `${prdUrl}/thumbs.jpg`;\r\n\t\tconst thumbnail = 'data:image/gif;base64,R0lGODlhAgADAIAAAP///////yH5BAEKAAEALAAAAAACAAMAAAICjF8AOw==';\r\n\t\tconst images = [\r\n\t\t\t{src: `${prdUrl}/back-large.jpg`, className:'back', alt:{src:img, style:{...size, backgroundImage:`url(${thumbs})`, backgroundSize:'300%', backgroundPosition:'100% 0'}}},\r\n\t\t\t{src: `${prdUrl}/front-large.jpg`, className:'front', alt:{src:img, style:{...size, backgroundImage:`url(${thumbs})`, backgroundSize:'150%', backgroundPosition:'0 0'}}},\r\n\t\t\t{src: `${prdUrl}/detail-1-large.jpg`, className:'detail-1', alt:{src:img, style:{...size, backgroundImage:`url(${thumbs})`, backgroundSize:'600%', backgroundPosition:'200% 200%'}}},\r\n\t\t\t{src: `${prdUrl}/detail-2-large.jpg`, className:'detail-2', alt:{src:img, style:{...size, backgroundImage:`url(${thumbs})`, backgroundSize:'600%', backgroundPosition:'100% 200%'}}},\r\n\t\t\t{src: `${prdUrl}/detail-3-large.jpg`, className:'detail-3', alt:{src:img, style:{...size, backgroundImage:`url(${thumbs})`, backgroundSize:'600%', backgroundPosition:'200% 100%'}}},\r\n\t\t];\r\n\t\tconst classes = classNames('Product', {'unpublished':!published});\r\n\r\n\t\treturn (\r\n\t\t\t<StatefulFlipCard className={classes} key={bid}>\r\n\t\t\t\t<FrontFace>\r\n\t\t\t\t\t<div className=\"content\">\r\n\t\t\t\t\t\t<img className=\"ProductImage\" src={img} style={{backgroundImage: `url(${thumbs})`, height:'100%'}} />\r\n\t\t\t\t\t\t{this.mayPublish(brand) ?\r\n\t\t\t\t\t\t\t<div className=\"ModActions\">\r\n\t\t\t\t\t\t\t{published ?\r\n\t\t\t\t\t\t\t\t<FABButton className=\"Unpublish\" onClick={this.unpublishClicked.bind(this, brand)}><Icon name=\"visibility_off\" /></FABButton>\r\n\t\t\t\t\t\t\t:\r\n\t\t\t\t\t\t\t\t<FABButton className=\"Publish\" onClick={this.publishClicked.bind(this, brand)}><Icon name=\"visibility\" /></FABButton>\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t: ''}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</FrontFace>\r\n\t\t\t\t<BackFace>\r\n\t\t\t\t\t<CardTitle>\r\n\t\t\t\t\t\t<img className=\"BrandLogo\" src={brandUrl} />\r\n\t\t\t\t\t\t<h3 className=\"ProductName\">{name}</h3>\r\n\t\t\t\t\t</CardTitle>\r\n\t\t\t\t\t<div className=\"ProductGallery\">\r\n\t\t\t\t\t\t<div className=\"thumbs\">{images.map(({src, className}, i) => (\r\n\t\t\t\t\t\t\t<img key={i} className={classNames(className, 'thumb')}\r\n\t\t\t\t\t\t\t\t\tsrc={thumbnail} onClick={this.thumbnailClicked.bind(this, images, i)}\r\n\t\t\t\t\t\t\t\t\tstyle={{backgroundImage:`url(${thumbs})`}}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t))}</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</BackFace>\r\n\t\t\t</StatefulFlipCard>\r\n\t\t);\r\n\t}\r\n}\r\nexport default BrandCard;\n\n\n/** WEBPACK FOOTER **\n ** ./src/components/Brands/BrandCard.jsx\n **/","import React, { Component } from 'react';\r\n\r\nexport default class Brands extends Component {\r\n\trender() {\r\n\t\tconst { children, ...others } = this.props;\r\n\t\treturn <div className=\"Brands\" {...others}>{children}</div>\r\n\t}\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/components/Brands/Brands.jsx\n **/","import log from 'picolog';\r\nimport { Api, link } from 'redux-apis';\r\nimport { remote } from 'redux-fetch-api';\r\n\r\nimport PublicationApi from '../Publication/api';\r\nimport Brand from './Brand';\r\n\r\n@remote\r\nexport class BrandsApi extends PublicationApi {\r\n\tstatic INITIAL_STATE = {\r\n\t\t...PublicationApi.INITIAL_STATE,\r\n\t}\r\n\tconstructor(state = BrandsApi.INITIAL_STATE) {\r\n\t\tsuper(state);\r\n\t}\r\n}\r\nexport default BrandsApi;\n\n\n/** WEBPACK FOOTER **\n ** ./src/components/Brands/api.jsx\n **/","import log from 'picolog';\r\nimport React, { Component, PropTypes } from 'react';\r\nconst { string, node, bool } = PropTypes;\r\nimport classNames from 'classnames';\r\n\r\nfunction simpleComponent(defaultClass) {\r\n\tconst result = (props) => {\r\n\t\tconst { className, defaultClass, children, ...otherProps } = props;\r\n\t\tconst classes = classNames(className, defaultClass);\r\n\t\treturn <div className={classes} {...otherProps}>{children}</div>;\r\n\t}\r\n\tresult.propTypes = {\r\n\t\tclassName: string,\r\n\t\tdefaultClass: string.isRequired,\r\n\t\tchildren: node,\r\n\t};\r\n\r\n\tresult.defaultProps = {\r\n\t\tdefaultClass: defaultClass,\r\n\t};\r\n\r\n\treturn result;\r\n}\r\n\r\nexport const CardTitle = simpleComponent('mdl-card__title');\r\nexport const SubtitleText = simpleComponent('mdl-card__subtitle-text');\r\nexport const CardMedia = simpleComponent('mdl-card__media');\r\nexport const SupportingText = simpleComponent('mdl-card__supporting-text');\r\nexport const CardActions = simpleComponent('mdl-card__actions');\r\nexport const CardFace = simpleComponent('mdl-card__face');\r\nexport const Front = simpleComponent(CardFace.defaultProps.defaultClass + ' mdl-card__front');\r\nexport const Back = simpleComponent(CardFace.defaultProps.defaultClass + ' mdl-card__back');\r\n\r\nexport class Card extends Component {\r\n\tstatic propTypes = {\r\n\t\tclassName: string,\r\n\t\tcardClass: string,\r\n\t\tshadowClass: string,\r\n\t\tflippedClass: string,\r\n\t\tflipped: bool,\r\n\t\tchildren: node,\r\n\t};\r\n\r\n\tstatic defaultProps = {\r\n\t\tcardClass: 'mdl-card',\r\n\t\tshadowClass: 'mdl-shadow--2dp',\r\n\t\tflippedClass: 'is-flipped',\r\n\t\tflipped: false,\r\n\t};\r\n\r\n\trender() {\r\n\t\tconst { className, cardClass, shadowClass, flippedClass, flipped, children, ...others } = this.props;\r\n\t\tconst classes = classNames(className, cardClass, shadowClass, {[flippedClass]: flipped});\r\n\t\treturn (<div className={classes} {...others}>{children}</div>);\r\n\t}\r\n}\r\nexport default Card;\r\n\r\nexport class FlipCard extends Component {\r\n\tstatic propTypes = {\r\n\t\tflipped: bool.isRequired,\r\n\t\ttrigger: string.isRequired,\r\n\t};\r\n\r\n\tstatic defaultProps = {\r\n\t\tflipped: false,\r\n\t\ttrigger: 'onClick',\r\n\t};\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = this.getState(props);\r\n\t\tthis.flip = this.flip.bind(this);\r\n\t}\r\n\r\n\tgetState(props) {\r\n\t\treturn {flipped: this.state && this.state.flipped || props && props.flipped };\r\n\t}\r\n\r\n\tcomponentWillReceiveProps(nextProps) {\r\n\t\tthis.setState(this.getState(nextProps));\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis.setState(this.getState(this.props));\r\n\t}\r\n\r\n\tisFlipped() {\r\n\t\treturn this.state && this.state.flipped;\r\n\t}\r\n\r\n\tflip() {\r\n\t\tlog.debug('Card.flip():', !this.getState().flipped);\r\n\t\tthis.setState({ ...this.state, flipped:!this.isFlipped()});\r\n\t}\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/components/Card/Card.jsx\n **/","import log from 'picolog';\r\nimport { Api, link } from 'redux-apis';\r\nimport { Async } from 'redux-async-api';\r\nimport { remote } from 'redux-fetch-api';\r\n\r\nimport { fromJSON, toJSON, indexOf } from '../Entity/Entity';\r\n\r\n@remote\r\nexport class EntityApi extends Async {\r\n\tstatic INITIAL_STATE = {\r\n\t\t...Async.INITIAL_STATE,\r\n\t\tfilter: {},\r\n\t\titems: [],\r\n\t\titemStates: {}\r\n\t}\r\n\r\n\tstatic SET_FILTER = 'SET_FILTER';\r\n\tstatic SET_ITEMS = 'SET_ITEMS';\r\n\tstatic SET_ITEM_STATES = 'SET_ITEM_STATES';\r\n\r\n\tconstructor(state = EntityApi.INITIAL_STATE) {\r\n\t\tsuper(state);\r\n\t\tthis.setHandler(EntityApi.SET_FILTER, (state, action) => ({...state, filter: action.payload}));\r\n\t\tthis.setHandler(EntityApi.SET_ITEMS, (state, action) => ({...state, items: action.payload}));\r\n\t\tthis.setHandler(EntityApi.SET_PROCESSING, (state, action) => ({...state, processing: action.payload}));\r\n\t\tObject.defineProperties(this, {\r\n\t\t\tfilter: {enumerable:true, get:() => this.getState().filter},\r\n\t\t\titems: {enumerable:true, get:() => this.getState().items},\r\n\t\t\titemStates: {enumerable:true, get:() => this.getState().itemStates}\r\n\t\t})\r\n\r\n\t\tthis.onFilterChange = this.setFilter.bind(this);\r\n\t\tthis.onSearch = this.search.bind(this);\r\n\t\tthis.onItemsChange = this.setItems.bind(this);\r\n\t\tthis.onItemStatesChange = this.setItemStates.bind(this);\r\n\r\n\t\tthis.item = {\r\n\t\t\titemState: this.itemState.bind(this),\r\n\t\t\tonItemStateChange: this.setItemState.bind(this),\r\n\t\t\tonItemSave: this.save.bind(this),\r\n\t\t}\r\n\t}\r\n\r\n\titemState(item) {\r\n\t\treturn this.items[item.id] || Async.DONE;\r\n\t}\r\n\r\n\tsetItemState(item, newState) {\r\n\t\tconst newStates = { ...this.itemStates };\r\n\t\tif (newState != DONE) {newStates[item.id] = newState;}\r\n\t\telse {delete newStates[item.id];}\r\n\t\tthis.setItemStates(newStates);\r\n\t\treturn this;\r\n\t}\r\n\r\n\tsave(item) {\r\n\t\tlog.log('save', item);\r\n\t\tlet result = Promise.resolve(item);\r\n\t\tif (this.itemState(item) !== Async.BUSY) {\r\n\t\t\tthis.itemState(item, Async.BUSY);\r\n\t\t\tresult = this.fetch('', {\r\n\t\t\t\tmethod: 'POST',\r\n\t\t\t\theaders: {\r\n\t\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t\t},\r\n\t\t\t\tbody: toJSON(item),\r\n\t\t\t})\r\n\t\t\t.then(response => {\r\n\t\t\t\tif (response && response.status == 200) {\r\n\t\t\t\t\treturn response.text();\r\n\t\t\t\t}\r\n\t\t\t\treturn response.text().then(text => {\r\n\t\t\t\t\tconst error = Error(text);\r\n\t\t\t\t\terror.status = response.status;\r\n\t\t\t\t\terror.statusText = response.statusText;\r\n\t\t\t\t\tthrow error;\r\n\t\t\t\t});\r\n\t\t\t})\r\n\t\t\t.then(text => {\r\n\t\t\t\tthis.itemState(item, Async.DONE);\r\n\t\t\t\treturn fromJSON(text);\r\n\t\t\t})\r\n\t\t\t.catch(error => {\r\n\t\t\t\tthis.itemState(item, error);\r\n\t\t\t\tthrow error;\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn result;\r\n\t}\r\n\r\n\tsetFilter(filter) {\r\n\t\tlog.debug('setFilter', filter);\r\n\t\treturn this.dispatch(this.createAction(EntityApi.SET_FILTER)(filter));\r\n\t}\r\n\r\n\tsetItems(items) {\r\n\t\tlog.debug('setItems', items);\r\n\t\tthis.dispatch(this.createAction(EntityApi.SET_ITEMS)(items));\r\n\t}\r\n\r\n\tsetItemStates(itemStates) {\r\n\t\tlog.debug('setItemStates', itemStates);\r\n\t\tthis.dispatch(this.createAction(EntityApi.SET_ITEM_STATES)(itemStates));\r\n\t}\r\n\r\n\r\n\tsearchUrl(filter) {\r\n\t\tconst keys = Object.keys(filter);\r\n\t\tlet result = '';\r\n\t\tfor (let i=0,key; key=keys[i]; i++) {\r\n\t\t\tresult += result ? '&' : '?';\r\n\t\t\tresult += encodeURIComponent(key) + '=' + encodeURIComponent(filter[key]);\r\n\t\t}\r\n\t\treturn result;\r\n\t}\r\n\r\n\tsearch() {\r\n\t\tconst url = this.searchUrl(this.filter);\r\n\t\tlog.log('search', url);\r\n\t\tthis.setBusy();\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tthis.fetch(url)\r\n\t\t\t\t.then(response => response && response.status === 200\r\n\t\t\t\t\t? response.text()\r\n\t\t\t\t\t: new Promise((ok, err) => {\r\n\t\t\t\t\t\tresponse.text().then(text => {\r\n\t\t\t\t\t\t\tconst error = Error(text);\r\n\t\t\t\t\t\t\terror.message = text;\r\n\t\t\t\t\t\t\terror.status = response.status;\r\n\t\t\t\t\t\t\terror.statusText = response.statusText;\r\n\t\t\t\t\t\t\terr(error);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t})\r\n\t\t\t\t)\r\n\t\t\t\t.then(text => fromJSON(text))\r\n\t\t\t\t.then(json => {\r\n\t\t\t\t\tlog.debug('search: OK got ' + json.length + ' results');\r\n\t\t\t\t\tthis.setItems(json);\r\n\t\t\t\t\tthis.setDone();\r\n\t\t\t\t\treturn json;\r\n\t\t\t\t})\r\n\t\t\t\t.then(resolve)\r\n\t\t\t\t.catch(error => {\r\n\t\t\t\t\tlog.info('search: error=', error);\r\n\t\t\t\t\tthis.setError(error);\r\n\t\t\t\t\treject(error);\r\n\t\t\t\t});\r\n\t\t});\r\n\t}\r\n}\r\nexport default EntityApi;\r\n\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/components/Entity/api.jsx\n **/","import React, { PropTypes } from 'react';\r\n\r\nexport default class Home extends React.Component {\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className=\"Home\">\r\n\t\t\t\t<h1>BRIDAL APP</h1>\r\n\t\t\t\tAllrighty :) thenn\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/components/Home/Home.jsx\n **/","import log from 'picolog';\r\nimport React, {Component, PropTypes} from 'react';\r\nconst { string, object } = PropTypes;\r\nimport ReactDOM from 'react-dom/server';\r\nimport serialize from 'serialize-javascript';\r\n// import DocumentMeta from 'react-document-meta';\r\nimport { RouterContext } from 'react-router';\r\nimport { Provider } from 'react-redux';\r\n\r\n/**\r\n * Wrapper component containing HTML metadata and boilerplate tags.\r\n * Used in server-side code only to wrap the string output of the\r\n * rendered route component.\r\n *\r\n * The only thing this component doesn't (and can't) include is the\r\n * HTML doctype declaration, which is added to the rendered output\r\n * by the server.jsx file.\r\n */\r\nexport class Html extends Component {\r\n\tstatic propTypes = {\r\n\t\tstore: object.isRequired,\r\n\t\tlang: string,\r\n\t\tversion: string,\r\n\t\tapiUrl: string,\r\n\t};\r\n\r\n\tstatic defaultProps = {\r\n\t\tlang: 'en-US',\r\n\t\tversion: '1.0.0',\r\n\t\tapiUrl: '',\r\n\t};\r\n\r\n\trender() {\r\n\t\tconst { store, lang, version, apiUrl, ...renderProps } = this.props;\r\n\t\tconst content = ReactDOM.renderToString(\r\n\t\t\t<Provider store={store}>\r\n\t\t\t\t<RouterContext {...renderProps} />\r\n\t\t\t</Provider>\r\n\t\t);\r\n\t\tconst html = (apiUrl ? `window.__bridalapp_api_server='${apiUrl}';` : '')\r\n\t\t\t\t+ `window.__data=${serialize(store.getState())};`;\r\n\r\n\t\treturn (\r\n\t\t\t<html lang={this.props.lang}>\r\n\t\t\t\t<head>\r\n\t\t\t\t\t<meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\r\n\t\t\t\t\t{/* DocumentMeta.renderAsReact() */}\r\n\t\t\t\t\t<link rel=\"shortcut icon\" href=\"/favicon.ico\" />\r\n\t\t\t\t\t<link rel=\"stylesheet\" href=\"https://cdn.rawgit.com/tleunen/react-mdl/v1.4.0/extra/material.min.css\" />\r\n\t\t\t\t\t<link rel=\"stylesheet\" href=\"https://fonts.googleapis.com/icon?family=Material+Icons\" />\r\n\t\t\t\t\t<link rel=\"stylesheet\" href={'/style.css?v' + version} />\r\n\t\t\t\t</head>\r\n\t\t\t\t<body>\r\n\t\t\t\t\t<div id=\"bridalapp\" dangerouslySetInnerHTML={{__html: content}} />\r\n\t\t\t\t\t{process.env.NODE_ENV == 'production' ?\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<script src=\"https://cdnjs.cloudflare.com/ajax/libs/fetch/0.11.0/fetch.min.js\" />\r\n\t\t\t\t\t\t<script src=\"https://cdnjs.cloudflare.com/ajax/libs/react/0.14.7/react.min.js\" />\r\n\t\t\t\t\t\t<script src=\"https://cdnjs.cloudflare.com/ajax/libs/react/0.14.7/react-dom.min.js\" />\r\n\t\t\t\t\t\t<script src=\"https://cdnjs.cloudflare.com/ajax/libs/react-router/2.0.0-rc5/ReactRouter.min.js\" />\r\n\t\t\t\t\t\t<script src=\"https://cdn.rawgit.com/tleunen/react-mdl/v1.4.2/extra/material.min.js\" />\r\n\t\t\t\t\t\t<script src=\"https://npmcdn.com/react-mdl@1.4.2/out/ReactMDL.min.js\" />\r\n\t\t\t\t\t</div>\t:\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<script src=\"https://cdnjs.cloudflare.com/ajax/libs/fetch/0.11.0/fetch.js\" />\r\n\t\t\t\t\t\t<script src=\"https://cdnjs.cloudflare.com/ajax/libs/react/0.14.7/react.js\" />\r\n\t\t\t\t\t\t<script src=\"https://cdnjs.cloudflare.com/ajax/libs/react/0.14.7/react-dom.js\" />\r\n\t\t\t\t\t\t<script src=\"https://cdnjs.cloudflare.com/ajax/libs/react-router/2.0.0-rc5/ReactRouter.js\" />\r\n\t\t\t\t\t\t<script src=\"https://cdn.rawgit.com/tleunen/react-mdl/v1.4.2/extra/material.min.js\" />\r\n\t\t\t\t\t\t<script src=\"https://npmcdn.com/react-mdl@1.4.2/out/ReactMDL.min.js\" />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t}\r\n\t\t\t\t\t<script dangerouslySetInnerHTML={{__html: html}} charSet=\"UTF-8\"/>\r\n\r\n\t\t\t\t\t{this.props.children}\r\n\r\n\t\t\t\t\t<script src={'/assets/bridalapp-ui.js?v' + version} charSet=\"UTF-8\" />\r\n\t\t\t\t</body>\r\n\t\t\t</html>\r\n\t\t);\r\n\t}\r\n}\r\nexport default Html;\r\n\r\n\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/components/Html/Html.jsx\n **/","import log from 'picolog';\r\nimport React, { Component, PropTypes } from 'react';\r\nconst { bool, array, object, func, shape, any } = PropTypes;\r\nimport { connect } from 'react-redux';\r\nimport { onload } from 'redux-load-api';\r\n\r\nimport { fromJSON, toJSON, indexOf } from '../Entity/Entity';\r\nimport store from '../../store';\r\nconst app = store.app;\r\nimport Scroller from '../Scroller/Scroller';\r\nimport ProductCard from './ProductCard';\r\n\r\nconst ANIMATION_TIME = 510;\r\n\r\nfunction load(params) {\r\n\tlog.log('load', params);\r\n\tapp.products.setFilter({...params});\r\n\treturn app.products.search()\r\n\t\t.then((results) => {\r\n\t\t\tlog.debug('load: search returned ' + results.length + ' products.');\r\n\t\t\treturn results;\r\n\t\t})\r\n\t\t.catch((error) => {\r\n\t\t\tlog.error('Searching products failed.', error);\r\n\t\t\treturn error;\r\n\t\t});\r\n}\r\n\r\n@onload(load)\r\n@connect(app.products.connector)\r\nexport default class ProductBrowser extends React.Component {\r\n\tstatic propTypes = {\r\n\t\tparams: object.isRequired,\r\n\t\tlocation: shape({\r\n\t\t\tquery: object,\r\n\t\t}).isRequired,\r\n\t\tfilter: object.isRequired,\r\n\t\titems: array.isRequired,\r\n\t\tpending: bool.isRequired,\r\n\t\terror: any,\r\n\t\tonFilterChange: func.isRequired,\r\n\t\tonSearch: func.isRequired,\r\n\t\tonItemsChange: func.isRequired,\r\n\t\titem: shape({\r\n\t\t\tonMayPublish: func.isRequired,\r\n\t\t\tonPublish: func.isRequired,\r\n\t\t\tonUnpublish: func.isRequired,\r\n\t\t\tonLove: func.isRequired,\r\n\t\t\tonDislike: func.isRequired,\r\n\t\t\tonUndoRating: func.isRequired,\r\n\t\t}).isRequired,\r\n\t}\r\n\r\n\tconstructor(...args) {\r\n\t\tsuper(...args);\r\n\t\tthis.state = { removing:{} };\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tlog.debug('componentDidMount()');\r\n\t\tconst { params, location: { query }, pending, error } = this.props;\r\n\t\tif (pending || error) {load({...query, ...params});}\r\n\t}\r\n\r\n\tcomponentWillReceiveProps(nextProps) {\r\n\t\tlog.debug('componentWillReceiveProps', nextProps);\r\n\t\tif (nextProps.location.pathname !== this.props.location.pathname || nextProps.pending || nextProps.error) {\r\n\t\t\tthis.setState({ removing:{} });\r\n\t\t\tload({...nextProps.location.query, ...nextProps.params});\r\n\t\t}\r\n\t}\r\n\r\n\tdislike(product) {\r\n\t\tlog.log('dislike', product);\r\n\t\tconst pid = product.id.toString();\r\n\t\tif (app.auth.loggedIn) {\r\n\t\t\tconst removing = { ...this.state.removing };\r\n\t\t\tremoving[pid] = 'disliked';\r\n\t\t\tthis.setState({ ...this.state, removing });\r\n\t\t}\r\n\t\tconst timer = new Promise(resolve => setTimeout(()=>resolve(), ANIMATION_TIME));\r\n\t\treturn Promise.all([timer, this.props.item.onDislike(product)])\r\n\t\t\t.then(() => {\r\n\t\t\t\tconst { items, onItemsChange } = this.props, idx = indexOf(items, product);\r\n\t\t\t\tif (idx >= 0) {\r\n\t\t\t\t\tonItemsChange(items.slice(0, idx).concat(items.slice(idx + 1)));\r\n\t\t\t\t}\r\n\t\t\t\tconst removing = { ...this.state.removing };\r\n\t\t\t\tdelete removing[pid];\r\n\t\t\t\tthis.setState({...this.state, removing});\r\n\t\t\t})\r\n\t}\r\n\r\n\tlove(product) {\r\n\t\tlog.log('love', product);\r\n\t\tconst pid = product.id.toString();\r\n\t\tif (app.auth.loggedIn) {\r\n\t\t\tconst removing = { ...this.state.removing };\r\n\t\t\tremoving[pid] = 'loved';\r\n\t\t\tthis.setState({ ...this.state, removing });\r\n\t\t}\r\n\t\tconst timer = new Promise(resolve => setTimeout(()=>resolve(), ANIMATION_TIME));\r\n\t\treturn Promise.all([timer, this.props.item.onLove(product)])\r\n\t\t\t.then(() => {\r\n\t\t\t\tconst { items, onItemsChange } = this.props, idx = indexOf(items, product);\r\n\t\t\t\tif (idx >= 0) {\r\n\t\t\t\t\tonItemsChange(items.slice(0, idx).concat(items.slice(idx + 1)));\r\n\t\t\t\t}\r\n\t\t\t\tconst removing = { ...this.state.removing };\r\n\t\t\t\tdelete removing[pid];\r\n\t\t\t\tthis.setState({...this.state, removing});\r\n\t\t\t})\r\n\t}\r\n\r\n\tundoRating(product) {\r\n\t\tlog.log('undoRating', product);\r\n\t\tconst pid = product.id.toString();\r\n\t\tif (app.auth.loggedIn) {\r\n\t\t\tconst removing = { ...this.state.removing };\r\n\t\t\tremoving[pid] = 'undoRating';\r\n\t\t\tthis.setState({ ...this.state, removing });\r\n\t\t}\r\n\t\tconst timer = new Promise(resolve => setTimeout(()=>resolve(), ANIMATION_TIME));\r\n\t\treturn Promise.all([timer, this.props.item.onUndoRating(product)])\r\n\t\t\t.then(() => {\r\n\t\t\t\tconst { items, onItemsChange } = this.props, idx = indexOf(items, product);\r\n\t\t\t\tif (idx >= 0) {\r\n\t\t\t\t\tonItemsChange(items.slice(0, idx).concat(items.slice(idx + 1)));\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t}\r\n\r\n\trender() {\r\n\t\tlog.debug('render', this.props, this.state);\r\n\t\tconst { filter, items } = this.props;\r\n\t\tconst item = { ...this.props.item,\r\n\t\t\tonDislike: this.dislike.bind(this),\r\n\t\t\tonLove: this.love.bind(this),\r\n\t\t\tonUndoRating: this.undoRating.bind(this),\r\n\t\t}\r\n\t\treturn (\r\n\t\t\t<Scroller\r\n\t\t\t\tclassName={'ProductBrowser ' + filter.category}\r\n\t\t\t\tbufferBefore={4}\r\n\t\t\t\titems={items}\r\n\t\t\t\titemSize={580}\r\n\t\t\t\tbufferAfter={16}\r\n\t\t\t\trenderItem ={(product, idx) => {\r\n\t\t\t\t\tconst pid = product.id.toString();\r\n//\t\t\t\t\tconst cls = this.state.removing[pid] ? 'removing' : '';\r\n//\t\t\t\t\tlog.info('className=', cls, ', pid=', pid, ', removing=', this.state.removing);\r\n\t\t\t\t\treturn (idx < 10 ?\r\n\t\t\t\t\t\t<ProductCard removing={this.state.removing[pid]}\r\n//\t\t\t\t\t\t\tclassName={cls}\r\n\t\t\t\t\t\t\tproduct={product} rating={filter.rating} {...item} frontLoadDelay={0} />\r\n\t\t\t\t\t:\r\n\t\t\t\t\t\t<ProductCard removing={this.state.removing[pid]}\r\n//\t\t\t\t\t\t\tclassName={cls}\r\n\t\t\t\t\t\t\tproduct={product} rating={filter.rating} {...item}  />\r\n\t\t\t\t\t)\r\n\t\t\t\t}}\r\n\t\t\t\tstate={this.state.removing}\r\n\t\t\t/>\r\n\t\t);\r\n\t}\r\n}\r\n\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/components/Products/ProductBrowser.jsx\n **/","import log from 'picolog';\r\nimport React, { Component, PropTypes } from 'react';\r\nconst { any, bool, string, object, func, shape } = PropTypes;\r\nimport classNames from 'classnames';\r\nimport Suid from 'ws.suid';\r\nimport { CardTitle, CardText, Button, FABButton, Icon } from 'react-mdl';\r\nimport { StatefulFlipCard, FrontFace, BackFace, Sprite } from '../Mdl/mdl-extras';\r\nimport Publication from '../Publication/Publication';\r\n\r\nexport class ProductCard extends Publication {\r\n\tstatic propTypes = {\r\n\t\tclassName: string,\r\n\t\tproduct: shape({\r\n\t\t\tid: any,\r\n\t\t\tname: string,\r\n\t\t\tbrandId: any,\r\n\t\t\tbrandName: string,\r\n\t\t\tdescription: string,\r\n\t\t\tpublished: bool,\r\n\t\t}).isRequired,\r\n\t\trating: string,\r\n\t\tonLove: func.isRequired,\r\n\t\tonDislike: func.isRequired,\r\n\t\tonUndoRating: func.isRequired,\r\n\t\tremoving: string\r\n\t}\r\n\r\n\tstatic defaultProps = {\r\n\t\tremoving: '',\r\n\t}\r\n\r\n\tstatic contextTypes = {\r\n\t\tlightbox: shape({\r\n\t\t\tonOpenLightbox: func.isRequired,\r\n\t\t}).isRequired,\r\n\t}\r\n\r\n\tconstructor(...props) {\r\n\t\tsuper(...props);\r\n\t\tthis.state = {size: {height:'100%'}};\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis.setState(...this.state, {size: window.innerWidth < 480 ? {width:'100%'} : {height:'100%'}});\r\n\t}\r\n\r\n\tcomponentWillReceiveProps(nextProps) {\r\n\t\tif (typeof window == 'object' && nextProps.removing) {\r\n\t\t\tconst node = ReactDOM.findDOMNode(this);\r\n\t\t\tconst newState = {...this.state, rect:node.getBoundingClientRect(), win:window.innerWidth};\r\n\t\t\tthis.setState(newState);\r\n\t\t\tlog.debug('componentWillReceiveProps: state=', this.state, ', newState=', newState);\r\n\t\t}\r\n\t}\r\n\r\n\tthumbnailClicked(images, index, event) {\r\n\t\tlog.log('thumbnailClicked', images, index, event);\r\n\t\tconst { lightbox: { onOpenLightbox } } = this.context;\r\n\t\tif (event) {event.preventDefault(); event.stopPropagation();}\r\n\t\tonOpenLightbox(images, index, event);\r\n\t}\r\n\r\n\tdislikeClicked(product, event) {\r\n\t\tlog.log('dislikeClicked', product, event);\r\n\t\tif (event) {event.preventDefault(); event.stopPropagation();}\r\n\t\treturn this.props.onDislike(product);\r\n\t}\r\n\r\n\tloveClicked(product, event) {\r\n\t\tlog.log('loveClicked', product, event);\r\n\t\tif (event) {event.preventDefault(); event.stopPropagation();}\r\n\t\treturn this.props.onLove(product);\r\n\t}\r\n\r\n\tundoRatingClicked(product, event) {\r\n\t\tlog.log('undoRatingClicked', product, event);\r\n\t\tif (event) {event.preventDefault(); event.stopPropagation();}\r\n\t\treturn this.props.onUndoRating(product);\r\n\t}\r\n\r\n\trender() {\r\n\t\tlog.debug('render', this.props);\r\n\t\tconst { className, product, rating, onLove, onDislike, onUndoRating, removing, ...others } = this.props;\r\n\t\tconst { id, name, brandId, brandName, description, published } = product;\r\n\t\tconst { size, rect, win } = this.state;\r\n\t\tconst pid = Suid(id).toString();\r\n\t\tconst bid = Suid(brandId).toString();\r\n\t\tconst { flipCard } = this.refs;\r\n\t\tconst img = 'data:image/gif;base64,R0lGODlhAgADAIAAAP///////yH5BAEKAAEALAAAAAACAAMAAAICjF8AOw==';\r\n\t\tconst prdUrl = `https://cdn.rawgit.com/Download/bridalapp-static/1.0.8/products/${bid}/${encodeURIComponent(name)}`;\r\n\t\tconst brandUrl = `https://cdn.rawgit.com/Download/bridalapp-static/1.0.8/brands/${bid}/logo-brand-name.png`;\r\n\t\tconst thumbs = `${prdUrl}/thumbs.jpg`;\r\n\t\tconst thumbnail = 'data:image/gif;base64,R0lGODlhAgADAIAAAP///////yH5BAEKAAEALAAAAAACAAMAAAICjF8AOw==';\r\n\t\tconst images = [\r\n\t\t\t{src: `${prdUrl}/back-large.jpg`, className:'back', alt:{src:img, style:{...size, backgroundImage:`url(${thumbs})`, backgroundSize:'300%', backgroundPosition:'100% 0'}}},\r\n\t\t\t{src: `${prdUrl}/front-large.jpg`, className:'front', alt:{src:img, style:{...size, backgroundImage:`url(${thumbs})`, backgroundSize:'150%', backgroundPosition:'0 0'}}},\r\n\t\t\t{src: `${prdUrl}/detail-1-large.jpg`, className:'detail-1', alt:{src:img, style:{...size, backgroundImage:`url(${thumbs})`, backgroundSize:'600%', backgroundPosition:'200% 200%'}}},\r\n\t\t\t{src: `${prdUrl}/detail-2-large.jpg`, className:'detail-2', alt:{src:img, style:{...size, backgroundImage:`url(${thumbs})`, backgroundSize:'600%', backgroundPosition:'100% 200%'}}},\r\n\t\t\t{src: `${prdUrl}/detail-3-large.jpg`, className:'detail-3', alt:{src:img, style:{...size, backgroundImage:`url(${thumbs})`, backgroundSize:'600%', backgroundPosition:'200% 100%'}}},\r\n\t\t];\r\n\t\tconst classes = classNames('Product', className, {'unpublished':!published, 'removing':removing,\r\n\t\t\t\t'loved':removing === 'loved', 'disliked':removing === 'disliked'});\r\n\t\tconst width = rect ? rect.right - rect.left : 0;\r\n\t\tconst height = rect ? rect.bottom - rect.top : 0;\r\n\t\tconst trans = (removing === 'disliked' || removing === 'undoRating')\r\n\t\t\t? 0 - rect.left - width : (removing === 'loved' ? win - rect.left : '');\r\n\t\tconst transform = `translate3d(${trans}px, 0, 10px) scale3d(0.2, 0.2, 0.2)`\r\n\t\tconst style = removing ? {width:width, height:height, transform:transform, WebkitTransform:transform} : {};\r\n\t\treturn (\r\n\t\t\t<StatefulFlipCard className={classes} key={id} style={style}>\r\n\t\t\t\t<FrontFace>\r\n\t\t\t\t\t<div className=\"content\">\r\n\t\t\t\t\t\t<img className=\"ProductImage\" src={img} style={{backgroundImage: `url(${thumbs})`, height:'100%'}} />\r\n\r\n\t\t\t\t\t\t{!rating ?\r\n\t\t\t\t\t\t\t<div className=\"RatingActions\">\r\n\t\t\t\t\t\t\t\t<FABButton colored className=\"Rate disliked danger\" onClick={this.dislikeClicked.bind(this, product)}><Sprite name=\"broken-heart\" /></FABButton>\r\n\t\t\t\t\t\t\t\t<FABButton colored className=\"Rate loved\" onClick={this.loveClicked.bind(this, product)}><Icon name=\"favorite\" /></FABButton>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t:\r\n\t\t\t\t\t\t\t<div className=\"RatingActions\">\r\n\t\t\t\t\t\t\t\t<Button onClick={this.undoRatingClicked.bind(this, product)}>\r\n\t\t\t\t\t\t\t\t\t{rating == 'disliked' ?\r\n\t\t\t\t\t\t\t\t\t\t<Sprite name=\"broken-heart\" />\r\n\t\t\t\t\t\t\t\t\t:\r\n\t\t\t\t\t\t\t\t\t\t<Icon name=\"favorite\" />\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tundo\r\n\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t{this.mayPublish(product) ?\r\n\t\t\t\t\t\t\t<div className=\"ModActions\">\r\n\t\t\t\t\t\t\t{published ?\r\n\t\t\t\t\t\t\t\t<FABButton className=\"Unpublish\" onClick={this.unpublishClicked.bind(this, product)}><Icon name=\"visibility_off\" /></FABButton>\r\n\t\t\t\t\t\t\t:\r\n\t\t\t\t\t\t\t\t<FABButton className=\"Publish\" onClick={this.publishClicked.bind(this, product)}><Icon name=\"visibility\" /></FABButton>\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t: ''}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</FrontFace>\r\n\t\t\t\t<BackFace>\r\n\t\t\t\t\t<CardTitle>\r\n\t\t\t\t\t\t<img className=\"BrandLogo\" src={brandUrl} />\r\n\t\t\t\t\t\t<h3 className=\"ProductName\">{name || 'Loading...'}</h3>\r\n\t\t\t\t\t</CardTitle>\r\n\t\t\t\t\t<div className=\"ProductGallery\">\r\n\t\t\t\t\t\t<div className=\"thumbs\">{images.map(({src, className}, i) => (\r\n\t\t\t\t\t\t\t<img key={i} className={classNames(className, 'thumb')}\r\n\t\t\t\t\t\t\t\t\tsrc={thumbnail} onClick={this.thumbnailClicked.bind(this, images, i)}\r\n\t\t\t\t\t\t\t\t\tstyle={{backgroundImage:`url(${thumbs})`}}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t))}</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<CardText className=\"ProductDescription\">{description || ''}</CardText>\r\n\t\t\t\t</BackFace>\r\n\t\t\t</StatefulFlipCard>\r\n\t\t);\r\n\t}\r\n}\r\nexport default ProductCard;\n\n\n/** WEBPACK FOOTER **\n ** ./src/components/Products/ProductCard.jsx\n **/","import React from 'react';\r\n\r\nexport default class ProductDetails extends React.Component {\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className=\"ProductDetails\">\r\n\t\t\t\t{this.props.children}\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/components/Products/ProductDetails.jsx\n **/","import React from 'react';\r\n\r\nexport default class ProductEdit extends React.Component {\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className=\"ProductEdit\" style={{height:'100%', width:'100%', boxSizing:'border-box'}}>\r\n\t\t\t\t{this.props.children}\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/components/Products/ProductEdit.jsx\n **/","import React, { Component } from 'react';\r\n\r\nexport default class Products extends Component {\r\n\trender() {\r\n\t\tconst { children, ...others } = this.props;\r\n\t\treturn <div className=\"Products\" {...others} >{children}</div>\r\n\t}\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/components/Products/Products.jsx\n **/","import Entity from '../Entity/Entity';\r\n\r\nimport Suid from 'ws.suid';\r\n\r\n@Entity\r\nexport class Rating {}\r\nexport default Rating;\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/components/Products/Rating.jsx\n **/","import log from 'picolog';\r\nimport { link } from 'redux-apis';\r\nimport { remote } from 'redux-fetch-api';\r\nimport Suid from 'ws.suid';\r\n\r\nimport { fromJSON, toJSON, indexOf } from '../Entity/Entity';\r\nimport { authenticated } from '../Auth/api';\r\nimport { PublicationApi } from '../Publication/api';\r\nimport Product from './Product';\r\nimport Rating from './Rating';\r\n\r\n@remote\r\nexport class ProductsApi extends PublicationApi {\r\n\tconstructor(state) {\r\n\t\tsuper(state);\r\n\t\tthis.item.onLove = this.love.bind(this);\r\n\t\tthis.item.onDislike = this.dislike.bind(this);\r\n\t\tthis.item.onUndoRating = this.undoRating.bind(this);\r\n\t}\r\n\r\n\tsearchUrl(filter) {\r\n\t\tconst result = filter.category ? `/${filter.category}` : '';\r\n\t\tconst clone = { ...filter };\r\n\t\tdelete clone.category;\r\n\t\treturn result + super.searchUrl(clone);\r\n\t}\r\n\r\n\trate(product, rating) {\r\n\t\tlog.log('rate', product, rating);\r\n\t\treturn this.fetch('/ratings', {\r\n\t\t\tmethod: 'POST',\r\n\t\t\theaders: {\r\n\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t},\r\n\t\t\tbody: toJSON(rating),\r\n\t\t})\r\n\t\t.then(response => {\r\n\t\t\tif (response && response.status == 200) {\r\n\t\t\t\treturn response.text();\r\n\t\t\t}\r\n\t\t\treturn response.text().then(text => {\r\n\t\t\t\tconst error = Error(text);\r\n\t\t\t\terror.status = response.status;\r\n\t\t\t\terror.statusText = response.statusText;\r\n\t\t\t\tthrow error;\r\n\t\t\t});\r\n\t\t})\r\n\t\t.then(text => fromJSON(text))\r\n\t\t.catch(error => {\r\n\t\t\tlog.error('Unable to create rating for product ' + product.id.toString() + ' ' + product.name + ' by ' + product.brandName + '.', error);\r\n\t\t});\r\n\t}\r\n\r\n\tunrate(product) {\r\n\t\tlog.log('unrate', product);\r\n\t\treturn this.fetch('/ratings', {\r\n\t\t\tmethod: 'DELETE',\r\n\t\t\theaders: {\r\n\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t},\r\n\t\t\tbody: toJSON(product),\r\n\t\t})\r\n\t\t.then(response => {\r\n\t\t\tif (response && response.status == 200) {\r\n\t\t\t\treturn response.text();\r\n\t\t\t}\r\n\t\t\treturn response.text().then(text => {\r\n\t\t\t\tconst error = Error(text);\r\n\t\t\t\terror.status = response.status;\r\n\t\t\t\terror.statusText = response.statusText;\r\n\t\t\t\tthrow error;\r\n\t\t\t});\r\n\t\t})\r\n\t\t.then(text => fromJSON(text))\r\n\t\t.catch(error => {\r\n\t\t\tlog.error('Unable to delete rating for product ' + product.id.toString() + ' ' + product.name + ' by ' + product.brandName + '.', error);\r\n\t\t});\r\n\t}\r\n\r\n\tlove(product) {\r\n\t\tlog.log('love', product);\r\n\t\treturn this.authenticated().then(session => {\r\n\t\t\tlog.debug('authenticated', session);\r\n\t\t\tconst rating = {id: Suid.next(), productId:product.id, accountId:session.user.id, score:'loved'};\r\n\t\t\treturn this.rate(product, new Rating(rating));\r\n\t\t})\r\n\t\t.catch(error => log.log('authentication failed.', error));\r\n\t}\r\n\r\n\tdislike(product) {\r\n\t\tlog.log('dislike', product);\r\n\t\treturn this.authenticated().then(session =>\r\n\t\t\tthis.rate(product, new Rating({id: Suid.next(), productId:product.id, accountId:session.user.id, score:'disliked'}))\r\n\t\t)\r\n\t}\r\n\r\n\tundoRating(product) {\r\n\t\tlog.log('undoRating', product);\r\n\t\treturn this.unrate(product);\r\n\t}\r\n}\r\nexport default ProductsApi;\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/components/Products/api.jsx\n **/","import log from 'picolog';\r\nimport React, { Component, PropTypes } from 'react';\r\nconst { bool, object, func, array, any } = PropTypes;\r\nimport { connect } from 'react-redux';\r\nimport { onload } from 'redux-load-api';\r\n\r\nimport store from '../../store';\r\nconst app = store.app;\r\nimport Scroller from '../Scroller/Scroller';\r\nimport StoreCard from './StoreCard'\r\n\r\nfunction load(params) {\r\n\tlog.log('load', params);\r\n\tparams && app.stores.setFilter(params);\r\n\treturn app.stores.search()\r\n\t\t.then(results => {\r\n\t\t\tlog.log('load: search returned ' + results.length + ' stores.');\r\n\t\t\treturn results;\r\n\t\t})\r\n\t\t.catch((error) => {\r\n\t\t\tlog.error('Searching stores failed.', error);\r\n\t\t\treturn error;\r\n\t\t});\r\n}\r\n\r\n@onload(load)\r\n@connect(app.stores.connector)\r\nexport default class StoreBrowser extends React.Component {\r\n\tstatic propTypes = {\r\n\t\tparams: object.isRequired,\r\n\t\tfilter: object.isRequired,\r\n\t\titems: array.isRequired,\r\n\t\tpending: bool.isRequired,\r\n\t\terror: any,\r\n\t\tonFilterChange: func.isRequired,\r\n\t\tonSearch: func.isRequired,\r\n\t\tonItemsChange: func.isRequired,\r\n\t\tonMayPublish: func.isRequired,\r\n\t\tonPublish: func.isRequired,\r\n\t\tonUnpublish: func.isRequired,\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tlog.debug('componentDidMount()');\r\n\t\tconst { pending, error, params } = this.props;\r\n\t\tif (pending || error) {load(params);}\r\n\t}\r\n\r\n\trender() {\r\n\t\tlog.debug('render', this.props);\r\n\t\tconst { items, onMayPublish, onPublish, onUnpublish } = this.props;\r\n\t\treturn (\r\n\t\t\t<Scroller\r\n\t\t\t\tclassName=\"StoreBrowser\"\r\n\t\t\t\tbufferBefore={4}\r\n\t\t\t\titems={items}\r\n\t\t\t\tbufferAfter={8}\r\n\t\t\t\trenderItem ={ (item, idx) => (\r\n\t\t\t\t\t<StoreCard store={item}\r\n\t\t\t\t\t\tonMayPublish={onMayPublish}\r\n\t\t\t\t\t\tonPublish={onPublish}\r\n\t\t\t\t\t\tonUnpublish={onUnpublish}\r\n\t\t\t\t\t/>\r\n\t\t\t\t)}\r\n\t\t\t/>\r\n\t\t);\r\n\t}\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/components/Stores/StoreBrowser.jsx\n **/","import log from 'picolog';\r\nimport React, { Component, PropTypes } from 'react';\r\nconst { any, bool, string, object, func, shape } = PropTypes;\r\nimport classNames from 'classnames';\r\nimport { CardTitle, CardText, FABButton, Icon } from 'react-mdl';\r\nimport Suid from 'ws.suid';\r\nimport { StatefulFlipCard, FrontFace, BackFace } from '../Mdl/mdl-extras';\r\nimport Publication from '../Publication/Publication';\r\n\r\nexport class StoreCard extends Publication {\r\n\tstatic propTypes = {\r\n\t\tstore: shape({\r\n\t\t\tid: any,\r\n\t\t\tname: string,\r\n\t\t\tdescription: string,\r\n\t\t\taddress1: string,\r\n\t\t\taddress2: string,\r\n\t\t\tpostalCode: string,\r\n\t\t\tcity: string,\r\n\t\t\tstate: string,\r\n\t\t\tcountryCode: string,\r\n\t\t\ttelephone: string,\r\n\t\t\twebsite: string,\r\n\t\t\temail: string,\r\n\t\t\tpremium: bool.isRequired,\r\n\t\t}).isRequired,\r\n\t}\r\n\r\n\tstatic contextTypes = {\r\n\t\tauth: shape({\r\n\t\t\tuser: object,\r\n\t\t}).isRequired,\r\n\t}\r\n\r\n\tconstructor(...props) {\r\n\t\tsuper(...props);\r\n\t\tthis.state = {logoMissing:false, thumbMissing:false};\r\n\t}\r\n\r\n\trender() {\r\n\t\tlog.debug('render', this.props);\r\n\t\tconst { store } = this.props;\r\n\t\tconst { id, name, description, address1, address2, postalCode, city, state, countryCode, telephone, website, premium, published } = store;\r\n\t\tconst sid = Suid(id).toString();\r\n\t\tconst logo = `https://cdn.rawgit.com/Download/bridalapp-static/1.0.8/stores/${sid}/logo.png`;\r\n\t\tconst thumb = `https://cdn.rawgit.com/Download/bridalapp-static/1.0.8/stores/${sid}/thumb.jpg`;\r\n\t\tconst classes = classNames('Store', {'premium':premium, 'unpublished':!published});\r\n\t\treturn (\r\n\t\t\t<StatefulFlipCard className={classes} key={sid}>\r\n\t\t\t\t<FrontFace>\r\n\t\t\t\t\t<CardTitle>\r\n\t\t\t\t\t\t{this.state.logoMissing ?\r\n\t\t\t\t\t\t\t<h3 className=\"StoreLogoAlt\">{name}</h3>\r\n\t\t\t\t\t\t:\r\n\t\t\t\t\t\t\t<img className=\"StoreLogo\" src={logo}\r\n\t\t\t\t\t\t\t\tonError={()=>this.setState({...this.state, logoMissing:true})} />\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</CardTitle>\r\n\t\t\t\t\t<div className=\"mdl-card__content\">\r\n\t\t\t\t\t\t{this.state.thumbMissing ?\r\n\t\t\t\t\t\t\t<div className=\"StoreThumbAlt\"></div>\r\n\t\t\t\t\t\t:\r\n\t\t\t\t\t\t\t<img className=\"StoreThumb\" src={thumb}\r\n\t\t\t\t\t\t\t\tonError={()=>this.setState({...this.state, thumbMissing:true})} />\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t<CardText className=\"StoreDescription\">\r\n\t\t\t\t\t\t\t{description}\r\n\t\t\t\t\t\t</CardText>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t{this.mayPublish(store) ?\r\n\t\t\t\t\t\t<div className=\"ModActions\">\r\n\t\t\t\t\t\t{published ?\r\n\t\t\t\t\t\t\t<FABButton className=\"Unpublish\" onClick={this.unpublishClicked.bind(this, store)}><Icon name=\"visibility_off\" /></FABButton>\r\n\t\t\t\t\t\t:\r\n\t\t\t\t\t\t\t<FABButton className=\"Publish\" onClick={this.publishClicked.bind(this, store)}><Icon name=\"visibility\" /></FABButton>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t: ''}\r\n\t\t\t\t</FrontFace>\r\n\t\t\t\t<BackFace>\r\n\t\t\t\t\t<CardTitle>\r\n\t\t\t\t\t\t{this.state.logoMissing ?\r\n\t\t\t\t\t\t\t<h3 className=\"StoreLogoAlt\">{name}</h3>\r\n\t\t\t\t\t\t:\r\n\t\t\t\t\t\t\t<img style={{filter:'grayscale(1)'}} className=\"StoreLogo\" src={logo} onError={()=>this.setState({...this.state, logoMissing:true})} />\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</CardTitle>\r\n\t\t\t\t\t<p>{description}</p>\r\n\t\t\t\t\t<address>\r\n\t\t\t\t\t\t{address1}<br/>\r\n\t\t\t\t\t\t{address2}<br/>\r\n\t\t\t\t\t\t{city}\r\n\t\t\t\t\t</address>\r\n\t\t\t\t</BackFace>\r\n\t\t\t</StatefulFlipCard>\r\n\t\t);\r\n\t}\r\n}\r\nexport default StoreCard;\n\n\n/** WEBPACK FOOTER **\n ** ./src/components/Stores/StoreCard.jsx\n **/","import React, { Component } from 'react';\r\n\r\nexport default class Stores extends Component {\r\n\trender() {\r\n\t\tconst { children, ...others } = this.props;\r\n\t\treturn <div className=\"Stores\" {...others}>{children}</div>\r\n\t}\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/components/Stores/Stores.jsx\n **/","import log from 'picolog';\r\nimport { Api, link } from 'redux-apis';\r\nimport { remote } from 'redux-fetch-api';\r\n\r\nimport PublicationApi from '../Publication/api';\r\nimport Store from './Store';\r\n\r\n@remote\r\nexport class StoresApi extends PublicationApi {\r\n\tstatic INITIAL_STATE = {\r\n\t\t...PublicationApi.INITIAL_STATE,\r\n\t}\r\n\tconstructor(state) {\r\n\t\tsuper(state);\r\n\t}\r\n}\r\nexport default StoresApi;\n\n\n/** WEBPACK FOOTER **\n ** ./src/components/Stores/api.jsx\n **/","import log from 'picolog';\r\nimport React from 'react';\r\nimport { Route, IndexRoute, IndexRedirect } from 'react-router';\r\n\r\nimport App from './components/App/App';\r\nimport Home from './components/Home/Home';\r\nimport Products from './components/Products/Products';\r\nimport ProductBrowser from './components/Products/ProductBrowser';\r\nimport ProductEdit from './components/Products/ProductEdit';\r\nimport ProductDetails from './components/Products/ProductDetails';\r\nimport Brands from './components/Brands/Brands';\r\nimport BrandBrowser from './components/Brands/BrandBrowser';\r\nimport Stores from './components/Stores/Stores';\r\nimport StoreBrowser from './components/Stores/StoreBrowser';\r\n\r\nexport const routes = (\r\n\t<Route path=\"/\" component={App}>\r\n\t\t<IndexRedirect to=\"/Wedding+Dresses\" />\r\n\t\t<Route path=\"/brands\" component={Brands} >\r\n\t\t\t<IndexRoute component={BrandBrowser} />\r\n\t\t</Route>\r\n\t\t<Route path=\"/stores\" component={Stores} >\r\n\t\t\t<IndexRoute component={StoreBrowser} />\r\n\t\t</Route>\r\n\t\t<Route component={Products} >\r\n\t\t\t<Route path=\"/:rating/:category\" component={ProductBrowser} />\r\n\t\t\t<Route path=\"/:category\" component={ProductBrowser} />\r\n\t\t</Route>\r\n\t</Route>\r\n);\r\n\r\nexport default routes;\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/routes.jsx\n **/","require('babel-polyfill');\r\nglobal.fetch = require('node-fetch');\r\nimport chalk from 'chalk';\r\nimport Express from 'express';\r\nimport compress from 'compression';\r\nimport cookieParser from 'cookie-parser';\r\nimport http from 'http';\r\nimport httpProxy from 'http-proxy';\r\nimport log from 'picolog';\r\nimport React from 'react';\r\nimport ReactDOM from 'react-dom/server';\r\nimport { match } from 'react-router';\r\nimport { load } from 'redux-load-api';\r\n\r\nimport cfg from '../config';\r\nimport store from './store';\r\n\r\nconst express = new Express();\r\nconst httpServer = new http.Server(express);\r\n\r\nconst g=chalk.green, gb=chalk.green.bold,  y=chalk.yellow, yb=chalk.yellow.bold,\r\n\tw=chalk.white, wb=chalk.white.bold, gr=chalk.grey,  grb=chalk.grey.bold,\r\n\tr=chalk.red, rb=chalk.red.bold;\r\n\r\n// Enable gzip compresion\r\nexpress.use(compress());\r\n\r\n// parses request cookies\r\nexpress.use(cookieParser());\r\n\r\n\r\n// if the server is started in hot mode, we include webpack-dev-middleware\r\n// and webpack-hot-middleware to serve a hot bundle to the client. In\r\n// production mode, we serve up a static pre-compiled client bundle\r\nif (module.hot) {\r\n\t// use require because it will be optimized out if !module.hot\r\n\tconst webpack = require('webpack');\r\n\tconst devMiddleware = require('webpack-dev-middleware');\r\n\tconst hotMiddleware = require('webpack-hot-middleware');\r\n\tconst stats = {colors:true, chunks:false, hash:false, version:false};\r\n\tconst clientCfg = require('../webpack/development.client.config');\r\n\tconst clientCompiler = webpack(clientCfg);\r\n\texpress.use(devMiddleware(clientCompiler, {stats, publicPath:clientCfg.output.publicPath}));\r\n\texpress.use(hotMiddleware(clientCompiler));\r\n}\r\n\r\n// We point to our static assets\r\nexpress.use(Express.static(cfg.publicPath));\r\n\r\n// polled by OpenShift haproxy load balancer to test server availability\r\nexpress.get('/status', (req, res) => {\r\n\tres.writeHead(200, {'Content-Type': 'text/html; charset=UTF-8'});\r\n\tres.end(`<!DOCTYPE html>\r\n<html>\r\n<head>\r\n\t<title>Status</title>\r\n</head>\r\n<body>\r\n\t<h1 style=\"color:green\">ONLINE</h1>\r\n\t<p>${cfg.server.name} is ONLINE</p>\r\n</body>\r\n</html>`);\r\n});\r\n\r\nexpress.get(/\\/.*/, (req, res) => {\r\n\t// Reset the store prior to each request\r\n\tstore.dispatch({type:'@@bridalapp/RESET'});\r\n\t// require again on each request, to enable hot-reload in development mode.\r\n\t// In production, this will just grab the module from require.cache.\r\n\tconst routes = require('./routes').routes;\r\n\tconst Html = require('./components/Html/Html').Html;\r\n\t// match the current URL against defined routes\r\n\tmatch({routes:routes, location:req.originalUrl}, (error, redirectLocation, renderProps) => {\r\n\t\tif (redirectLocation) {\r\n\t\t\tres.redirect(redirectLocation.pathname + redirectLocation.search);\r\n\t\t\tres.end();\r\n\t\t}\r\n\t\telse if (error) {\r\n\t\t\tlog.warn(rb('ROUTER ERROR:'), pretty.render(error));\r\n\t\t\tres.status(500);\r\n\t\t\tres.send('Server error.');\r\n\t\t\tres.end();\r\n\t\t}\r\n\t\telse if (!renderProps) {\r\n\t\t\tres.status(404);\r\n\t\t\tres.send('Not Found.');\r\n\t\t\tres.end();\r\n\t\t}\r\n\t\telse {\r\n\t\t\tlog.debug(chalk.styles.gray.open, 'Rendering using props: ', renderProps, chalk.styles.gray.close);\r\n\r\n\t\t\t// Store session cookie so we can attach it to fetch calls\r\n\t\t\tglobal.session = req.cookies && req.cookies.BASESSION;\r\n\t\t\tglobal.session && log.debug('stored session cookie: ' + global.session);\r\n\t\t\tPromise.resolve(global.session ? store.app.auth.loadSession() : {sessionId:null, user:null})\r\n\t\t\t.then(session => {\r\n\t\t\t\tlog.debug('loaded session: ', session);\r\n\t\t\t\tlog.debug('store.app.auth.loggedIn=', store.app.auth.loggedIn);\r\n\t\t\t\t// pre-load onload actions\r\n\t\t\t\tconst { routes, params, location: { query } } = renderProps;\r\n\t\t\t\tconst loadParams = {...query, ...params};\r\n\t\t\t\tlog.debug('LOAD params=', loadParams);\r\n\t\t\t\treturn load(routes.map(x => x.component), loadParams);\r\n\t\t\t})\r\n\t\t\t.then(() => {\r\n\t\t\t\t// do awesome stuff knowing all promises (if any) are resolved\r\n\t\t\t\tlog.debug('pre-load complete, rendering markup');\r\n\t\t\t\tres.status(200);\r\n\t\t\t\tres.send('<!DOCTYPE html>\\n' +\r\n\t\t\t\t\tReactDOM.renderToString(\r\n\t\t\t\t\t\t<Html store={store} apiUrl={cfg.apiServer.url} version={cfg.version} {...renderProps} />\r\n\t\t\t\t\t)\r\n\t\t\t\t);\r\n\t\t\t\tres.end();\r\n\t\t\t\tlog.debug('rendering complete');\r\n\t\t\t\treturn true;\r\n\t\t\t})\r\n\t\t\t.catch((error) => {\r\n\t\t\t\tlog.error('Error rendering ' + req.originalUrl + ': ', error, error.stack);\r\n\t\t\t\tres.status(500);\r\n\t\t\t\tres.send('Server error.');\r\n\t\t\t\tres.end();\r\n\t\t\t});\r\n\t\t}\r\n\t});\r\n});\r\n\r\n\r\nvar server = cfg.server.host\r\n\t? httpServer.listen(cfg.server.port, cfg.server.host, serverStartup)\r\n\t: httpServer.listen(cfg.server.port, serverStartup);\r\n\r\nfunction serverStartup(error) {\r\n\tif (error) {throw error;}\r\n\tvar addr = httpServer.address();\r\n\tlog.warn();\r\n\tif (module.hot) {\r\n\t\tlog.warn(yb(' !  ') + g('Running in ') + gb('development') + g(' mode. ') + (module.hot ? yb('Hot Module Replacement') + g(' is enabled.') : ''));\r\n\t} else {\r\n\t\tlog.warn(gb(' √  ') + g('Running in ') + gb('production') + g(' mode. ') + gb('gzip compression') + g(' is enabled.'));\r\n\t}\r\n\tlog.warn(gb(' √  ') + g('Talking to ') + gb(cfg.apiServer.name) + g(' at ') + gb(cfg.apiServer.url));\r\n\tlog.warn(gb(' √  ') + g('Listening for connections at ') + gb(cfg.server.protocol + addr.address + (addr.port == 80 ? '' : ':' + addr.port)));\r\n\tlog.warn(gb(' √  %s started succesfully ') + g('on %s.'), cfg.server.name, Date(Date.now()));\r\n\tlog.warn('');\r\n}\r\n\r\nvar msg;\r\nvar SIGNALS = ['SIGHUP', 'SIGINT', 'SIGQUIT', 'SIGILL', 'SIGTRAP', 'SIGABRT', 'SIGBUS', 'SIGFPE', 'SIGUSR1', 'SIGSEGV', 'SIGUSR2', 'SIGTERM'];\r\nSIGNALS.forEach(function(signal) {process.on(signal, function(){\r\n\tlog.warn(msg = (rb(' ×  ') + g('Stopping ') + gb(cfg.server.name) + g(' after receiving ') + yb(signal) + g('.')));\r\n\tserver.close();\r\n    process.exit();\r\n})});\r\nprocess.on('uncaughtException', function(error){\r\n\tlog.warn(msg = (rb(' ×  ') + g('Uncaught exception ') + yb(error) + g('.')));\r\n});\r\nprocess.on('exit', function() {log.warn(msg = (gb(' √  ') + g('Stopped ') + gb(cfg.server.name) + g(' on ' + Date(Date.now()) + '.\\r\\n')));});\r\n\r\nif (module.hot) {\r\n\tmodule.hot.accept('./store', function(){\r\n        log.warn(yb('Hot reloading ') + g('\\'./store\\'...'));\r\n\t});\r\n\tmodule.hot.accept('./routes', function(){\r\n        log.warn(yb('Hot reloading ') + g('\\'./routes\\'...'));\r\n\t});\r\n\tmodule.hot.accept('./components/Html/Html', function(){\r\n        log.warn(yb('Hot reloading ') + g('\\'./components/Html/Html\\'...'));\r\n\t});\r\n\r\n/*  SHOULD BE POSSIBLE BUT CAN'T GET IT TO WORK RELIABLY\r\n\t// self-accept. This allows hot-reload of this very file. We cleanup in the\r\n\t// dispose handler and then the server will be restarted.\r\n\tmodule.hot.accept();\r\n\t// dispose handler\r\n    module.hot.dispose(function() {\r\n\t\tserver.close(function(){\r\n\t\t\tlog.warn(g('Closed HTTP server listening on port ') + g(cfg.server.port));\r\n\t\t});\r\n    });\r\n*/\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/server.jsx\n **/","module.exports = {\n\t\"name\": \"bridalapp-ui\",\n\t\"version\": \"1.0.5\",\n\t\"description\": \"User Interface for BridalApp\",\n\t\"keywords\": [\n\t\t\"OpenShift\",\n\t\t\"Node.js\",\n\t\t\"BridalApp\"\n\t],\n\t\"main\": \"server.js\",\n\t\"babel\": {\n\t\t\"presets\": [\n\t\t\t\"es2015\",\n\t\t\t\"stage-0\",\n\t\t\t\"react\"\n\t\t],\n\t\t\"plugins\": [\n\t\t\t\"transform-decorators-legacy\",\n\t\t\t\"transform-class-properties\"\n\t\t]\n\t},\n\t\"homepage\": \"http://www.bridalapp.net/\",\n\t\"repository\": {\n\t\t\"type\": \"git\",\n\t\t\"url\": \"https://github.com/download/bridalapp-ui\"\n\t},\n\t\"scripts\": {\n\t\t\"clean-server\": \"rimraf hmr && rimraf server.js\",\n\t\t\"clean-client\": \"rimraf public/assets/bridalapp-ui.js\",\n\t\t\"clean\": \"npm run clean-server && npm run clean-client\",\n\t\t\"start\": \"node server.js\",\n\t\t\"start-dev\": \"just-wait -p \\\"server.js\\\" && npm run start\",\n\t\t\"build-server\": \"webpack --config webpack/server.config.js\",\n\t\t\"build-client\": \"webpack --config webpack/client.config.js\",\n\t\t\"build\": \"npm run build-server && npm run build-client\",\n\t\t\"release-server\": \"npm run clean-server && npm run build-server\",\n\t\t\"release-client\": \"npm run clean-client && npm run build-client\",\n\t\t\"release\": \"npm run clean && npm run build\",\n\t\t\"watch\": \"webpack --inline --watch --hide-modules --config webpack/development.server.config.js\",\n\t\t\"dev\": \"npm run -s clean && parallelshell \\\"npm run -s watch\\\" \\\"npm run -s start-dev\\\"\",\n\t\t\"test\": \"mocha --require babel-register \\\"src/bridalapp-ui.spec.jsx\\\"\",\n\t\t\"--test-dev\": \"webpack-dev-server --inline --hot --config webpack/test.config.js --port 8081\",\n\t\t\"test-dev\": \"webpack-dev-server --output-path test --output-filename bridalapp-ui.spec.js \\\"mocha!./bridalapp-ui.spec.jsx\\\" --content-base test --port 8888 --config webpack/test.config.js\"\n\t},\n\t\"engines\": {\n\t\t\"node\": \">= 0.6.0\",\n\t\t\"npm\": \">= 1.0.0\"\n\t},\n\t\"dependencies\": {\n\t\t\"babel-polyfill\": \"^6.6.1\",\n\t\t\"babel-preset-es2015\": \"^6.5.0\",\n\t\t\"babel-preset-react\": \"^6.5.0\",\n\t\t\"babel-preset-stage-0\": \"^6.5.0\",\n\t\t\"babel-runtime\": \"^6.3.19\",\n\t\t\"babylon\": \"^6.5.2\",\n\t\t\"chalk\": \"^1.1.1\",\n\t\t\"classnames\": \"^2.2.3\",\n\t\t\"compression\": \"^1.6.1\",\n\t\t\"cookie-parser\": \"^1.4.1\",\n\t\t\"express\": \"^4.0.0\",\n\t\t\"http-proxy\": \"^1.12.0\",\n\t\t\"node-fetch\": \"^1.3.3\",\n\t\t\"picolog\": \"^1.0.4\",\n\t\t\"react\": \"^0.14.7\",\n\t\t\"react-dom\": \"^0.14.7\",\n\t\t\"react-mdl\": \"^1.4.0\",\n\t\t\"react-redux\": \"^4.0.6\",\n\t\t\"react-router\": \"^2.0.0\",\n\t\t\"redux\": \"^3.0.5\",\n\t\t\"redux-apis\": \">=2.0.0-alpha.1\",\n\t\t\"redux-async-api\": \"^2.0.1\",\n\t\t\"redux-fetch-api\": \"^1.0.1\",\n\t\t\"redux-load-api\": \"^2.0.1\",\n\t\t\"redux-logger\": \"^2.5.2\",\n\t\t\"redux-thunk\": \"^1.0.3\",\n\t\t\"serialize-javascript\": \"^1.1.2\",\n\t\t\"ws.suid\": \"^0.10.1\"\n\t},\n\t\"devDependencies\": {\n\t\t\"babel-core\": \"^6.6.5\",\n\t\t\"babel-loader\": \"^6.2.4\",\n\t\t\"babel-plugin-react-transform\": \"^2.0.2\",\n\t\t\"babel-plugin-transform-class-properties\": \"^6.4.0\",\n\t\t\"babel-plugin-transform-decorators-legacy\": \"^1.3.4\",\n\t\t\"babel-plugin-transform-runtime\": \"^6.6.0\",\n\t\t\"babel-preset-es2015\": \"^6.5.0\",\n\t\t\"babel-preset-react\": \"^6.3.13\",\n\t\t\"babel-preset-stage-0\": \"^6.3.13\",\n\t\t\"babel-register\": \"^6.6.5\",\n\t\t\"chai\": \"^3.5.0\",\n\t\t\"eventsource-polyfill\": \"^0.9.6\",\n\t\t\"json-loader\": \"^0.5.4\",\n\t\t\"just-wait\": \"^1.0.5\",\n\t\t\"mocha\": \"^2.4.5\",\n\t\t\"mocha-loader\": \"^0.7.1\",\n\t\t\"parallelshell\": \"^2.0.0\",\n\t\t\"react-addons-test-utils\": \"^0.14.7\",\n\t\t\"react-mdl\": \"^1.0.4\",\n\t\t\"react-shallow-testutils\": \"^1.0.0\",\n\t\t\"react-transform-hmr\": \"^1.0.4\",\n\t\t\"rimraf\": \"^2.5.2\",\n\t\t\"webpack\": \"^1.12.14\",\n\t\t\"webpack-dev-middleware\": \"^1.5.1\",\n\t\t\"webpack-dev-server\": \"^1.14.1\",\n\t\t\"webpack-hot-middleware\": \"^2.9.1\"\n\t},\n\t\"author\": {\n\t\t\"name\": \"Stijn de Witt\",\n\t\t\"email\": \"StijnDeWitt@hotmail.com\",\n\t\t\"url\": \"http://www.StijnDeWitt.com/\"\n\t},\n\t\"copyright\": \"2016 by Stijn de Witt, some rights reserved.\",\n\t\"license\": \"CC-BY-4.0\",\n\t\"licenseUrl\": \"https://creativecommons.org/licenses/by/4.0/\"\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./package.json\n ** module id = 69\n ** module chunks = 0\n **/","module.exports = require(\"babel-polyfill\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"babel-polyfill\"\n ** module id = 70\n ** module chunks = 0\n **/","module.exports = require(\"babel-runtime/core-js/json/stringify\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"babel-runtime/core-js/json/stringify\"\n ** module id = 71\n ** module chunks = 0\n **/","module.exports = require(\"babel-runtime/core-js/object/create\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"babel-runtime/core-js/object/create\"\n ** module id = 72\n ** module chunks = 0\n **/","module.exports = require(\"babel-runtime/helpers/get\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"babel-runtime/helpers/get\"\n ** module id = 73\n ** module chunks = 0\n **/","module.exports = require(\"chalk\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"chalk\"\n ** module id = 74\n ** module chunks = 0\n **/","module.exports = require(\"compression\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"compression\"\n ** module id = 75\n ** module chunks = 0\n **/","module.exports = require(\"cookie-parser\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"cookie-parser\"\n ** module id = 76\n ** module chunks = 0\n **/","module.exports = require(\"express\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"express\"\n ** module id = 77\n ** module chunks = 0\n **/","module.exports = require(\"http\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"http\"\n ** module id = 78\n ** module chunks = 0\n **/","module.exports = require(\"http-proxy\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"http-proxy\"\n ** module id = 79\n ** module chunks = 0\n **/","module.exports = require(\"node-fetch\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"node-fetch\"\n ** module id = 80\n ** module chunks = 0\n **/","module.exports = require(\"path\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"path\"\n ** module id = 81\n ** module chunks = 0\n **/","module.exports = require(\"redux\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"redux\"\n ** module id = 82\n ** module chunks = 0\n **/","module.exports = require(\"redux-logger\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"redux-logger\"\n ** module id = 83\n ** module chunks = 0\n **/","module.exports = require(\"redux-thunk\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"redux-thunk\"\n ** module id = 84\n ** module chunks = 0\n **/","module.exports = require(\"serialize-javascript\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"serialize-javascript\"\n ** module id = 85\n ** module chunks = 0\n **/"],"sourceRoot":""}