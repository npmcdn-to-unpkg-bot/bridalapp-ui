!function(modules){function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={exports:{},id:moduleId,loaded:!1};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.loaded=!0,module.exports}var installedModules={};return __webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.p="/assets/",__webpack_require__(0)}([function(module,exports,__webpack_require__){module.exports=__webpack_require__(40)},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;(function(process){!function(u,m,d){__WEBPACK_AMD_DEFINE_ARRAY__=[],__WEBPACK_AMD_DEFINE_FACTORY__=d,__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof __WEBPACK_AMD_DEFINE_FACTORY__?__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__):__WEBPACK_AMD_DEFINE_FACTORY__,!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))}(this,"log",function(){function patch(lvl){for(var name,i=0;name=names[i];i++)log[name]=i+1>lvl?nop:logger(name,lvl)}function logger(name,lvl){return c&&bnd(name)||prn()||function(){(c=con())&&(patch(lvl),log[name].apply(log,arguments))}}function nop(){}function bnd(n){return c&&(c[n]||c.log).bind(c)}function con(){return"object"==typeof console&&console}function prn(){return"function"==typeof print&&print}function lvl(n){return n&&(Number(n)!==Number(n)?log[n.toUpperCase()]:Number(n))}function qry(){var i,m,qs="object"==typeof window&&window.location.search.substring(1),args=qs&&qs.split("&");for(i=0;m=args&&args[i]&&args[i].split("=");i++)if("log"==m[0])return lvl(m[1])}var log={NONE:0,ERROR:1,WARN:2,INFO:3,LOG:4,DEBUG:5,TRACE:6},p="object"==typeof process&&process,prod=p&&"production"===p.env.NODE_ENV,k=Object.keys(log),q=qry(),c=con(),env=p&&lvl(p.env.PICOLOG_LEVEL),level="number"==typeof q?q:"number"==typeof env?env:log.WARN,names=k.slice(1,k.length).map(function(x){return x.toLowerCase()});return Object.defineProperty(log,"picolog",{configurable:!1,enumerable:!1,value:{version:"1.0.4"}}),Object.defineProperty(log,"level",{get:function(){return level},set:function(lvl){lvl>=0&&6>=lvl&&patch(level=lvl)}}),patch(level),log.dir=bnd("dir")||nop,log.time=bnd("time")||nop,log.timeEnd=bnd("timeEnd")||nop,log.assert=prod?nop:function(){var a=[].concat.apply([],arguments),ok=a.shift();ok||log.error.apply(log,a)},log})}).call(exports,__webpack_require__(60))},function(module,exports){module.exports=React},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function Entity(target){return register(target.name,target)}function fromJSON(json){if("string"==typeof json){var result=JSON.parse(json,revive);return _picolog2["default"].trace("fromJSON => ",result),result}if(_picolog2["default"].debug("fromJSON",json,this),this){var _result=Object.create(this.prototype),keys=Object.keys(json);_picolog2["default"].trace("fromJSON: keys=",keys);for(var key,i=0;key=keys[i];i++)_result[key]=json[key];return _picolog2["default"].trace("fromJSON => ",_result),_result}return fromJSON(JSON.stringify(json))}function toJSON(entity){if("object"==("undefined"==typeof entity?"undefined":_typeof(entity)))return JSON.stringify(entity);var result=_extends({},this,{type:this.constructor.name});return Object.defineProperty(result,"toJSON",{value:toJSON}),result}function toError(response){return(response?response.text():Promise.resolve("unknown error")).then(function(text){var error=Error(text);throw error.message=text,error.status=response&&response.status||500,error.statusText=response&&response.statusText||text,error.toJSON=toJSON,error})}function equals(one,other){return 1===arguments.length?equals(this,one):one===other||one&&one.id===other||one&&hasEquals(one.id)&&one.id.equals(other)||other&&other.id===one||other&&hasEquals(other.id)&&other.id.equals(one)||one&&other&&one.constructor===other.constructor&&(one.id===other.id||hasEquals(one.id)&&one.id.equals(other.id)||hasEquals(other.id)&&other.id.equals(one.id))}function indexOf(list,entity){for(var i=0;i<list.length;i++)if(equals(list[i],entity))return i;return-1}function clone(entity){var shallow=arguments.length<=1||void 0===arguments[1]?!1:arguments[1];entity||(entity=this);for(var key,result=Object.create(entity.constructor.prototype),keys=Object.keys(entity),i=0;key=keys[i];i++){var val=entity[key];result[key]=val&&val.clone&&!shallow?val.clone():val}return result}function copy(entity){var recurse=arguments.length<=1||void 0===arguments[1]?!1:arguments[1];entity||(entity=this);for(var key,result=Object.create(entity.constructor.prototype),keys=Object.keys(entity).filter(function(val){return"id"!==val}),i=0;key=keys[i];i++){var val=entity[key];result[key]=val&&val.copy&&recurse?val.copy():val}return result}function revive(key,value){_picolog2["default"].trace("revive",key,value);var t=value&&"object"==("undefined"==typeof value?"undefined":_typeof(value))&&"string"==typeof value.type&&value.type,type=t&&registry[t],result=type?type.fromJSON(value):_ws2["default"].revive(function(k){return idKey(k)})(key,value);return _picolog2["default"].trace("revive => ",result),result}function register(name,type){function enhance(entity,obj){Object.defineProperty(entity,"id",{enumerable:!0,get:function(){return this.__id},set:function(id){Object.defineProperty(this,"__id",{value:id})}}),Object.defineProperty(entity,"version",{enumerable:!0,get:function(){return this.__version},set:function(version){Object.defineProperty(this,"__version",{value:version})}});for(var key,keys=obj&&Object.keys(obj)||[],i=0;key=keys[i];i++)entity[key]=obj[key];-1===keys.indexOf("version")&&(entity.version=null)}var wrapped=void 0;return eval("\n		wrapped = function "+name+"(obj){\n			enhance(this, obj);\n			type.apply(this, arguments);\n		};\n	"),wrapped.prototype=Object.create(type.prototype),wrapped.toString=type.toString.bind(wrapped),registry[name]=wrapped,wrapped.prototype.toJSON||Object.defineProperty(wrapped.prototype,"toJSON",{value:toJSON}),wrapped.prototype.equals||Object.defineProperty(wrapped.prototype,"equals",{value:equals}),wrapped.prototype.clone||Object.defineProperty(wrapped.prototype,"clone",{value:clone}),wrapped.fromJSON||Object.defineProperty(wrapped,"fromJSON",{value:fromJSON}),wrapped}function idKey(key){return"id"===key||key.substring&&"Id"===key.substring(key.length-2)}function hasEquals(obj){return obj&&"function"==typeof obj.equals}Object.defineProperty(exports,"__esModule",{value:!0});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol?"symbol":typeof obj};exports.Entity=Entity,exports.fromJSON=fromJSON,exports.toJSON=toJSON,exports.toError=toError,exports.equals=equals,exports.indexOf=indexOf,exports.clone=clone,exports.copy=copy,exports.revive=revive,exports.register=register;var _picolog=__webpack_require__(1),_picolog2=_interopRequireDefault(_picolog),_ws=__webpack_require__(4),_ws2=_interopRequireDefault(_ws);exports["default"]=Entity;var registry={}},function(module,exports,__webpack_require__){(function(global){/**!
	 * Distributed Service-Unique IDs that are short and sweet.
	 *
	 * http://download.github.io/suid
	 *
	 * @Author Stijn de Witt (http://StijnDeWitt.com)
	 * @Copyright (c) 2015. Some rights reserved.
	 * @License CC BY 4.0 (https://creativecommons.org/licenses/by/4.0/)
	 */
!function(u,m,d){var l;this&&this.log&&this.log.picolog&&(l=this.log);try{l=__webpack_require__(1)}catch(e){}module.exports=d(l)}("suid","Suid",function(log){"use strict";function merge(){var i,arg,key,res={};for(i=0;arg=arguments[i++];)for(key in arg)res[key]=arg[key];return res}function getConfig(cfg,def){var options={},config=merge(def,cfg),script="object"==typeof document&&document.querySelector("script[data-suid-server]");if(script||(script="object"==typeof document&&document.querySelector("script[data-suid-options]")),script){var attr=script.getAttribute("data-suid-options");if(attr)try{options=JSON.parse(attr.split("'").join('"'))}catch(error){log&&log.error("Unable to parse suid options as JSON: '"+attr+"'. Error was: ",error)}options.url=script.getAttribute("data-suid-server"),config=merge(config,options)}return config.configured=cfg||script,config}var currentBlock,currentId,SHARDSIZE=2,IDSIZE=64,THROTTLE=5e3,POOL="suidpool",DETECT="suiddetect",ALPHABET="0123456789abcdefghijklmnopqrstuvwxyz",localStorageSupported=function(ls){try{return ls.setItem(DETECT,DETECT),ls.removeItem(DETECT),!0}catch(e){return!1}}("object"==typeof window&&window.localStorage),readyListeners=[],win="undefined"!=typeof window?window:"undefined"!=typeof global?global:{},config=getConfig(win.Suid,{server:"/suid/suid.json",min:3,max:4}),Suid=function(){function Suid(value){return this instanceof Suid?(void 0===value&&(value=0),"string"==typeof value&&(value=parseInt(value,36)),this.value=value instanceof Suid?value.value:value,void Number.call(this,this.value)):new Suid(value)}return Suid.prototype=Object.create(Number.prototype),Suid.prototype.constructor=Suid,Suid.prototype.toString=function(){return this.value.toString(36)},Suid.prototype.toJSON=function(){return this.toString()},Suid.prototype.valueOf=function(){return this.value},Suid.prototype.compare=function(that){return that=Suid(that),this.value<that.value?-1:this.value>that.value?1:0},Suid.prototype.equals=function(that){return this.value===Suid(that).value},Suid.looksValid=function(value){if(!value)return!1;var len=value.length;if(!len||len>11)return!1;if(11===len&&ALPHABET.indexOf(value.charAt(0))>2)return!1;for(var i=0;len>i;i++)if(-1===ALPHABET.indexOf(value.charAt(i)))return!1;return!0},Suid.revive=function(prop){var mayRevive=void 0===typeof prop?function(){return!0}:function(key){return-1!==prop.indexOf(key)};return"string"==typeof prop&&(prop=[prop]),"function"==typeof prop&&(mayRevive=prop),function(key,value){return mayRevive(key,value)&&Suid.looksValid(value)?new Suid(value):value}},Suid.next=function(){var pool=Pool.get();if((pool.length<config.min||!currentBlock&&pool.length===config.min)&&(config.server?Server.fetch():log&&log.warn("No suid server configured. Please add the data-suid-server attribute to the script tag or call Suid.config before generating IDs.")),!currentBlock){if(0===pool.length)throw new Error("Unable to generate IDs. Suid block pool exhausted.");currentId=0,currentBlock=pool.splice(0,1)[0],Pool.set(pool)}var result=currentBlock+currentId*SHARDSIZE;return currentId++,currentId>=IDSIZE&&(currentBlock=null),new Suid(result)},Suid.config=function(cfg){if(cfg){if(config=merge(config,cfg),cfg.seed){var pool=Pool.get();pool.push(cfg.seed),Pool.set(pool),delete config.seed}Suid.ready()}return config},Suid.ready=function(callback){var ready=Pool.get().length>0;return callback&&readyListeners.push(callback),ready?setTimeout(function(){for(var l;l=readyListeners.shift();)l()},0):setTimeout(function(){Server.fetch()},100),ready},Suid}(),Pool=function(){var pool=[];return{get:function(){return localStorageSupported&&(pool=Pool.from(localStorage.getItem(POOL))),pool},set:function(values){return pool=values,localStorageSupported&&localStorage.setItem(POOL,Pool.to(pool)),Pool},from:function(str){var results=[];if(str)for(var s,strings=str.split(","),i=0;s=strings[i];i++)results.push(new Suid(s));return results},to:function(obj){return obj.join(",")}}}(),Server=function(){function handleSuccess(text){retries=0;var pool=Pool.get();pool.push(JSON.parse(text)),Pool.set(pool),Suid.ready()}function handleError(status,request){switch(status){case 500:case 502:case 503:case 504:retry(request);break;default:log&&log.error("Unable to fetch suid data from server. ",request,status),retries=0}}function retry(request){if(0===retries)return void(log&&log.error("Giving up fetching suid data from server: "+config.server));retries--;var after=3e5,retryAfter=request.getResponseHeader("Retry-After");retryAfter&&(after=parseInt(retryAfter,10),isNaN(after)||(after=1e3*after)),Pool.get().length||after>6e4&&(after=6e4),currentId>IDSIZE/2&&after>3e4&&(after=3e4),currentBlock||after>2e3&&(after=2e3),setTimeout(function(){ajax(config.server,{blocks:config.max-Pool.get().length},handleSuccess,handleError)},after)}function ajax(url,data,success,error,sync){var params,key,xhr=new XMLHttpRequest,query=[];for(key in data)data.hasOwnProperty(key)&&query.push(encodeURIComponent(key)+"="+encodeURIComponent(data[key]));params=query.join("&"),xhr.open("get",url+(params?(-1!==url.indexOf("?")?"&":"?")+params:""),!sync),xhr.addEventListener("readystatechange",function(){4===this.readyState&&(200===this.status?success(this.responseText,this):error(this.status,this))}),xhr.addEventListener("error",function(){error(this,this.status)}),xhr.send()}var retries=0,started=0;return{fetch:function(){if(!("object"!=typeof window||retries&&((new Date).getTime()-started<THROTTLE||currentId&&IDSIZE/2>currentId))){var pool=Pool.get();pool.length<config.min&&(retries=3,started=Date.now(),ajax(config.server,{blocks:config.max-pool.length},handleSuccess,handleError))}}}}();return config.configured?Suid.configure(config):Suid.ready(),log&&log.info("Suid.js started."),Suid})}).call(exports,function(){return this}())},function(module,exports,__webpack_require__){!function(t,e){module.exports=e()}(this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return t[r].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e){"use strict";function n(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){var n=arguments.length<=2||void 0===arguments[2]?a:arguments[2];return e.__parent=t,e.__link=n.bind(e),e}function a(t,e){var n=u(this);return void 0===e?void 0!==t&&n?t[n]:t:n?t[n]=e:Object.assign(t,s({},e))}function o(t){return function(e,n){return void 0===n?void 0!==e?e[t]:void 0:e[t]=n}}function u(t){for(var e,n=t.getParent(),r=n?Object.keys(n):[],i=0;e=r[i];i++)if(n[e]===t)return e}function c(t,e,n){var r="function"==typeof e?e:function(t){return t};return function(){var e={type:t,payload:r.apply(void 0,arguments)};return 1===arguments.length&&(arguments.length<=0?void 0:arguments[0])instanceof Error&&(e.error=!0),"function"==typeof n&&(e.meta=n.apply(void 0,arguments)),e}}var s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},l=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();Object.defineProperty(e,"__esModule",{value:!0}),e.link=i,e.apiLink=a,e.namedLink=o;var f=e.Api=function(){function t(){var e=this,n=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];r(this,t),Object.defineProperties(this,{__actionHandlers:{value:{}},__initialState:{value:n},__getState:{value:function(){return n}},__dispatch:{value:function(t){return"function"==typeof t?t(e.dispatch.bind(e),e.getState.bind(e)):(n=e.reducer(n,t),t)}},__parent:{value:void 0,writable:!0},__link:{value:void 0,writable:!0},connector:{value:this.connector.bind(this)},reducer:{value:this.reducer.bind(this)}})}return l(t,[{key:"init",value:function(){return this.dispatch(this.createAction("@@redux/INIT")()),this}},{key:"getState",value:function(){var t=void 0;return this.getParent()&&(t=this.__link?this.__link(this.getParent().getState()):this.getParent().getState()),void 0!==t?t:this.__getState()}},{key:"getParent",value:function(){return this.__parent}},{key:"setHandler",value:function(t,e){this.__actionHandlers[t]=e}},{key:"getHandler",value:function(t){return this.__actionHandlers[t]}},{key:"clearHandler",value:function(t){var e=this.__actionHandlers[t];return delete this.__actionHandlers[t],e}},{key:"createAction",value:function(e,n,r){return this.getParent()instanceof t?this.getParent().createAction(u(this)+"/"+e,n,r):c(e,n,r)}},{key:"dispatch",value:function(t){return this.__parent?this.__parent.dispatch(t):this.__dispatch(t)}},{key:"reducer",value:function(e,r){var i=this,a=r.type.indexOf("/"),o=-1!==a&&r.type.substring(0,a),u=this.__actionHandlers[r.type]?this.__actionHandlers[r.type].call(this,e,r):void 0===e?this.__initialState:void 0,c=Object.keys(this).filter(function(e){return i[e]instanceof t});return c.forEach(function(t){var c=t!==o?r:s({},r,{type:r.type.substring(a+1)}),l=i[t].reducer(i[t].__link(e),c);(void 0===e||i[t].__link&&void 0===i[t].__link(e)||i[t].getState()!==l)&&(void 0===u&&(u=e instanceof Array?[].concat(n(e)):s({},e)),i[t].__link(u,l))}),void 0===u?e:u}},{key:"connector",value:function(e,n){var r=this.getState();if(r===this.connector.__prevState)return this.connector.__prevResult;var i=s({},this);for(var a in this)this[a]instanceof t&&(i[a]=this[a].connector(e,n));return Object.defineProperty(this.connector,"__prevState",{configurable:!0,value:r}),Object.defineProperty(this.connector,"__prevResult",{configurable:!0,value:i}),i}}]),t}();e["default"]=f}])})},function(module,exports){module.exports=ReactMDL},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _objectWithoutProperties(obj,keys){var target={};for(var i in obj)keys.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(obj,i)&&(target[i]=obj[i]);return target}function component(displayName,defaultClass){function render(props){_picolog2["default"].debug("render",props);var className=props.className,defaultClass=props.defaultClass,children=props.children,others=_objectWithoutProperties(props,["className","defaultClass","children"]),extraClasses=Object.keys(conditionals).map(function(x){return _defineProperty({},others[x+"Class"],others[x])});return createElement(elem,_extends({className:(0,_classnames2["default"])(className,defaultClass,extraClasses)},others),children)}var conditionals=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],elem=arguments.length<=3||void 0===arguments[3]?"div":arguments[3],propTypes=arguments.length<=4||void 0===arguments[4]?{}:arguments[4],defaultProps=arguments.length<=5||void 0===arguments[5]?{}:arguments[5],createElement=arguments.length<=6||void 0===arguments[6]?_react2["default"].createElement:arguments[6];render.displayName=displayName,render.propTypes=_extends({defaultClass:string,className:string,children:node},propTypes),render.defaultProps=_extends({defaultClass:defaultClass},defaultProps);for(var key in conditionals)render.propTypes[key+"Class"]=string,render.propTypes[key]=oneOfType([bool,string,object,number,node]),render.defaultProps[key+"Class"]=conditionals[key];return render}Object.defineProperty(exports,"__esModule",{value:!0}),exports.Lightbox=exports.Drawer=exports.Dialog=exports.Modal=exports.SimpleDialog=exports.StatefulFlipCard=exports.FlipCard=exports.BackFace=exports.FrontFace=exports.StatefulTextfield=exports.Textfield=exports.Switch=exports.Sprite=exports.LayoutObfuscator=exports.LayoutTitle=exports.Badge=void 0;var _class,_temp,_class2,_temp2,_class3,_temp3,_class4,_temp4,_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol?"symbol":typeof obj},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};exports.component=component;var _picolog=__webpack_require__(1),_picolog2=_interopRequireDefault(_picolog),_react=__webpack_require__(2),_react2=_interopRequireDefault(_react),_reactDom=__webpack_require__(23),_reactMdl=(_interopRequireDefault(_reactDom),__webpack_require__(6)),_classnames=__webpack_require__(8),_classnames2=_interopRequireDefault(_classnames);_picolog2["default"].assert(_reactMdl.Drawer,"MdlDrawer is not defined"),_picolog2["default"].assert(_reactMdl.Textfield,"MdlTextfield is not defined");var bool=_react.PropTypes.bool,number=_react.PropTypes.number,string=_react.PropTypes.string,object=_react.PropTypes.object,func=_react.PropTypes.func,array=_react.PropTypes.array,node=_react.PropTypes.node,shape=_react.PropTypes.shape,oneOfType=_react.PropTypes.oneOfType,arrayOf=_react.PropTypes.arrayOf,LayoutObfuscator=(exports.Badge=component("Badge","mdl-badge",{overlap:"mld-badge--overlap"},"span",{text:string},{text:""},function(elem,props,children){var text=props.text,others=(props.overlap,_objectWithoutProperties(props,["text","overlap"]));return _react2["default"].createElement("span",others,children,_react2["default"].createElement("b",null,text))}),exports.LayoutTitle=component("LayoutTitle","mdl-layout__title"),exports.LayoutObfuscator=component("LayoutObfuscator","mdl-layout__obfuscator",{open:"is-visible"},"div",{onCancel:func.isRequired},{},function(elem,props,children){var onCancel=props.onCancel,others=_objectWithoutProperties(props,["onCancel"]),cancel=function(event){event.preventDefault(),onCancel()};return _react2["default"].createElement("div",_extends({onClick:cancel,onTouchEnd:cancel},others))})),Sprite=exports.Sprite=component("Sprite","material-icons-sprite",{},"i",{name:string.isRequired},{},function(elem,props,children){var name=props.name,className=props.className,others=_objectWithoutProperties(props,["name","className"]),classes=(0,_classnames2["default"])(className,name);return _react2["default"].createElement("i",_extends({className:classes},others))}),FrontFace=(exports.Switch=component("Switch","mdl-switch",{ripple:"mdl-js-ripple-efect"},"label",{name:string.isRequired,icon:string,sprite:string,on:bool},{on:!1},function(elem,props,children){var name=props.name,icon=props.icon,sprite=props.sprite,on=props.on,className=props.className,others=_objectWithoutProperties(props,["name","icon","sprite","on","className"]),classes=(0,_classnames2["default"])(className,"is-upgraded",{"is-checked":on,icon:!!icon,sprite:!!sprite});return _react2["default"].createElement("label",_extends({className:classes,htmlFor:name},others),_react2["default"].createElement("input",{type:"checkbox",id:name,className:"mdl-switch__input",defaultChecked:on}),_react2["default"].createElement("span",{className:"mdl-switch__label"},icon?_react2["default"].createElement(_reactMdl.Icon,{name:icon}):"",sprite?_react2["default"].createElement(Sprite,{name:sprite}):"",children),_react2["default"].createElement("div",{className:"mdl-switch__track"}),_react2["default"].createElement("div",{className:"mdl-switch__thumb"},_react2["default"].createElement("span",{className:"mdl-switch__focus-helper"})))}),exports.Textfield=(_temp=_class=function(_Component){function Textfield(){var _Object$getPrototypeO;_classCallCheck(this,Textfield);for(var _len=arguments.length,props=Array(_len),_key=0;_len>_key;_key++)props[_key]=arguments[_key];var _this=_possibleConstructorReturn(this,(_Object$getPrototypeO=Object.getPrototypeOf(Textfield)).call.apply(_Object$getPrototypeO,[this].concat(props)));return _this.onChange=_this.onChange.bind(_this),Object.defineProperty(_this,"value",{get:function(){return _this.props.value}}),_this}return _inherits(Textfield,_Component),_createClass(Textfield,[{key:"onChange",value:function onChange(evt){_picolog2["default"].debug("onChange",evt,evt.target.value);for(var onChange=this.props.onChange,_len2=arguments.length,params=Array(_len2>1?_len2-1:0),_key2=1;_len2>_key2;_key2++)params[_key2-1]=arguments[_key2];return onChange&&onChange.apply(void 0,[evt.target.value,evt].concat(params))}},{key:"render",value:function(){_picolog2["default"].debug("render",this.props);var _props=this.props,props=(_props.onChange,_props.children,_objectWithoutProperties(_props,["onChange","children"]));return _react2["default"].createElement(_reactMdl.Textfield,_extends({onChange:this.onChange},props))}}]),Textfield}(_react.Component),_class.propTypes=_extends({},_reactMdl.Textfield.propTypes),_class.defaultProps=_extends({},_reactMdl.Textfield.defaultProps,{label:""}),_temp),exports.StatefulTextfield=(_temp2=_class2=function(_Component2){function StatefulTextfield(){var _Object$getPrototypeO2;_classCallCheck(this,StatefulTextfield);for(var _len3=arguments.length,props=Array(_len3),_key3=0;_len3>_key3;_key3++)props[_key3]=arguments[_key3];var _this2=_possibleConstructorReturn(this,(_Object$getPrototypeO2=Object.getPrototypeOf(StatefulTextfield)).call.apply(_Object$getPrototypeO2,[this].concat(props)));return _this2.onChange=_this2.onChange.bind(_this2),_this2.state={value:_this2.props.value},Object.defineProperty(_this2,"value",{get:function(){return _this2.state.value}}),_this2}return _inherits(StatefulTextfield,_Component2),_createClass(StatefulTextfield,[{key:"onChange",value:function onChange(evt){_picolog2["default"].debug("onChange",evt,evt.target.value),this.setState({value:evt.target.value});for(var onChange=this.props.onChange,_len4=arguments.length,params=Array(_len4>1?_len4-1:0),_key4=1;_len4>_key4;_key4++)params[_key4-1]=arguments[_key4];return onChange&&onChange.apply(void 0,[evt].concat(params))}},{key:"render",value:function(){var value=this.state.value;_picolog2["default"].debug("render",value);var _props2=this.props,props=(_props2.children,_props2.onChange,_objectWithoutProperties(_props2,["children","onChange"]));return _react2["default"].createElement(_reactMdl.Textfield,_extends({value:value,onChange:this.onChange},props))}}]),StatefulTextfield}(_react.Component),_class2.propTypes=_extends({},_reactMdl.Textfield.propTypes),_class2.defaultProps=_extends({},_reactMdl.Textfield.defaultProps),_temp2),exports.FrontFace=component("FrontFace","mdl-card__face mdl-card__front")),BackFace=exports.BackFace=component("BackFace","mdl-card__face mdl-card__back"),FlipCard=exports.FlipCard=component("FlipCard","mdl-card is-flippable",{flipped:"is-flipped"}),SimpleDialog=(exports.StatefulFlipCard=(_temp3=_class3=function(_Component3){function StatefulFlipCard(){var _Object$getPrototypeO3;_classCallCheck(this,StatefulFlipCard);for(var _len5=arguments.length,props=Array(_len5),_key5=0;_len5>_key5;_key5++)props[_key5]=arguments[_key5];var _this3=_possibleConstructorReturn(this,(_Object$getPrototypeO3=Object.getPrototypeOf(StatefulFlipCard)).call.apply(_Object$getPrototypeO3,[this].concat(props)));return _this3.state={flipped:_this3.props.flipped,backLoaded:!_this3.props.backLoadDelay,frontLoaded:!_this3.props.frontLoadDelay},_this3.flip=_this3.flip.bind(_this3),_this3}return _inherits(StatefulFlipCard,_Component3),_createClass(StatefulFlipCard,[{key:"isFlipped",value:function(){return this.state.flipped}},{key:"flip",value:function(event){if(!event||!event.defaultPrevented){var _state=this.state,flipped=_state.flipped,frontLoaded=_state.frontLoaded,backLoaded=_state.backLoaded;this.setState(_extends({},this.state,{flipped:!flipped,backLoaded:backLoaded||!flipped,frontLoaded:frontLoaded||flipped}))}}},{key:"componentDidMount",value:function(){var _this4=this,_props3=this.props,frontLoadDelay=_props3.frontLoadDelay,backLoadDelay=_props3.backLoadDelay;frontLoadDelay&&(this.frontLoad=setTimeout(function(){_this4.setState(_extends({},_this4.state,{frontLoaded:!0}))},frontLoadDelay)),backLoadDelay&&(this.backLoad=setTimeout(function(){_this4.setState(_extends({},_this4.state,{backLoaded:!0}))},backLoadDelay))}},{key:"componentWillUnmount",value:function(){clearTimeout(this.frontLoad),clearTimeout(this.backLoad)}},{key:"render",value:function(){for(var elem,_props4=this.props,className=_props4.className,children=(_props4.flipped,_props4.frontLoadDelay,_props4.backLoadDelay,_props4.children),others=_objectWithoutProperties(_props4,["className","flipped","frontLoadDelay","backLoadDelay","children"]),frontProps=void 0,frontChilds=void 0,backProps=void 0,backChilds=void 0,i=0;elem=children[i];i++)if(elem.type===FrontFace){var _elem$props=elem.props,_children=_elem$props.children,_others=_objectWithoutProperties(_elem$props,["children"]);frontProps=_others,frontChilds=_children}else if(elem.type===BackFace){var _elem$props2=elem.props,_children2=_elem$props2.children,_others2=_objectWithoutProperties(_elem$props2,["children"]);backProps=_others2,backChilds=_children2}return _react2["default"].createElement(FlipCard,_extends({className:className,flipped:this.isFlipped(),onClick:this.flip},others),_react2["default"].createElement(FrontFace,frontProps,this.state.frontLoaded?frontChilds:""),_react2["default"].createElement(BackFace,backProps,this.state.backLoaded?backChilds:""))}}]),StatefulFlipCard}(_react.Component),_class3.propTypes={flipped:bool,className:string,frontLoadDelay:number,backLoadDelay:number},_class3.defaultProps={flipped:!1,frontLoadDelay:0,backLoadDelay:0},_temp3),exports.SimpleDialog=component("SimpleDialog","mdl-dialog",{visible:"is-visible"},"div",{},{},function(elem,props,children){var visible=props.visible,others=_objectWithoutProperties(props,["visible"]);return _react2["default"].createElement("div",_extends({className:props.className},others),visible?children:void 0)})),Modal=exports.Modal=component("Modal","mdl-modal",{},"div",{open:bool.isRequired,onCancel:func.isRequired},{},function(elem,props,children){var open=props.open,onCancel=props.onCancel,others=_objectWithoutProperties(props,["open","onCancel"]);return _react2["default"].createElement("div",others,children,_react2["default"].createElement(LayoutObfuscator,{open:open,onCancel:onCancel}))});exports.Dialog=component("Dialog","",{},"div",{open:bool,modal:bool,onCancel:func},{open:!1,modal:!1},function(elem,props,children){var open=props.open,modal=props.modal,onCancel=props.onCancel,others=_objectWithoutProperties(props,["open","modal","onCancel"]);return modal?_react2["default"].createElement(Modal,{open:open,onCancel:onCancel},_react2["default"].createElement(SimpleDialog,_extends({visible:open},others),children)):_react2["default"].createElement(SimpleDialog,_extends({visible:open},others),children)}),exports.Drawer=component("Drawer","",{right:"mdl-layout__drawer-right",open:"is-visible"},"div",{modal:bool,autoClose:bool,onCancel:func},{modal:!1,autoClose:!1},function(elem,props,children){_picolog2["default"].debug("render",props);var open=props.open,modal=props.modal,autoClose=props.autoClose,onCancel=props.onCancel,_onClick=props.onClick,others=_objectWithoutProperties(props,["open","modal","autoClose","onCancel","onClick"]);return modal?_react2["default"].createElement(Modal,{open:open,onCancel:onCancel},_react2["default"].createElement(_reactMdl.Drawer,_extends({visible:open,onClick:function(e){return _onClick?_onClick(e):autoClose?onCancel(e):void 0}},others),children)):_react2["default"].createElement(_reactMdl.Drawer,others,children)}),exports.Lightbox=(_temp4=_class4=function(_Component4){function Lightbox(){_classCallCheck(this,Lightbox);var _this5=_possibleConstructorReturn(this,Object.getPrototypeOf(Lightbox).call(this));return _this5.state={loaded:[]},_this5.cancel=_this5.cancel.bind(_this5),_this5.next=_this5.next.bind(_this5),_this5.prev=_this5.prev.bind(_this5),_this5.nav=_this5.nav.bind(_this5),_this5.imageClicked=_this5.imageClicked.bind(_this5),_this5.keyPressed=_this5.keyPressed.bind(_this5),_this5}return _inherits(Lightbox,_Component4),_createClass(Lightbox,[{key:"componentDidMount",value:function(){var noKeyboardInput=this.props.noKeyboardInput;noKeyboardInput||"object"!=("undefined"==typeof window?"undefined":_typeof(window))||window.addEventListener("keydown",this.keyPressed)}},{key:"componentWillUnmount",value:function(){var noKeyboardInput=this.props.noKeyboardInput;noKeyboardInput||"object"!=("undefined"==typeof window?"undefined":_typeof(window))||window.removeEventListener("keydown",this.keyPressed)}},{key:"cancel",value:function(event){_picolog2["default"].log("cancel",event);var _props5=this.props,noBackdropCancel=_props5.noBackdropCancel,onCancel=_props5.onCancel;noBackdropCancel||(this.setState({loaded:[]}),onCancel&&onCancel(event),event&&(event.preventDefault(),event.stopPropagation()))}},{key:"next",value:function(event){_picolog2["default"].log("next",event);var _props6=this.props,images=_props6.images,index=_props6.index,onNext=_props6.onNext,onNav=_props6.onNav,noRotate=_props6.noRotate;if(index===images.length-1){if(noRotate)return;onNav&&onNav(0,event)}else onNext&&onNext(event);event&&(event.preventDefault(),event.stopPropagation())}},{key:"prev",value:function(event){_picolog2["default"].log("prev",event);var _props7=this.props,images=_props7.images,index=_props7.index,onPrev=_props7.onPrev,onNav=_props7.onNav,noRotate=_props7.noRotate;if(0===index){if(noRotate)return;onNav&&onNav(images.length-1,event)}else onPrev&&onPrev(event);event&&(event.preventDefault(),event.stopPropagation())}},{key:"nav",value:function(idx,event){_picolog2["default"].log("nav",event);var onNav=this.props.onNav;onNav&&onNav(idx,event),event&&(event.preventDefault(),event.stopPropagation())}},{key:"imageClicked",value:function(event){_picolog2["default"].log("imageClicked",event),this.props.noNextOnClick||this.next(event)}},{key:"imageLoaded",value:function(event,index){_picolog2["default"].log("imageLoaded",event,index);var loaded=this.state.loaded.concat();loaded[index]=!0,this.setState({loaded:loaded})}},{key:"keyPressed",value:function(event){37===event.keyCode?this.prev(event):39===event.keyCode?this.next(event):27===event.keyCode&&this.cancel(event)}},{key:"render",value:function(){var _this6=this,_props8=this.props,open=_props8.open,index=_props8.index,images=_props8.images,noCloseButton=_props8.noCloseButton,noImageCount=_props8.noImageCount,noPositionIndicators=_props8.noPositionIndicators,noPreload=_props8.noPreload,noRotate=(_props8.noSpinner,_props8.noRotate),noImages=!images||!images.length,caption=!noImages&&images[index].caption,style={cursor:this.props.noNextOnClick?"auto":"pointer",opacity:this.state.loaded[index]?1:0},alt=!noImages&&images[index].alt,imgStyle=this.state.loaded[index]?{}:{position:"absolute",width:0,height:0},positionIndicators=noPositionIndicators?void 0:_react2["default"].createElement("div",{className:"mdl-lightbox__position-indicators"},images.map(function(img,i){return _react2["default"].createElement("a",{key:i,href:"#",className:"mdl-lightbox__position-indicator"+(i===index?" is-active":""),onClick:function(evt){return _this6.nav(i,evt)},onTouchEnd:function(evt){return _this6.nav(i,evt)}},_react2["default"].createElement("b",null))})),imageCount=noImageCount?void 0:_react2["default"].createElement("div",{className:"mdl-lightbox__image-count"},index+1," / ",images.length),figcaption=caption?_react2["default"].createElement("figcaption",{className:"mdl-lightbox__caption"},caption):void 0,noFooter=!caption&&!positionIndicators&&!imageCount;return _react2["default"].createElement(Modal,{open:open,onCancel:this.cancel},_react2["default"].createElement("div",{className:"mdl-lightbox"+(open?" is-visible":"")},_react2["default"].createElement("div",{className:"mdl-lightbox__content"},noCloseButton?void 0:_react2["default"].createElement(_reactMdl.FABButton,{className:"mdl-lightbox__close-button",onClick:this.cancel,onTouchEnd:this.cancel},_react2["default"].createElement(_reactMdl.Icon,{name:"close"})),noImages?void 0:_react2["default"].createElement("figure",null,this.state.loaded[index]?"":_react2["default"].createElement(_reactMdl.Spinner,null),!this.state.loaded[index]&&alt?_react2["default"].createElement("img",{src:alt.src,style:alt.style}):"",_react2["default"].createElement("img",{onClick:this.imageClicked,onLoad:function(e){return _this6.imageLoaded(e,index)},onTouchEnd:this.imageClicked,src:images[index].src,style:_extends({},style,imgStyle)}),noFooter?void 0:_react2["default"].createElement("div",{className:"mdl-lightbox__footer"},positionIndicators,imageCount,figcaption)),noPreload||!this.state.loaded[index]?void 0:_react2["default"].createElement("div",{className:"mdl-lightbox__preload",style:{width:0,height:0,overflow:"hidden",opacity:0}},images.map(function(_ref2,i){var src=_ref2.src;return i===index?void 0:_react2["default"].createElement("img",{key:i,src:src,onLoad:function(e){return _this6.imageLoaded(e,i)}})}))),_react2["default"].createElement(_reactMdl.FABButton,{className:"mdl-lightbox__prev-button",disabled:noRotate&&0===index,onClick:this.prev,onTouchEnd:this.prev},_react2["default"].createElement(_reactMdl.Icon,{name:"navigate_before"})),_react2["default"].createElement(_reactMdl.FABButton,{className:"mdl-lightbox__next-button",disabled:noRotate&&index===images.length-1,onClick:this.next,onTouchEnd:this.next},_react2["default"].createElement(_reactMdl.Icon,{name:"navigate_next"}))))}}]),Lightbox}(_react.Component),_class4.displayName="Lightbox",_class4.propTypes={open:bool,images:arrayOf(shape({src:string.isRequired,srcset:array,caption:string})),index:number,onCancel:func,onNext:func,onPrev:func,onNav:func,noKeyboardInput:bool,noBackdropCancel:bool,noNextOnClick:bool,noCloseButton:bool,noImageCount:bool,noPositionIndicators:bool,noPreload:bool,noSpinner:bool,noRotate:bool,width:number},_class4.defaultProps={open:!1,images:[],index:0,noKeyboardInput:!1,noBackdropCancel:!1,noNextOnClick:!1,noCloseButton:!1,noImageCount:!1,noPositionIndicators:!1,noPreload:!1,noSpinner:!1,noRotate:!1,width:900},_temp4)},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;/*!
	  Copyright (c) 2016 Jed Watson.
	  Licensed under the MIT License (MIT), see
	  http://jedwatson.github.io/classnames
	*/
!function(){"use strict";function classNames(){for(var classes=[],i=0;i<arguments.length;i++){var arg=arguments[i];if(arg){var argType=typeof arg;if("string"===argType||"number"===argType)classes.push(arg);else if(Array.isArray(arg))classes.push(classNames.apply(null,arg));else if("object"===argType)for(var key in arg)hasOwn.call(arg,key)&&arg[key]&&classes.push(key)}}return classes.join(" ")}var hasOwn={}.hasOwnProperty;"undefined"!=typeof module&&module.exports?module.exports=classNames:(__WEBPACK_AMD_DEFINE_ARRAY__=[],__WEBPACK_AMD_DEFINE_RESULT__=function(){return classNames}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)))}()},function(module,exports,__webpack_require__){!function(e,t){module.exports=t()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t){(function(e){"use strict";function n(){var e=arguments.length<=0||void 0===arguments[0]?"":arguments[0];return"string"!=typeof e?n()(e):function(t){return"function"==typeof t?Object.defineProperty(t.prototype,"fetch",{value:u(e)}):Object.defineProperty(t,"fetch",{value:u(e).bind(t)}),t}}function r(){var e=arguments.length<=0||void 0===arguments[0]?"":arguments[0],t=arguments.length<=1||void 0===arguments[1]?null:arguments[1],n=arguments.length<=2||void 0===arguments[2]?i():arguments[2];return"string"!=typeof e?r()(e):function(r){var o="function"==typeof r?r.prototype:r;return Object.defineProperty(o,"__endpoint",{value:n&&t||e}),r}}function o(e){return function(t){var n="function"==typeof t?t.prototype:t;return Object.defineProperty(n,"__fetch",{value:e}),t}}function u(e){return function(){var t=arguments.length<=0||void 0===arguments[0]?"":arguments[0],n=arguments.length<=1||void 0===arguments[1]?void 0:arguments[1],r=arguments.length<=2||void 0===arguments[2]?!1:arguments[2];if(this.__endpoint)t=r&&t||this.__endpoint+e+t;else{t=!r&&e?e+t:t;for(var o=this;o=o.__parent;)if(o.fetch)return o.fetch(t,n,r)}return this.__fetch?this.__fetch(t,n):c(t,n)}}function i(){return"object"==("undefined"==typeof window?"undefined":f(window))&&"undefined"==typeof e}var f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};Object.defineProperty(t,"__esModule",{value:!0}),t.remote=n,t.endpoint=r,t.fetcher=o;var c="object"==("undefined"==typeof window?"undefined":f(window))&&window.fetch||e.fetch;t["default"]=n}).call(t,function(){return this}())}])})},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.Role=void 0;var _class,_Entity=__webpack_require__(3),_Entity2=_interopRequireDefault(_Entity),_ws=__webpack_require__(4),Role=(_interopRequireDefault(_ws),exports.Role=(0,_Entity2["default"])(_class=function Role(){_classCallCheck(this,Role)})||_class);Role.GUEST=new Role({id:1,name:"Guest"}),Role.USER=new Role({id:2,name:"User"}),Role.STORE_USER=new Role({id:3,name:"Store-User"}),Role.STORE_MANAGER=new Role({id:4,name:"Store-Manager"}),Role.BRAND_USER=new Role({id:5,name:"Brand-User"}),Role.BRAND_MANAGER=new Role({id:6,name:"Brand-Manager"}),Role.BRAUTSCHLOSS_USER=new Role({id:7,name:"Brautschloss-User"}),Role.BRAUTSCHLOSS_MANAGER=new Role({id:8,name:"Brautschloss-Manager"}),Role.ADMINISTRATOR=new Role({id:9,name:"Administrator"}),Role.BRAUTSCHLOSS_ROLES=[Role.BRAUTSCHLOSS_MANAGER,Role.BRAUTSCHLOSS_USER],Role.STORE_ROLES=[Role.STORE_MANAGER,Role.STORE_USER],Role.BRAND_ROLES=[Role.BRAND_MANAGER,Role.BRAND_USER],exports["default"]=Role},function(module,exports,__webpack_require__){(function(global){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function authenticatedCrossOriginFetchWithTimeout(url,opts){var _this2=this;_picolog2["default"].log("authenticatedCrossOriginFetchWithTimeout",url),opts=_extends({credentials:"include",mode:"cors"},opts),"object"==("undefined"==typeof global?"undefined":_typeof(global))&&global.session&&(opts.headers=opts.headers||{},opts.headers.Cookie="JSESSIONID="+global.session);var result=new Promise(function(resolve,reject){var timeout=setTimeout(function(){reject(Error("timed out after 30s."))},3e4);_picolog2["default"].debug("authenticatedCrossOriginFetchWithTimeout: fetching..."),fetch(url,opts).then(function(response){return clearTimeout(timeout),_picolog2["default"].debug("authenticatedCrossOriginFetchWithTimeout: got response ",response),response.status&&401===response.status?(_picolog2["default"].debug("authenticatedCrossOriginFetchWithTimeout: auth needed"),"object"==("undefined"==typeof window?"undefined":_typeof(window))?(_picolog2["default"].debug("authenticatedCrossOriginFetchWithTimeout: client, allow login"),response.json().then(function(json){return _picolog2["default"].debug("authenticatedCrossOriginFetchWithTimeout: calling auth.challenge..."),_this2.auth.challenge(json.challenge,resolve,reject)})["catch"](reject)):response.text().then(function(text){var error=Error(text);error.status=response.status,error.statusText=response.statusText,reject(error)})):void resolve(response)})["catch"](reject)});return result}function apiUrl(){if("object"==("undefined"==typeof window?"undefined":_typeof(window)))return window.__bridalapp_api_server||"http://api.bridalapp.net/api";var protocol={NODE_ENV:"production"}.BRIDALAPP_API_SERVER_PROTOCOL||"http://",host={NODE_ENV:"production"}.BRIDALAPP_API_SERVER_HOST||"localhost",port={NODE_ENV:"production"}.BRIDALAPP_API_SERVER_PORT||"8080",path={NODE_ENV:"production"}.BRIDALAPP_API_SERVER_PATH||"/api";return protocol+host+("80"==port?"":":"+port)+path}Object.defineProperty(exports,"__esModule",{value:!0}),exports.AppApi=void 0;var _dec,_dec2,_class,_class2,_temp,_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol?"symbol":typeof obj},_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_picolog=__webpack_require__(1),_picolog2=_interopRequireDefault(_picolog),_reduxApis=__webpack_require__(5),_reduxApis2=_interopRequireDefault(_reduxApis),_reduxFetchApi=__webpack_require__(9),_ws=__webpack_require__(4),_ws2=_interopRequireDefault(_ws),_Role=__webpack_require__(10),_Group=__webpack_require__(25),_Account=__webpack_require__(24),_api=__webpack_require__(16),_Brand=__webpack_require__(27),_api2=__webpack_require__(47),_Product=__webpack_require__(28),_Rating=__webpack_require__(29),_StockItem=__webpack_require__(30),_api3=__webpack_require__(53),_Store=__webpack_require__(31),_api4=__webpack_require__(56),_api5=__webpack_require__(18),API_URL=apiUrl();_picolog2["default"].info("Using BridalApp API Server url: ",API_URL);for(var idx=void 0,lastSlash=0;-1!==(idx=API_URL.indexOf("/",lastSlash+1));)lastSlash=idx;var SUID_URL=API_URL.substring(0,lastSlash)+"/suid/suid.json";_picolog2["default"].info("Using Suid Server url: ",SUID_URL),_ws2["default"].config({server:SUID_URL});exports.AppApi=(_dec=(0,_reduxFetchApi.fetcher)(authenticatedCrossOriginFetchWithTimeout),_dec2=(0,_reduxFetchApi.remote)(API_URL),_dec(_class=_dec2((_temp=_class2=function(_Api){function AppApi(){var state=arguments.length<=0||void 0===arguments[0]?AppApi.INITIAL_STATE:arguments[0];_classCallCheck(this,AppApi);var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(AppApi).call(this,state));return Object.defineProperties(_this,{Account:{enumerable:!0,value:_Account.Account},Brand:{enumerable:!0,value:_Brand.Brand},Group:{enumerable:!0,value:_Group.Group},Product:{enumerable:!0,value:_Product.Product},Rating:{enumerable:!0,value:_Rating.Rating},Role:{enumerable:!0,value:_Role.Role},StockItem:{enumerable:!0,value:_StockItem.StockItem},Store:{enumerable:!0,value:_Store.Store}}),_this.auth=(0,_reduxFetchApi.remote)("/auth")((0,_reduxApis.link)(_this,new _api.AuthApi)),_this.brands=(0,_reduxFetchApi.remote)("/brands")((0,_reduxApis.link)(_this,new _api2.BrandsApi)),_this.products=(0,_reduxFetchApi.remote)("/products")((0,_reduxApis.link)(_this,new _api3.ProductsApi)),_this.stores=(0,_reduxFetchApi.remote)("/stores")((0,_reduxApis.link)(_this,new _api4.StoresApi)),_this.leftDrawer=(0,_reduxApis.link)(_this,new _api5.DrawerApi),_this.rightDrawer=(0,_reduxApis.link)(_this,new _api5.DrawerApi),_this.lightbox=(0,_reduxApis.link)(_this,new _api5.LightboxApi),_this}return _inherits(AppApi,_Api),_createClass(AppApi,[{key:"authenticated",value:function(){return _picolog2["default"].debug("authenticated"),this.auth.authenticated()}},{key:"getSession",value:function(){return this.auth.session}}]),AppApi}(_reduxApis2["default"]),_class2.INITIAL_STATE={managedStores:[],managedStoreIndex:0,managedBrands:[],managedBrandIndex:0},_class2.SET_MANAGED_STORES="SET_MANAGED_STORES",_class2.SET_MANAGED_STORE_INDEX="SET_MANAGED_STORE_INDEX",_class2.SET_MANAGED_BRANDS="SET_MANAGED_BRANDS",_class2.SET_MANAGED_BRAND_INDEX="SET_MANAGED_BRAND_INDEX",_class=_temp))||_class)||_class)}).call(exports,function(){return this}())},function(module,exports,__webpack_require__){(function(global){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function createReducer(app){var rootReducer=(0,_redux.combineReducers)({app:app.reducer});return function(state,action){var currentState="@@bridalapp/RESET"===action.type?void 0:state;return rootReducer(currentState,action)}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.store=void 0;var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol?"symbol":typeof obj},_picolog=__webpack_require__(1),_picolog2=_interopRequireDefault(_picolog),_redux=__webpack_require__(37),_reduxThunk=__webpack_require__(70),_reduxThunk2=_interopRequireDefault(_reduxThunk),_reduxLogger=__webpack_require__(69),_reduxLogger2=_interopRequireDefault(_reduxLogger),_reduxApis=__webpack_require__(5),_Entity=__webpack_require__(3),storeEnhancer="object"==("undefined"==typeof window?"undefined":_typeof(window))?(0,_redux.compose)((0,_redux.applyMiddleware)(_reduxThunk2["default"],(0,_reduxLogger2["default"])({logger:_picolog2["default"]}))):(0,_redux.compose)((0,_redux.applyMiddleware)(_reduxThunk2["default"])),AppApi=__webpack_require__(11).AppApi,app=new AppApi,store=exports.store=(0,_redux.createStore)(createReducer(app),"object"==("undefined"==typeof window?"undefined":_typeof(window))&&window.bridalapp_initial_state&&(0,_Entity.fromJSON)(window.bridalapp_initial_state)||void 0,storeEnhancer);store.app=(0,_reduxApis.link)(store,app),exports["default"]=store,"object"==("undefined"==typeof window?"undefined":_typeof(window))?window.bridalapp=app:"object"==("undefined"==typeof global?"undefined":_typeof(global))&&(global.bridalapp=app)}).call(exports,function(){return this}())},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}exports.__esModule=!0,exports.connect=exports.Provider=void 0;var _Provider=__webpack_require__(61),_Provider2=_interopRequireDefault(_Provider),_connect=__webpack_require__(62),_connect2=_interopRequireDefault(_connect);exports.Provider=_Provider2["default"],exports.connect=_connect2["default"]},function(module,exports){"use strict";function is(x,y){return x===y?0!==x||1/x===1/y:x!==x&&y!==y}function shallowEqual(objA,objB){if(is(objA,objB))return!0;if("object"!=typeof objA||null===objA||"object"!=typeof objB||null===objB)return!1;var keysA=Object.keys(objA),keysB=Object.keys(objB);if(keysA.length!==keysB.length)return!1;for(var i=0;i<keysA.length;i++)if(!hasOwnProperty.call(objB,keysA[i])||!is(objA[keysA[i]],objB[keysA[i]]))return!1;return!0}var hasOwnProperty=Object.prototype.hasOwnProperty;module.exports=shallowEqual},function(module,exports){module.exports=ReactRouter},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function authenticated(target){function enhance(target){return _picolog2["default"].debug("authenticated",target),Object.defineProperties(target.prototype,{authenticated:{value:function(){for(var p=this;p=p.__parent;)if(p.authenticated)return p.authenticated();return Promise.reject(new Error("No authentication method"))}},getSession:{value:function(){for(var p=this;p=p.__parent;)if(p.getSession)return p.getSession();return null}},auth:{get:function(){for(var p=this;p=p.__parent;)if(p.auth)return p.auth}}}),_picolog2["default"].trace("authenticated => ",target),target}return target?enhance(target):enhance}function fetchSessionInfo(auth){return _picolog2["default"].debug("fetchSessionInfo"),auth.fetch("/session").then(function(response){return _picolog2["default"].debug("fetchSessionInfo => response.status=",response.status),200==response.status&&response.text()}).then(function(text){return _picolog2["default"].log("fetchSessionInfo => text=",text),(0,_Entity.fromJSON)(text)}).then(function(session){return processSession(auth,session)})}function processSession(auth,session){_picolog2["default"].log("processSession",session);var user=session.user,sessionId=session.sessionId;if(_picolog2["default"].debug("processSession => sessionId=",sessionId),_picolog2["default"].debug("processSession => user=",user),"object"==("undefined"==typeof document?"undefined":_typeof(document))){var maxAge=sessionId?864e3:0;document.cookie="BASESSION="+sessionId+"; Max-Age="+maxAge+"; path=/",_picolog2["default"].debug("processSession => cookie "+(maxAge?"set":"cleared"))}return user&&!auth.loggedIn?(_picolog2["default"].debug("fetchSessionInfo => Dispatching LOGGED_IN action",session),auth.dispatch(auth.createAction(AuthApi.LOGGED_IN)(session))):!user&&auth.loggedIn&&(_picolog2["default"].debug("fetchSessionInfo => Dispatching LOGGED_OUT action"),auth.dispatch(auth.createAction(AuthApi.LOGGED_OUT)(session))),session}function encode(challenge,username,password){return"application/x-www-form-urlencoded"===challenge.contentType?urlEncode(challenge,username,password):void(error=Error("Unable to encode the given credentials. Unsupported content type '"+challenge.contentType+"'."))}function urlEncode(challenge,username,password){var uf=encodeURIComponent(challenge.usernameField),u=encodeURIComponent(username),pf=encodeURIComponent(challenge.passwordField),p=encodeURIComponent(password);return uf+"="+u+"&"+pf+"="+p}Object.defineProperty(exports,"__esModule",{value:!0}),exports.AuthApi=exports.RegisterDialogApi=exports.LoginDialogApi=void 0;var _class,_class2,_temp,_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol?"symbol":typeof obj},_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();exports.authenticated=authenticated;var _picolog=__webpack_require__(1),_picolog2=_interopRequireDefault(_picolog),_reduxApis=__webpack_require__(5),_reduxApis2=_interopRequireDefault(_reduxApis),_reduxAsyncApi=__webpack_require__(34),_reduxAsyncApi2=_interopRequireDefault(_reduxAsyncApi),_reduxFetchApi=__webpack_require__(9),_api=__webpack_require__(18),_Entity=__webpack_require__(3),_ws=__webpack_require__(4),_ws2=_interopRequireDefault(_ws),_PasswordCredential=__webpack_require__(26),_PasswordCredential2=_interopRequireDefault(_PasswordCredential),_Account=__webpack_require__(24),_Account2=_interopRequireDefault(_Account),_Role=__webpack_require__(10),LoginDialogApi=(_interopRequireDefault(_Role),exports.LoginDialogApi=function(_Api){function LoginDialogApi(){var _Object$getPrototypeO;_classCallCheck(this,LoginDialogApi);for(var _len=arguments.length,args=Array(_len),_key=0;_len>_key;_key++)args[_key]=arguments[_key];var _this=_possibleConstructorReturn(this,(_Object$getPrototypeO=Object.getPrototypeOf(LoginDialogApi)).call.apply(_Object$getPrototypeO,[this].concat(args)));return _this.username=(0,_reduxApis.link)(_this,new _api.TextfieldApi),_this.username.type="text",_this.password=(0,_reduxApis.link)(_this,new _api.TextfieldApi),_this.password.type="password",_this}return _inherits(LoginDialogApi,_Api),LoginDialogApi}(_reduxApis2["default"])),RegisterDialogApi=exports.RegisterDialogApi=function(_Api2){function RegisterDialogApi(){var _Object$getPrototypeO2;_classCallCheck(this,RegisterDialogApi);for(var _len2=arguments.length,args=Array(_len2),_key2=0;_len2>_key2;_key2++)args[_key2]=arguments[_key2];var _this2=_possibleConstructorReturn(this,(_Object$getPrototypeO2=Object.getPrototypeOf(RegisterDialogApi)).call.apply(_Object$getPrototypeO2,[this].concat(args)));return _this2.username=(0,_reduxApis.link)(_this2,new _api.TextfieldApi),_this2.username.type="text",_this2.password=(0,_reduxApis.link)(_this2,new _api.TextfieldApi),_this2.password.type="password",_this2.confirm=(0,_reduxApis.link)(_this2,new _api.TextfieldApi),_this2.confirm.type="password",_this2}return _inherits(RegisterDialogApi,_Api2),RegisterDialogApi}(_reduxApis2["default"]),NULL_SESSION={sessionId:null,user:null},AuthApi=exports.AuthApi=(0,_reduxFetchApi.remote)((_temp=_class2=function(_Async){function AuthApi(){var state=arguments.length<=0||void 0===arguments[0]?AuthApi.INITIAL_STATE:arguments[0];_classCallCheck(this,AuthApi);var _this3=_possibleConstructorReturn(this,Object.getPrototypeOf(AuthApi).call(this,state));return _this3.setHandler(AuthApi.CHALLENGE,function(state,_ref){var payload=_ref.payload;return _extends({},state,{challenge:payload})}),_this3.setHandler(AuthApi.LOGGED_IN,function(state,_ref2){var payload=_ref2.payload;return _extends({},state,{session:payload,challenge:null})}),_this3.setHandler(AuthApi.LOGGED_OUT,function(state,_ref3){var payload=_ref3.payload;return _extends({},state,{session:payload,challenge:null})}),_this3.setHandler(AuthApi.CANCEL,function(state,action){return _extends({},state,{challenge:null})}),Object.defineProperties(_this3,{loggedIn:{enumerable:!0,get:function(){return!(!_this3.session||!_this3.session.user)}},challenged:{enumerable:!0,get:function(){return!(!_this3.challenge()||!_this3.challenge().url||_this3.challenge().accepted)}},session:{enumerable:!0,get:function(){return _this3.getState().session}}}),_this3.onProvoke=function(){return _this3.provoke()},_this3.onCancel=function(){return _this3.cancel()},_this3.onLogin=function(){return _this3.login()},_this3.onLogout=function(){return _this3.logout()},_this3.onRegister=function(){return _this3.register()},_this3.loginDialog=(0,_reduxApis.link)(_this3,new LoginDialogApi),_this3.registerDialog=(0,_reduxApis.link)(_this3,new RegisterDialogApi),_this3}return _inherits(AuthApi,_Async),_createClass(AuthApi,[{key:"loadSession",value:function(){var _this4=this;return _picolog2["default"].debug("loadSession"),this.setBusy(),fetchSessionInfo(this).then(function(session){return _picolog2["default"].log("loadSession => ",session),_this4.setDone(),session})}},{key:"login",value:function(username,password){function remoteLogin(auth,challenge){return _picolog2["default"].debug("remoteLogin",auth,challenge),auth.fetch(challenge.url,{method:challenge.method,headers:{"Content-Type":challenge.contentType},body:encode(challenge,username,password)}).then(function(response){return _picolog2["default"].debug("remoteLogin => ",response),fetchSessionInfo(auth).then(function(session){return auth.setDone(),challenge.resolve(response),session})})["catch"](function(error){auth.setError(error),challenge.reject(error)})}var _this5=this;return void 0===username?this.login(this.loginDialog.username.value,this.loginDialog.password.value):this.loggedIn?void _picolog2["default"].log("Already logged in as `"+this.session.user.name+"`: ",this.session.user):(this.setBusy(),this.dispatch(function(){return new Promise(function(resolve,reject){return _this5.challenge()?remoteLogin(_this5,_this5.challenge()).then(resolve)["catch"](reject):(_picolog2["default"].debug("Provoking login challenge"),_this5.provoke().then(function(challenge){return _picolog2["default"].debug("Server issued a login challenge"),remoteLogin(_this5,challenge).then(resolve)["catch"](reject)}))}).then(function(results){return _picolog2["default"].debug("Login",username),results})}))}},{key:"logout",value:function(){var _this6=this;return _picolog2["default"].debug("logout",this.session.user),this.dispatch(function(){return _this6.setBusy(),_this6.cancel(),_this6.fetch("/logout")["catch"]().then(function(){_this6.setDone(),_this6.dispatch(_this6.createAction(AuthApi.LOGGED_OUT)(NULL_SESSION))})})}},{key:"register",value:function(username,password,confirm){var _this7=this;return void 0===username?this.register(this.registerDialog.username.value,this.registerDialog.password.value,this.registerDialog.confirm.value):(_picolog2["default"].log("register",username,password,confirm),this.setBusy(),this.dispatch(function(){return new Promise(function(resolve,reject){var account=new _Account2["default"](_ws2["default"].next(),username,[new _PasswordCredential2["default"](_ws2["default"].next(),password)]);return _picolog2["default"].log("register: creating account",account),_this7.fetch("/accounts",{method:"POST",headers:{"Content-Type":"application/json"},body:(0,_Entity.toJSON)(account)}).then(function(response){return response.text()}).then(function(text){return(0,_Entity.fromJSON)(text)}).then(function(account){_picolog2["default"].log("register: created account",account),_this7.login(username,password).then(function(result){_this7.setDone(),resolve(result)})["catch"](function(error){_picolog2["default"].error(error),_this7.setError(error)})})["catch"](function(error){_picolog2["default"].error(error),_this7.setError(error)})})["catch"](function(error){_picolog2["default"].error(error),_this7.setError(error)})}))}},{key:"cancel",value:function(){var _this8=this;return _picolog2["default"].log("cancel"),this.dispatch(function(){var c=_this8.challenge();if(c){var _error=Error("Login/registration cancelled");_this8.setError(_error),_this8.dispatch(_this8.createAction(AuthApi.CANCEL)()),c.reject&&c.reject(_error)}})}},{key:"authenticated",value:function(){_picolog2["default"].log("authenticated");var auth=this;return new Promise(function(resolve,reject){auth.loggedIn?resolve(auth.session):auth.provoke(resolve,reject)})}},{key:"provoke",value:function(resolve,reject){var _this9=this;return _picolog2["default"].log("provoke",resolve,reject),new Promise(function(accept,deny){_this9.challenge({},accept,deny),_picolog2["default"].debug("provoke: calling /challenge..."),_this9.fetch("/challenge").then(function(response){return _picolog2["default"].debug("provoke: got response ",response),response&&200==response.status?response.text():response.text().then(function(text){var error=new Error(text);throw error.status=response.status,error.statusText=response.statusText,error})}).then(function(text){return(0,_Entity.fromJSON)(text)}).then(function(session){return processSession(_this9,session)}).then(function(session){return _picolog2["default"].log("provoke: got session ",session),resolve&&(_picolog2["default"].debug("provoke: calling resolve ",resolve),resolve(session)),session})["catch"](function(error){_picolog2["default"].info("Provoking login challenge failed.",error),reject&&(_picolog2["default"].debug("provoke: calling reject ",reject),reject(error))})})}},{key:"challenge",value:function(_challenge){function challenge(_x,_x2,_x3){return _challenge.apply(this,arguments)}return challenge.toString=function(){return _challenge.toString()},challenge}(function(challenge,resolve,reject){if(!challenge)return this.getState().challenge;"object"!=("undefined"==typeof window?"undefined":_typeof(window))&&reject(new Error("Unauthorized")),_picolog2["default"].info("challenge",challenge,resolve,reject);var c=this.getState().challenge;c&&c.url&&(_picolog2["default"].info("challenge: rejecting previous challenge..."),c.reject(new Error("Login challenge cancelled"))),challenge.resolve=resolve,challenge.reject=reject,_picolog2["default"].info("dispatching challenge",challenge),this.dispatch(this.createAction(AuthApi.CHALLENGE)(challenge)),c&&!c.url&&c.resolve&&challenge.url&&(_picolog2["default"].info("challenge: resolving provocation...",c.resolve),c.resolve(challenge))})},{key:"is",value:function(role){_picolog2["default"].debug("is",role);var roles=this.session.user&&this.session.user.roles||[];return-1!==(0,_Entity.indexOf)(roles,role)}},{key:"isAny",value:function(roles){_picolog2["default"].debug("isAny");for(var role,i=0;role=roles[i];i++)if(this.is(role))return!0;return!1}},{key:"isAll",value:function(roles){_picolog2["default"].debug("isAll");for(var role,i=0;role=roles[i];i++)if(!this.is(role))return!1;return!0}}]),AuthApi}(_reduxAsyncApi2["default"]),_class2.CHALLENGE="AUTH_CHALLENGE",_class2.LOGGED_IN="LOGGED_IN",_class2.LOGGED_OUT="LOGGED_OUT",_class2.CANCEL="CANCEL_AUTH",_class2.INITIAL_STATE=_extends({},_reduxAsyncApi2["default"].INITIAL_STATE,{session:NULL_SESSION,challenge:null}),_class=_temp))||_class;exports["default"]=AuthApi},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _objectWithoutProperties(obj,keys){var target={};for(var i in obj)keys.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(obj,i)&&(target[i]=obj[i]);return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.FilterPanel=void 0;var _class,_temp,_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_picolog=__webpack_require__(1),_picolog2=_interopRequireDefault(_picolog),_react=__webpack_require__(2),_react2=_interopRequireDefault(_react),_reactMdl=__webpack_require__(6),_classnames=__webpack_require__(8),_classnames2=_interopRequireDefault(_classnames),_mdlExtras=__webpack_require__(7),_FilterFields=(__webpack_require__(3),__webpack_require__(48)),_FilterFields2=_interopRequireDefault(_FilterFields),bool=_react.PropTypes.bool,string=_react.PropTypes.string,object=(_react.PropTypes.array,_react.PropTypes.object),func=_react.PropTypes.func,shape=_react.PropTypes.shape,FilterPanel=(_react.PropTypes.any,exports.FilterPanel=(_temp=_class=function(_Component){function FilterPanel(){var _Object$getPrototypeO;_classCallCheck(this,FilterPanel);for(var _len=arguments.length,args=Array(_len),_key=0;_len>_key;_key++)args[_key]=arguments[_key];return _possibleConstructorReturn(this,(_Object$getPrototypeO=Object.getPrototypeOf(FilterPanel)).call.apply(_Object$getPrototypeO,[this].concat(args)))}return _inherits(FilterPanel,_Component),_createClass(FilterPanel,[{key:"componentDidMount",value:function(){_picolog2["default"].debug("componentDidMount()")}},{key:"searchClicked",value:function(event){var _props=this.props,location=_props.location,onApplyFields=(_props.values,_props.onApplyFields),onCancel=(_props.onSearch,_props.onCancel),router=this.context.router;event&&event.preventDefault();var newValues=onApplyFields();onCancel();var pathname=location.pathname,query=(newValues.category,_objectWithoutProperties(newValues,["category"]));router.push({pathname:pathname,query:query})}},{key:"renderFilterFields",value:function(){return _react2["default"].createElement(_FilterFields2["default"],this.props)}},{key:"render",value:function(){var _props2=this.props,open=_props2.open,onCancel=(_props2.fields,
_props2.onCancel),className=_props2.className,classes=(_props2.children,(0,_classnames2["default"])("FilterPanel",className,{"is-open":open})),filterFields=this.renderFilterFields();return _react2["default"].createElement(_mdlExtras.Modal,{open:open,onCancel:onCancel},_react2["default"].createElement(_reactMdl.Card,{className:classes},open?filterFields:void 0,_react2["default"].createElement(_reactMdl.CardActions,null,_react2["default"].createElement("div",{className:"FilterActions"},_react2["default"].createElement(_reactMdl.Button,{colored:!0,raised:!0,onClick:this.searchClicked.bind(this)},"Search"),_react2["default"].createElement(_reactMdl.Button,{onClick:onCancel},"Cancel")))))}}]),FilterPanel}(_react.Component),_class.propTypes={open:bool.isRequired,values:object.isRequired,fields:shape({q:shape({value:string,onChange:func}).isRequired}).isRequired,onApplyFields:func.isRequired,onSearch:func.isRequired,onCancel:func.isRequired,location:shape({pathname:string.isRequired}).isRequired},_class.contextTypes={router:object.isRequired},_temp));exports["default"]=FilterPanel},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _objectWithoutProperties(obj,keys){var target={};for(var i in obj)keys.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(obj,i)&&(target[i]=obj[i]);return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.LightboxApi=exports.DrawerApi=exports.TextfieldApi=void 0;var _class,_temp,_class2,_temp2,_class3,_temp3,_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_picolog=__webpack_require__(1),_picolog2=_interopRequireDefault(_picolog),_reduxApis=__webpack_require__(5),_reduxApis2=_interopRequireDefault(_reduxApis);exports.TextfieldApi=(_temp=_class=function(_Api){function TextfieldApi(){var state=arguments.length<=0||void 0===arguments[0]?TextfieldApi.INITIAL_STATE:arguments[0];_classCallCheck(this,TextfieldApi);var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(TextfieldApi).call(this,state));return _this.setHandler(TextfieldApi.SET_VALUE,function(state,_ref){var payload=_ref.payload;return _extends({},state,{value:payload})}),Object.defineProperties(_this,{value:{enumerable:!0,get:function(){return _this.getState().value}}}),_this.onChange=_this.setValue.bind(_this),_this}return _inherits(TextfieldApi,_Api),_createClass(TextfieldApi,[{key:"setValue",value:function(value){return this.dispatch(this.createAction(TextfieldApi.SET_VALUE)(void 0===value?"":value))}}]),TextfieldApi}(_reduxApis2["default"]),_class.INITIAL_STATE={value:""},_class.SET_VALUE="SET_VALUE",_temp),exports.DrawerApi=(_temp2=_class2=function(_Api2){function DrawerApi(){var state=arguments.length<=0||void 0===arguments[0]?DrawerApi.INITIAL_STATE:arguments[0];_classCallCheck(this,DrawerApi);var _this2=_possibleConstructorReturn(this,Object.getPrototypeOf(DrawerApi).call(this,state));return _this2.setHandler(DrawerApi.OPEN,function(state,action){return _extends({},state,{open:!0})}),_this2.setHandler(DrawerApi.CLOSE,function(state,action){return _extends({},state,{open:!1})}),Object.defineProperties(_this2,{open:{enumerable:!0,get:function(){return _this2.getState().open}}}),_this2.onCancel=_this2.closeDrawer.bind(_this2),_this2.onActivate=_this2.openDrawer.bind(_this2),_this2}return _inherits(DrawerApi,_Api2),_createClass(DrawerApi,[{key:"openDrawer",value:function(){return _picolog2["default"].debug("openDrawer"),this.dispatch(this.createAction(DrawerApi.OPEN)())}},{key:"closeDrawer",value:function(){return _picolog2["default"].debug("closeDrawer"),this.dispatch(this.createAction(DrawerApi.CLOSE)())}}]),DrawerApi}(_reduxApis2["default"]),_class2.INITIAL_STATE={open:!1},_class2.OPEN="OPEN",_class2.CLOSE="CLOSE",_temp2),exports.LightboxApi=(_temp3=_class3=function(_Api3){function LightboxApi(){var state=arguments.length<=0||void 0===arguments[0]?LightboxApi.INITIAL_STATE:arguments[0];_classCallCheck(this,LightboxApi);var _this3=_possibleConstructorReturn(this,Object.getPrototypeOf(LightboxApi).call(this,state));return _this3.setHandler(LightboxApi.OPEN,function(state,_ref2){var _ref2$payload=_ref2.payload,images=_ref2$payload.images,index=_ref2$payload.index;return _extends({},state,{open:!0,images:images,index:index})}),_this3.setHandler(LightboxApi.NEXT,function(_ref3){var images=_ref3.images,index=_ref3.index,state=_objectWithoutProperties(_ref3,["images","index"]);return _extends({},state,{images:images,index:index<images.length-1?index+1:index})}),_this3.setHandler(LightboxApi.PREV,function(_ref4){var index=_ref4.index,state=_objectWithoutProperties(_ref4,["index"]);return _extends({},state,{index:index>0?index-1:index})}),_this3.setHandler(LightboxApi.NAV,function(_ref5,_ref6){var state=(_ref5.index,_objectWithoutProperties(_ref5,["index"])),payload=_ref6.payload;return _extends({},state,{index:payload})}),_this3.setHandler(LightboxApi.CANCEL,function(state,action){return _extends({},state,{open:!1,images:[],index:0})}),Object.defineProperties(_this3,{open:{enumerable:!0,get:function(){return _this3.getState()&&_this3.getState().open}},index:{enumerable:!0,get:function(){return _this3.getState()&&_this3.getState().index}},images:{enumerable:!0,get:function(){return _this3.getState()&&_this3.getState().images}},onOpenLightbox:{enumerable:!0,value:_this3.openLightbox.bind(_this3)},onCancel:{enumerable:!0,value:_this3.cancel.bind(_this3)},onNext:{enumerable:!0,value:_this3.next.bind(_this3)},onPrev:{enumerable:!0,value:_this3.prev.bind(_this3)},onNav:{enumerable:!0,value:_this3.nav.bind(_this3)}}),_this3}return _inherits(LightboxApi,_Api3),_createClass(LightboxApi,[{key:"openLightbox",value:function(){var images=arguments.length<=0||void 0===arguments[0]?[]:arguments[0],index=arguments.length<=1||void 0===arguments[1]?0:arguments[1];return _picolog2["default"].log("openLightbox",images,index),this.dispatch(this.createAction(LightboxApi.OPEN)({images:images,index:index}))}},{key:"next",value:function(){_picolog2["default"].log("next"),this.dispatch(this.createAction(LightboxApi.NEXT)())}},{key:"prev",value:function(){_picolog2["default"].log("prev"),this.dispatch(this.createAction(LightboxApi.PREV)())}},{key:"nav",value:function(idx){_picolog2["default"].log("nav",idx),this.dispatch(this.createAction(LightboxApi.NAV)(idx))}},{key:"cancel",value:function(){_picolog2["default"].log("cancel"),this.dispatch(this.createAction(LightboxApi.CANCEL)())}}]),LightboxApi}(_reduxApis2["default"]),_class3.INITIAL_STATE={open:!1,images:[],index:0},_class3.OPEN="OPEN",_class3.NEXT="NEXT",_class3.PREV="PREV",_class3.NAV="NAV",_class3.CANCEL="CANCEL",_temp3)},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.Publication=void 0;var _class,_temp,_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_picolog=__webpack_require__(1),_picolog2=_interopRequireDefault(_picolog),_react=__webpack_require__(2),func=(_interopRequireDefault(_react),_react.PropTypes.object,_react.PropTypes.func),Publication=exports.Publication=(_temp=_class=function(_Component){function Publication(){var _Object$getPrototypeO;_classCallCheck(this,Publication);for(var _len=arguments.length,props=Array(_len),_key=0;_len>_key;_key++)props[_key]=arguments[_key];return _possibleConstructorReturn(this,(_Object$getPrototypeO=Object.getPrototypeOf(Publication)).call.apply(_Object$getPrototypeO,[this].concat(props)))}return _inherits(Publication,_Component),_createClass(Publication,[{key:"mayPublish",value:function(item){return this.props.onMayPublish(item)}},{key:"publishClicked",value:function(item,event){return _picolog2["default"].log("publishClicked",item,event),event.preventDefault(),this.props.onPublish(item)}},{key:"unpublishClicked",value:function(item,event){return _picolog2["default"].log("unpublishClicked",item,event),event.preventDefault(),this.props.onUnpublish(item)}}]),Publication}(_react.Component),_class.propTypes={onMayPublish:func.isRequired,onPublish:func.isRequired,onUnpublish:func.isRequired},_temp);exports["default"]=Publication},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}return Array.from(arr)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.PublicationApi=void 0;var _class,_class2,_temp,_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_picolog=__webpack_require__(1),_picolog2=_interopRequireDefault(_picolog),_reduxFetchApi=(__webpack_require__(5),__webpack_require__(9)),_Entity=__webpack_require__(3),_api=__webpack_require__(49),_api2=__webpack_require__(16),_Role=__webpack_require__(10),_Role2=_interopRequireDefault(_Role),PublicationApi=exports.PublicationApi=(0,_reduxFetchApi.remote)(_class=(0,_api2.authenticated)((_temp=_class2=function(_EntityApi){function PublicationApi(){var state=arguments.length<=0||void 0===arguments[0]?PublicationApi.INITIAL_STATE:arguments[0];_classCallCheck(this,PublicationApi);var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(PublicationApi).call(this,state));return _this.item.onMayPublish=_this.mayPublish.bind(_this),_this.item.onPublish=_this.publish.bind(_this),_this.item.onUnpublish=_this.unpublish.bind(_this),_this}return _inherits(PublicationApi,_EntityApi),_createClass(PublicationApi,[{key:"mayPublish",value:function(item){if(_picolog2["default"].trace("mayPublish",item,this,this.getSession),this.getSession().user)for(var role,i=0;role=this.getSession().user.roles[i];i++)if(role.equals(_Role2["default"].BRAUTSCHLOSS_USER)||role.equals(_Role2["default"].BRAUTSCHLOSS_MANAGER)||role.equals(_Role2["default"].ADMINISTRATOR))return _picolog2["default"].trace("mayPublish => true"),!0;return _picolog2["default"].trace("mayPublish => false"),!1}},{key:"setPublished",value:function(item,published){var _this2=this;_picolog2["default"].debug("setPublished",item,published);var newItem=item.clone();return newItem.published=published,this.save(newItem).then(function(saved){_picolog2["default"].debug("saved successfully",saved);var newItems=[].concat(_toConsumableArray(_this2.items)),idx=(0,_Entity.indexOf)(newItems,item);return newItems[idx]=saved,_this2.setItems(newItems),saved})["catch"](function(error){_picolog2["default"].error("Unable to change published status for item "+item+".",error)})}},{key:"publish",value:function(item){return _picolog2["default"].log("publish",item),this.setPublished(item,!0)}},{key:"unpublish",value:function(item){return _picolog2["default"].log("unpublish",item),this.setPublished(item,!1)}}]),PublicationApi}(_api.EntityApi),_class2.INITIAL_STATE=_extends({},_api.EntityApi.INITIAL_STATE),_class=_temp))||_class)||_class;exports["default"]=PublicationApi},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function arraysEqual(a,b){if(!a||!b)return!1;if(a.length!=b.length)return!1;for(var i=0,length=a.length;length>i;i++)if(a[i]!=b[i])return!1;return!0}function posFromWindow(horizontal,element){var dir=horizontal?"Left":"Top";return element&&element!==window?element["offset"+dir]+posFromWindow(horizontal,element.offsetParent):0}function posDifference(horizontal,element,container){return posFromWindow(horizontal,element)-posFromWindow(horizontal,container)}function getSize(horizontal,element){var dir=horizontal?"Width":"Height";return"undefined"!=typeof element["inner"+dir]?element["inner"+dir]:element["client"+dir]}function getScrollPos(horizontal,element){var res=void 0,_ref=horizontal?{axis:"X",dir:"Left"}:{axis:"Y",dir:"Top"},axis=_ref.axis,dir=_ref.dir;return element===window?(res=window["page"+axis+"Offset"],null==res&&(res=document.documentElement["scroll"+dir]),null==res&&(res=document.body["scroll"+dir])):(res=element["scroll"+axis],null==res&&(res=element["scroll"+dir])),null==res?0:res}function debounce(func,wait,immediate){if(!wait)return func;var timeout;return function(){var context=this,args=arguments,later=function(){timeout=null,immediate||func.apply(context,args)},callNow=immediate&&!timeout;clearTimeout(timeout),timeout=setTimeout(later,wait),callNow&&func.apply(context,args)}}Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=void 0;var _class,_temp,_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol?"symbol":typeof obj},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_picolog=__webpack_require__(1),_picolog2=_interopRequireDefault(_picolog),_react=__webpack_require__(2),_react2=_interopRequireDefault(_react),_reactDom=__webpack_require__(23),_reactDom2=_interopRequireDefault(_reactDom),Scroller=(_temp=_class=function(_React$Component){function Scroller(){var _Object$getPrototypeO;_classCallCheck(this,Scroller);for(var _len=arguments.length,args=Array(_len),_key=0;_len>_key;_key++)args[_key]=arguments[_key];_picolog2["default"].debug.apply(_picolog2["default"],["Scroller"].concat(args));var _this=_possibleConstructorReturn(this,(_Object$getPrototypeO=Object.getPrototypeOf(Scroller)).call.apply(_Object$getPrototypeO,[this].concat(args))),_this$props=_this.props,items=_this$props.items,itemSize=_this$props.itemSize,initialItemsInView=_this$props.initialItemsInView,itemsInView=(_this$props.bufferBefore,_this$props.bufferAfter,Math.min(initialItemsInView,items.length)),renderedItems=items.slice(0,itemsInView),sizeItems=itemsInView*itemSize;return _this.state={horizontal:!1,renderedItems:renderedItems,sizeBefore:0,sizeItems:sizeItems,sizeAfter:(items.length-itemsInView)*itemSize,itemSize:itemSize,firstRenderedItemIndex:0,lastRenderedItemIndex:itemsInView-1,size:sizeItems},_this.onScroll=_this.onScroll.bind(_this),_this}return _inherits(Scroller,_React$Component),_createClass(Scroller,[{key:"getState",value:function(props){for(var win="object"==("undefined"==typeof window?"undefined":_typeof(window))&&window,w=win&&window.innerWidth||767,horizontal=win&&480>w,scroller=this.mounted?_reactDom2["default"].findDOMNode(this):void 0,scrollPos=scroller?getScrollPos(horizontal,scroller):0,items=props.items,bufferBefore=props.bufferBefore,bufferAfter=props.bufferAfter,itemSize=horizontal?w:props.itemSize,itemsPer=win?w>1024?3:w>767?2:1:1,containerCount=~~(items.length/itemsPer)+(~~(items.length%itemsPer)?1:0),scrollerSize=scroller?getSize(horizontal,scroller):Math.min(initialItemsInView,containerCount)*itemSize,slider=this.refs.slider,renderedItems=(scroller?posDifference(horizontal,slider,scroller):0,[]),containersBefore=~~(scrollPos/itemSize),bufBefore=Math.min(containersBefore,bufferBefore),skippedContainers=containersBefore-bufBefore,skippedItems=skippedContainers*itemsPer,firstIdx=skippedItems,containersInView=~~(scrollerSize/itemSize)+(~~(scrollerSize%itemSize)?2:1),lastIdx=Math.min(firstIdx+containersInView*itemsPer+bufferAfter*itemsPer,items.length-1),i=firstIdx;lastIdx>=i;i++){var item=items[i]||null;renderedItems.push(item)}var renderedContainerCount=~~(renderedItems.length/itemsPer)+(~~(renderedItems.length%itemsPer)?1:0),sizeBefore=~~(firstIdx/itemsPer)*itemSize,sizeItems=renderedContainerCount*itemSize,sizeAfter=containerCount*itemSize-sizeBefore-sizeItems;return{horizontal:horizontal,renderedItems:renderedItems,sizeBefore:sizeBefore,sizeItems:sizeItems,sizeAfter:sizeAfter,itemSize:itemSize,firstRenderedItemIndex:firstIdx,lastRenderedItemIndex:lastIdx,size:scrollerSize}}},{key:"shouldComponentUpdate",value:function(nextProps,nextState){return _picolog2["default"].debug("shouldComponentUpdate",nextProps,nextState),this.state.size!==nextState.size?!0:this.state.sizeBefore!==nextState.sizeBefore?!0:this.state.sizeAfter!==nextState.sizeAfter?!0:this.props.items!==nextProps.items?!0:this.props.state!==nextProps.state?!0:this.props.items.length!==nextProps.items.length?!0:arraysEqual(this.state.renderedItems,nextState.renderedItems)?!arraysEqual(this.props.items,nextProps.items):!0}},{key:"componentWillReceiveProps",value:function(nextProps){_picolog2["default"].debug("componentWillReceiveProps",nextProps),this.setState(this.getState(nextProps))}},{key:"componentDidMount",value:function(){_picolog2["default"].debug("componentDidMount"),this.mounted=!0,this.onScrollDebounced=window.innerWidth<480?debounce(this.onScroll,this.props.scrollDebounce,!1):this.onScroll,this.setState(this.getState(this.props)),_reactDom2["default"].findDOMNode(this).addEventListener("scroll",this.onScrollDebounced)}},{key:"componentWillUnmount",value:function(){_picolog2["default"].debug("componentWillUnmount"),_reactDom2["default"].findDOMNode(this).removeEventListener("scroll",this.onScrollDebounced),this.mounted=!1}},{key:"onScroll",value:function(){_picolog2["default"].trace("onscroll"),this.setState(this.getState(this.props))}},{key:"render",value:function(){var _this2=this;_picolog2["default"].debug("render",this.props,this.state);var slider={},before={},after={},itm={},dim=this.state.horizontal?"width":"height";return slider[dim]=this.state.sizeBefore+this.state.sizeItems+this.state.sizeAfter,before[dim]=this.state.sizeBefore,itm[dim]=this.state.itemSize,after[dim]=this.state.sizeAfter,_react2["default"].createElement("div",{className:"Scroller"},_react2["default"].createElement("div",{className:"ScrollSlider",ref:"slider",style:slider},_react2["default"].createElement("div",{className:"ScrollSpacer ScrollSpacerBefore",ref:"spacerBefore",style:before}),this.state.renderedItems.map(function(item,idx){idx+=_this2.state.firstRenderedItemIndex;var key=_this2.props.keyForItem?_this2.props.keyForItem(item,idx):"item"+idx,renderItem=_this2.props.renderItem;return null===item&&(_this2.props.renderLoadingItem?renderItem=_this2.props.renderLoadingItem:item={}),_react2["default"].createElement("div",{className:"ScrollItem",key:key,style:itm},renderItem(item,idx))}),_react2["default"].createElement("div",{className:"ScrollSpacer ScrollSpacerAfter",ref:"spacerAfter",style:after})))}}]),Scroller}(_react2["default"].Component),_class.propTypes={items:_react2["default"].PropTypes.oneOfType([_react2["default"].PropTypes.object,_react2["default"].PropTypes.array]),itemSize:_react2["default"].PropTypes.number.isRequired,initialItemsInView:_react2["default"].PropTypes.number,bufferBefore:_react2["default"].PropTypes.number,bufferAfter:_react2["default"].PropTypes.number,snap:_react2["default"].PropTypes.bool,renderItem:_react2["default"].PropTypes.func.isRequired,keyForItem:_react2["default"].PropTypes.func,slugForItem:_react2["default"].PropTypes.func,scrollDebounce:_react2["default"].PropTypes.number,itemCount:_react2["default"].PropTypes.number,pageSize:_react2["default"].PropTypes.number,pageBufferSize:_react2["default"].PropTypes.number,pageFetch:_react2["default"].PropTypes.func,renderLoadingItem:_react2["default"].PropTypes.func},_class.defaultProps={items:{0:[]},itemSize:560,initialItemsInView:20,bufferBefore:1,bufferAfter:1,scrollDebounce:100,snap:!1},_temp);exports["default"]=Scroller},function(module,exports,__webpack_require__){!function(e,o){module.exports=o()}(this,function(){return function(e){function o(n){if(t[n])return t[n].exports;var r=t[n]={exports:{},id:n,loaded:!1};return e[n].call(r.exports,r,r.exports,o),r.loaded=!0,r.exports}var t={};return o.m=e,o.c=t,o.p="",o(0)}([function(e,o){"use strict";function t(e){return function(o){return o.onload=e,o}}function n(e,o){return Promise.all(e.filter(function(e){return e.onload}).map(function(e){return Promise.resolve(e.onload(o))}))}Object.defineProperty(o,"__esModule",{value:!0}),o.onload=t,o.load=n}])})},function(module,exports){module.exports=ReactDOM},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.Account=void 0;var _class,_Entity=__webpack_require__(3),_Entity2=_interopRequireDefault(_Entity),_Role=__webpack_require__(10),_Role2=_interopRequireDefault(_Role),_Group=__webpack_require__(25),_PasswordCredential=(_interopRequireDefault(_Group),__webpack_require__(26)),_ws=(_interopRequireDefault(_PasswordCredential),__webpack_require__(4)),Account=(_interopRequireDefault(_ws),exports.Account=(0,_Entity2["default"])(_class=function Account(id,name){var credentials=arguments.length<=2||void 0===arguments[2]?[]:arguments[2],roles=arguments.length<=3||void 0===arguments[3]?[_Role2["default"].USER]:arguments[3],groups=arguments.length<=4||void 0===arguments[4]?[]:arguments[4];_classCallCheck(this,Account),this.id=id||0,this.version=null,this.name=name,this.credentials=credentials,this.roles=roles,this.groups=groups})||_class);exports["default"]=Account},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.Group=void 0;var _class,_Entity=__webpack_require__(3),_Entity2=_interopRequireDefault(_Entity),Group=exports.Group=(0,_Entity2["default"])(_class=function Group(id,name){_classCallCheck(this,Group),this.id=id,this.name=name})||_class;exports["default"]=Group},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.PasswordCredential=void 0;var _class,_Entity=__webpack_require__(3),_Entity2=_interopRequireDefault(_Entity),_Credential2=__webpack_require__(43),_Credential3=_interopRequireDefault(_Credential2),PasswordCredential=exports.PasswordCredential=(0,_Entity2["default"])(_class=function(_Credential){function PasswordCredential(id,password){_classCallCheck(this,PasswordCredential);var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(PasswordCredential).call(this,id));return _this.password=password,_this}return _inherits(PasswordCredential,_Credential),PasswordCredential}(_Credential3["default"]))||_class;exports["default"]=PasswordCredential},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.Brand=void 0;var _class,_Entity=__webpack_require__(3),_Entity2=_interopRequireDefault(_Entity),_ws=__webpack_require__(4),Brand=(_interopRequireDefault(_ws),exports.Brand=(0,_Entity2["default"])(_class=function Brand(){_classCallCheck(this,Brand)})||_class);exports["default"]=Brand},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.Product=void 0;var _class,_ws=__webpack_require__(4),_Entity=(_interopRequireDefault(_ws),__webpack_require__(3)),_Entity2=_interopRequireDefault(_Entity),Product=exports.Product=(0,_Entity2["default"])(_class=function Product(){_classCallCheck(this,Product)})||_class;exports["default"]=Product},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.Rating=void 0;var _class,_Entity=__webpack_require__(3),_Entity2=_interopRequireDefault(_Entity),_ws=__webpack_require__(4),Rating=(_interopRequireDefault(_ws),exports.Rating=(0,_Entity2["default"])(_class=function Rating(){_classCallCheck(this,Rating)})||_class);exports["default"]=Rating},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.StockItem=void 0;var _class,_ws=__webpack_require__(4),_Entity=(_interopRequireDefault(_ws),__webpack_require__(3)),_Entity2=_interopRequireDefault(_Entity),StockItem=exports.StockItem=(0,_Entity2["default"])(_class=function StockItem(){_classCallCheck(this,StockItem)})||_class;exports["default"]=StockItem},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.Store=void 0;var _class,_Entity=__webpack_require__(3),_Entity2=_interopRequireDefault(_Entity),_ws=__webpack_require__(4),Store=(_interopRequireDefault(_ws),exports.Store=(0,_Entity2["default"])(_class=function Store(){_classCallCheck(this,Store)})||_class);exports["default"]=Store},function(module,exports,__webpack_require__){
"use strict";exports.__esModule=!0;var _react=__webpack_require__(2);exports["default"]=_react.PropTypes.shape({subscribe:_react.PropTypes.func.isRequired,dispatch:_react.PropTypes.func.isRequired,getState:_react.PropTypes.func.isRequired})},function(module,exports){"use strict";function warning(message){"undefined"!=typeof console&&"function"==typeof console.error&&console.error(message);try{throw new Error(message)}catch(e){}}exports.__esModule=!0,exports["default"]=warning},function(module,exports,__webpack_require__){!function(e,t){module.exports=t(__webpack_require__(5))}(this,function(e){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Async=void 0;var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=n(1),p=r(f),l=t.Async=function(e){function t(){var e=arguments.length<=0||void 0===arguments[0]?t.INITIAL_STATE:arguments[0];o(this,t);var n=i(this,Object.getPrototypeOf(t).call(this,e));return n.setHandler(t.BUSY,function(e,n){return a({},e,{async:t.BUSY})}),n.setHandler(t.DONE,function(e,n){return a({},e,{async:t.DONE})}),n.setHandler(t.ERROR,function(e,t){return a({},e,{async:t.payload})}),n.setHandler(t.PENDING,function(e,n){return a({},e,{async:t.PENDING})}),Object.defineProperty(n,"pending",{enumerable:!0,get:function(){return n.getState().async===t.PENDING}}),Object.defineProperty(n,"busy",{enumerable:!0,get:function(){return n.getState().async===t.BUSY}}),Object.defineProperty(n,"done",{enumerable:!0,get:function(){return n.getState().async===t.DONE}}),Object.defineProperty(n,"error",{enumerable:!0,get:function(){return"object"==c(n.getState().async)&&n.getState().async}}),n}return u(t,e),s(t,[{key:"setBusy",value:function(){return this.dispatch(this.createAction(t.BUSY)())}},{key:"setDone",value:function(){return this.dispatch(this.createAction(t.DONE)())}},{key:"setError",value:function(e){return this.dispatch(this.createAction(t.ERROR)(e))}},{key:"setPending",value:function(){return this.dispatch(this.createAction(t.PENDING)())}}]),t}(p["default"]);l.PENDING="PENDING",l.BUSY="BUSY",l.DONE="DONE",l.ERROR="ERROR",l.INITIAL_STATE={async:"PENDING"},t["default"]=l},function(e,t){e.exports=__webpack_require__(5)}])})},function(module,exports){"use strict";function compose(){for(var _len=arguments.length,funcs=Array(_len),_key=0;_len>_key;_key++)funcs[_key]=arguments[_key];return function(){if(0===funcs.length)return arguments.length<=0?void 0:arguments[0];var last=funcs[funcs.length-1],rest=funcs.slice(0,-1);return rest.reduceRight(function(composed,f){return f(composed)},last.apply(void 0,arguments))}}exports.__esModule=!0,exports["default"]=compose},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function createStore(reducer,initialState,enhancer){function ensureCanMutateNextListeners(){nextListeners===currentListeners&&(nextListeners=currentListeners.slice())}function getState(){return currentState}function subscribe(listener){if("function"!=typeof listener)throw new Error("Expected listener to be a function.");var isSubscribed=!0;return ensureCanMutateNextListeners(),nextListeners.push(listener),function(){if(isSubscribed){isSubscribed=!1,ensureCanMutateNextListeners();var index=nextListeners.indexOf(listener);nextListeners.splice(index,1)}}}function dispatch(action){if(!(0,_isPlainObject2["default"])(action))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if("undefined"==typeof action.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(isDispatching)throw new Error("Reducers may not dispatch actions.");try{isDispatching=!0,currentState=currentReducer(currentState,action)}finally{isDispatching=!1}for(var listeners=currentListeners=nextListeners,i=0;i<listeners.length;i++)listeners[i]();return action}function replaceReducer(nextReducer){if("function"!=typeof nextReducer)throw new Error("Expected the nextReducer to be a function.");currentReducer=nextReducer,dispatch({type:ActionTypes.INIT})}if("function"==typeof initialState&&"undefined"==typeof enhancer&&(enhancer=initialState,initialState=void 0),"undefined"!=typeof enhancer){if("function"!=typeof enhancer)throw new Error("Expected the enhancer to be a function.");return enhancer(createStore)(reducer,initialState)}if("function"!=typeof reducer)throw new Error("Expected the reducer to be a function.");var currentReducer=reducer,currentState=initialState,currentListeners=[],nextListeners=currentListeners,isDispatching=!1;return dispatch({type:ActionTypes.INIT}),{dispatch:dispatch,subscribe:subscribe,getState:getState,replaceReducer:replaceReducer}}exports.__esModule=!0,exports.ActionTypes=void 0,exports["default"]=createStore;var _isPlainObject=__webpack_require__(39),_isPlainObject2=_interopRequireDefault(_isPlainObject),ActionTypes=exports.ActionTypes={INIT:"@@redux/INIT"}},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}exports.__esModule=!0,exports.compose=exports.applyMiddleware=exports.bindActionCreators=exports.combineReducers=exports.createStore=void 0;var _createStore=__webpack_require__(36),_createStore2=_interopRequireDefault(_createStore),_combineReducers=__webpack_require__(73),_combineReducers2=_interopRequireDefault(_combineReducers),_bindActionCreators=__webpack_require__(72),_bindActionCreators2=_interopRequireDefault(_bindActionCreators),_applyMiddleware=__webpack_require__(71),_applyMiddleware2=_interopRequireDefault(_applyMiddleware),_compose=__webpack_require__(35),_compose2=_interopRequireDefault(_compose),_warning=__webpack_require__(38);_interopRequireDefault(_warning);exports.createStore=_createStore2["default"],exports.combineReducers=_combineReducers2["default"],exports.bindActionCreators=_bindActionCreators2["default"],exports.applyMiddleware=_applyMiddleware2["default"],exports.compose=_compose2["default"]},function(module,exports){"use strict";function warning(message){"undefined"!=typeof console&&"function"==typeof console.error&&console.error(message);try{throw new Error(message)}catch(e){}}exports.__esModule=!0,exports["default"]=warning},function(module,exports,__webpack_require__){function isPlainObject(value){if(!isObjectLike(value)||objectToString.call(value)!=objectTag||isHostObject(value))return!1;var proto=getPrototype(value);if(null===proto)return!0;var Ctor=hasOwnProperty.call(proto,"constructor")&&proto.constructor;return"function"==typeof Ctor&&Ctor instanceof Ctor&&funcToString.call(Ctor)==objectCtorString}var getPrototype=__webpack_require__(74),isHostObject=__webpack_require__(75),isObjectLike=__webpack_require__(76),objectTag="[object Object]",objectProto=Object.prototype,funcToString=Function.prototype.toString,hasOwnProperty=objectProto.hasOwnProperty,objectCtorString=funcToString.call(Object),objectToString=objectProto.toString;module.exports=isPlainObject},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}var _picolog=("function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol?"symbol":typeof obj},__webpack_require__(1)),_picolog2=_interopRequireDefault(_picolog),_react=(__webpack_require__(5),__webpack_require__(2)),_react2=_interopRequireDefault(_react),_reactDom=__webpack_require__(23),_reactDom2=_interopRequireDefault(_reactDom),_reactRedux=__webpack_require__(13),_reactRouter=__webpack_require__(15),_store=__webpack_require__(12),_store2=_interopRequireDefault(_store);_picolog2["default"].info("Starting BridalApp UI");var routes=__webpack_require__(57).routes,jsx=_react2["default"].createElement(_reactRedux.Provider,{store:_store2["default"]},_react2["default"].createElement(_reactRouter.Router,{history:_reactRouter.browserHistory},routes));_reactDom2["default"].render(jsx,document.getElementById("bridalapp"))},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.App=void 0;var _dec,_class,_class2,_temp,_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_picolog=__webpack_require__(1),_picolog2=_interopRequireDefault(_picolog),_react=__webpack_require__(2),_react2=_interopRequireDefault(_react),_reactRedux=__webpack_require__(13),_reactRouter=__webpack_require__(15),_reactMdl=__webpack_require__(6),_mdlExtras=__webpack_require__(7),_SessionPanel=__webpack_require__(44),_SessionPanel2=_interopRequireDefault(_SessionPanel),_AuthDialog=__webpack_require__(42),_AuthDialog2=_interopRequireDefault(_AuthDialog),_store=__webpack_require__(12),_api=(_interopRequireDefault(_store),__webpack_require__(11)),bool=(_interopRequireDefault(_api),_react.PropTypes.bool),string=(_react.PropTypes.number,_react.PropTypes.string),object=_react.PropTypes.object,func=_react.PropTypes.func,shape=(_react.PropTypes.array,_react.PropTypes.shape),any=_react.PropTypes.any,App=exports.App=(_dec=(0,_reactRedux.connect)(bridalapp.connector),_dec((_temp=_class2=function(_Component){function App(){return _classCallCheck(this,App),_possibleConstructorReturn(this,Object.getPrototypeOf(App).apply(this,arguments))}return _inherits(App,_Component),_createClass(App,[{key:"getChildContext",value:function(){return{lightbox:bridalapp.lightbox}}},{key:"render",value:function(){_picolog2["default"].debug("render",this.props);var _props=this.props,auth=_props.auth,managedStore=_props.stores.managedStore,managedBrand=_props.brands.managedBrand,leftDrawer=_props.leftDrawer,rightDrawer=_props.rightDrawer,lightbox=_props.lightbox,appbarComponent=(_props.className,_props.appbarComponent),mainComponent=_props.mainComponent;_picolog2["default"].log("render: appbarComponent=",appbarComponent);var logo="https://cdn.rawgit.com/download/bridalapp-static/1.0.0/bridalapp/logo-bridalapp.png";return _react2["default"].createElement("div",{className:"mdl-layout mdl-layout--fixed-header"},_react2["default"].createElement("div",{className:"mdl-layout__inner-container"},_react2["default"].createElement("header",{className:"AppBar mdl-layout__header is-casting-shadow"},_react2["default"].createElement("div",{tabIndex:"0",className:"mdl-layout__drawer-button",onClick:leftDrawer.onActivate},_react2["default"].createElement(_reactMdl.Icon,{name:"menu"})),_react2["default"].createElement("div",{className:"mdl-layout__header-row"},_react2["default"].createElement("img",{className:"logo",src:"https://cdn.rawgit.com/download/bridalapp-static/1.0.0/bridalapp/logo-bridalapp.png"}),_react2["default"].createElement("div",{className:"mdl-layout-spacer"}),_react2["default"].createElement(_reactMdl.Navigation,{className:"ContextActions"},appbarComponent),_react2["default"].createElement(_reactMdl.Navigation,{className:"RightDrawer"},_react2["default"].createElement(_reactMdl.Icon,{name:"account_circle",onClick:rightDrawer.onActivate})))),_react2["default"].createElement(_mdlExtras.Drawer,_extends({modal:!0,autoClose:!0},leftDrawer),_react2["default"].createElement(_mdlExtras.LayoutTitle,null,_react2["default"].createElement("img",{className:"logo",src:logo,alt:"BridalApp"})),_react2["default"].createElement(_reactMdl.Navigation,null,_react2["default"].createElement(_reactRouter.Link,{to:"/Wedding+Dresses"},_react2["default"].createElement(_mdlExtras.Sprite,{name:"bridal-dress"})," Wedding Dresses"),_react2["default"].createElement(_reactRouter.Link,{to:"/stores"},_react2["default"].createElement(_reactMdl.Icon,{name:"store"})," Bridal Stores"),_react2["default"].createElement(_reactRouter.Link,{to:"/brands"},_react2["default"].createElement(_reactMdl.Icon,{name:"content_cut"})," Bridal Brands"))),_react2["default"].createElement(_mdlExtras.Drawer,_extends({right:!0,modal:!0,autoClose:!0},rightDrawer),_react2["default"].createElement(_mdlExtras.LayoutTitle,null,_react2["default"].createElement(_SessionPanel2["default"],auth)),managedStore||managedBrand?_react2["default"].createElement(_reactMdl.Navigation,null,managedStore?_react2["default"].createElement(_reactRouter.Link,{to:"/store/"+managedStore.city+"/"+managedStore.name},_react2["default"].createElement(_reactMdl.Icon,{name:"store"})," ",managedStore.name):_react2["default"].createElement("i",null),managedBrand?_react2["default"].createElement(_reactRouter.Link,{to:"/brand/"+managedBrand.name},_react2["default"].createElement(_reactMdl.Icon,{name:"content_cut"})," ",managedBrand.name):_react2["default"].createElement("i",null)):"",auth.loggedIn?_react2["default"].createElement(_reactMdl.Navigation,null,_react2["default"].createElement(_reactRouter.Link,{to:"/loved/Wedding+Dresses"},_react2["default"].createElement(_reactMdl.Icon,{name:"favorite"})," My Favorites")):""),_react2["default"].createElement(_reactMdl.Content,{className:"main"},mainComponent),_react2["default"].createElement(_AuthDialog2["default"],auth),_react2["default"].createElement(_mdlExtras.Lightbox,_extends({noNextOnClick:!0,noImageCount:!0},lightbox))))}}]),App}(_react.Component),_class2.propTypes={auth:shape({loggedIn:bool.isRequired,challenged:bool.isRequired,onProvoke:func,onLogin:func,onLogout:func,onRegister:func,onCancel:func,user:shape({id:any.isRequired,name:string.isRequired})}).isRequired,stores:shape({managedStore:shape({id:any.isRequired,name:string.isRequired,city:string.isRequired})}).isRequired,brands:shape({managedBrand:shape({id:any.isRequired,name:string.isRequired})}).isRequired,leftDrawer:object,rightDrawer:object,lightbox:object,appbarComponent:any,mainComponent:any},_class2.childContextTypes={lightbox:shape({onOpenLightbox:func.isRequired}).isRequired},_class=_temp))||_class);exports["default"]=App},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _objectWithoutProperties(obj,keys){var target={};for(var i in obj)keys.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(obj,i)&&(target[i]=obj[i]);return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.AuthDialog=void 0;var _class,_temp,_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_picolog=__webpack_require__(1),_picolog2=_interopRequireDefault(_picolog),_react=__webpack_require__(2),_react2=_interopRequireDefault(_react),_reactMdl=__webpack_require__(6),_classnames=__webpack_require__(8),_classnames2=_interopRequireDefault(_classnames),_mdlExtras=__webpack_require__(7),string=_react.PropTypes.string,bool=_react.PropTypes.bool,object=_react.PropTypes.object;_react.PropTypes.func,_react.PropTypes.array,_react.PropTypes.shape;_picolog2["default"].assert(_reactMdl.Button&&_reactMdl.DialogTitle&&_reactMdl.DialogContent&&_reactMdl.DialogActions,"Not all react-mdl components are defined."),_picolog2["default"].assert(_mdlExtras.Dialog&&_mdlExtras.Textfield,"Not all react-mdl-extras components are defined.");var AuthDialog=exports.AuthDialog=(_temp=_class=function(_Component){function AuthDialog(props){_classCallCheck(this,AuthDialog);var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(AuthDialog).call(this,props));return _this.state={activeTab:0},_this}return _inherits(AuthDialog,_Component),_createClass(AuthDialog,[{key:"render",value:function(){var _this2=this;_picolog2["default"].debug("render",this.props);var _props=this.props,className=_props.className,defaultClass=_props.defaultClass,challenged=_props.challenged,onCancel=_props.onCancel,onLogin=_props.onLogin,onRegister=_props.onRegister,loginDialog=_props.loginDialog,registerDialog=_props.registerDialog,props=_objectWithoutProperties(_props,["className","defaultClass","challenged","onCancel","onLogin","onRegister","loginDialog","registerDialog"]),classes=(0,_classnames2["default"])(className,defaultClass);return _react2["default"].createElement(_mdlExtras.Dialog,_extends({modal:!0,className:classes,open:challenged,onCancel:onCancel},props),_react2["default"].createElement(_reactMdl.Tabs,{activeTab:this.state.activeTab,onChange:function(activeTab){_this2.setState(_extends({},_this2.state,{activeTab:activeTab}))},ripple:!0},_react2["default"].createElement(_reactMdl.Tab,null,"  Login  "),_react2["default"].createElement(_reactMdl.Tab,null,"Register")),this.state.activeTab?_react2["default"].createElement(_reactMdl.DialogContent,null,_react2["default"].createElement("p",null,_react2["default"].createElement("b",null,"Create an account")," or ",_react2["default"].createElement("a",{href:"#",onClick:function(){return _this2.setState(_extends({},_this2.state,{activeTab:0}))}},"Login"),"."),_react2["default"].createElement("form",{className:"RegistrationForm"},_react2["default"].createElement(_mdlExtras.Textfield,_extends({name:"username",label:"Username",floatingLabel:!0},registerDialog.username)),_react2["default"].createElement(_mdlExtras.Textfield,_extends({name:"password",label:"Password",floatingLabel:!0},registerDialog.password)),_react2["default"].createElement(_mdlExtras.Textfield,_extends({name:"passwordConfirm",label:"Password (confirm)",floatingLabel:!0},registerDialog.confirm)))):_react2["default"].createElement(_reactMdl.DialogContent,null,_react2["default"].createElement("p",null,_react2["default"].createElement("b",null,"Login")," or ",_react2["default"].createElement("a",{href:"#",onClick:function(){return _this2.setState(_extends({},_this2.state,{activeTab:1}))}},"create an account"),"."),_react2["default"].createElement("form",{className:"LoginForm"},_react2["default"].createElement(_mdlExtras.Textfield,_extends({name:"username",label:"Username",floatingLabel:!0},loginDialog.username)),_react2["default"].createElement(_mdlExtras.Textfield,_extends({name:"password",label:"Password",floatingLabel:!0},loginDialog.password)))),this.state.activeTab?_react2["default"].createElement(_reactMdl.DialogActions,null,_react2["default"].createElement(_reactMdl.Button,{raised:!0,colored:!0,onClick:onRegister},"Register"),_react2["default"].createElement(_reactMdl.Button,{onClick:onCancel},"Cancel")):_react2["default"].createElement(_reactMdl.DialogActions,null,_react2["default"].createElement(_reactMdl.Button,{raised:!0,colored:!0,onClick:onLogin},"   Login   "),_react2["default"].createElement(_reactMdl.Button,{onClick:onCancel},"Cancel")))}}]),AuthDialog}(_react.Component),_class.propTypes={defaultClass:string.isRequired,className:string,challenged:bool,loginDialog:object,registerDialog:object},_class.defaultProps={defaultClass:"AuthDialog"},_temp);exports["default"]=AuthDialog},function(module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var Credential=exports.Credential=function Credential(id){_classCallCheck(this,Credential),this.id=id};exports["default"]=Credential},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.SessionPanel=void 0;var _class,_temp,_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_picolog=__webpack_require__(1),_picolog2=_interopRequireDefault(_picolog),_react=__webpack_require__(2),_react2=_interopRequireDefault(_react),_reactRouter=__webpack_require__(15),_reactMdl=__webpack_require__(6),string=(_react.PropTypes.bool,_react.PropTypes.number,_react.PropTypes.string),func=(_react.PropTypes.object,_react.PropTypes.func),shape=(_react.PropTypes.array,_react.PropTypes.shape),any=_react.PropTypes.any,SessionPanel=exports.SessionPanel=(_temp=_class=function(_Component){function SessionPanel(){return _classCallCheck(this,SessionPanel),_possibleConstructorReturn(this,Object.getPrototypeOf(SessionPanel).apply(this,arguments))}return _inherits(SessionPanel,_Component),_createClass(SessionPanel,[{key:"render",value:function(){_picolog2["default"].debug("render",this.props);var _props=this.props,onProvoke=_props.onProvoke,onLogout=_props.onLogout,user=_props.session.user,profile=(_props.children,user?"/profile/"+user.name:"");return _react2["default"].createElement("h4",null,user?_react2["default"].createElement(_reactMdl.Button,{className:"Logout",colored:!0,onClick:onLogout},"Logout"):_react2["default"].createElement(_reactMdl.Button,{className:"Login",colored:!0,raised:!0,onClick:onProvoke},"Login"),_react2["default"].createElement(_reactMdl.Navigation,{className:"Session"},user?_react2["default"].createElement(_reactRouter.Link,{className:"Profile",onClick:function(e){return e.preventDefault()},to:profile},_react2["default"].createElement(_reactMdl.Icon,{name:"account_circle"})," ",_react2["default"].createElement("span",{title:user.name},user.name)):_react2["default"].createElement("b",null,"Not logged in")))}}]),SessionPanel}(_react.Component),_class.propTypes={onProvoke:func.isRequired,onLogout:func.isRequired,session:shape({user:shape({id:any.isRequired,name:string.isRequired})}).isRequired},_temp);exports["default"]=SessionPanel},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function load(params){return _picolog2["default"].log("load",params),bridalapp.brands.search(params).then(function(results){return _picolog2["default"].log("load: search returned "+results.length+" brands."),results})["catch"](function(error){return _picolog2["default"].error("Searching brands failed.",error),error})}Object.defineProperty(exports,"__esModule",{value:!0}),exports.BrandBrowserAppBar=exports.BrandBrowser=void 0;var _dec,_dec2,_class,_class2,_temp,_dec3,_class3,_class4,_temp2,_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_picolog=__webpack_require__(1),_picolog2=_interopRequireDefault(_picolog),_react=__webpack_require__(2),_react2=_interopRequireDefault(_react),_shallowEqual=__webpack_require__(14),_shallowEqual2=_interopRequireDefault(_shallowEqual),_reactRedux=__webpack_require__(13),_reduxLoadApi=__webpack_require__(22),_reactMdl=__webpack_require__(6),_store=__webpack_require__(12),_api=(_interopRequireDefault(_store),__webpack_require__(11)),_FilterPanel=(_interopRequireDefault(_api),__webpack_require__(17)),_FilterPanel2=_interopRequireDefault(_FilterPanel),_mdlExtras=__webpack_require__(7),_Scroller=__webpack_require__(21),_Scroller2=_interopRequireDefault(_Scroller),_BrandCard=__webpack_require__(46),_BrandCard2=_interopRequireDefault(_BrandCard),bool=_react.PropTypes.bool,object=_react.PropTypes.object,array=_react.PropTypes.array,func=_react.PropTypes.func,shape=_react.PropTypes.shape,any=_react.PropTypes.any,BrandBrowser=exports.BrandBrowser=(_dec=(0,_reduxLoadApi.onload)(load),_dec2=(0,_reactRedux.connect)(bridalapp.brands.connector),_dec(_class=_dec2((_temp=_class2=function(_React$Component){function BrandBrowser(){return _classCallCheck(this,BrandBrowser),_possibleConstructorReturn(this,Object.getPrototypeOf(BrandBrowser).apply(this,arguments))}return _inherits(BrandBrowser,_React$Component),_createClass(BrandBrowser,[{key:"componentDidMount",value:function(){_picolog2["default"].debug("componentDidMount()");var _props=this.props,pending=_props.pending,error=_props.error,params=_props.params;(pending||error)&&load(params)}},{key:"componentWillReceiveProps",value:function(nextProps){_picolog2["default"].debug("componentWillReceiveProps",nextProps);var newFilter=_extends({},nextProps.location.query,nextProps.params),pathChanged=nextProps.location.pathname!==this.props.location.pathname,queryChanged=!(0,_shallowEqual2["default"])(nextProps.location.query,this.props.location.query);(pathChanged||queryChanged||nextProps.pending&&!this.props.pending)&&load(newFilter)}},{key:"render",value:function(){_picolog2["default"].debug("render",this.props);var _props2=this.props,location=(_props2.params,_props2.location),filter=_props2.filter,onSearch=_props2.onSearch,items=(_props2.pending,_props2.error,_props2.items),item=(_props2.onItemsChange,_props2.stockedItems,_props2.item),filterProps=_extends({onSearch:onSearch,location:location},filter);return _react2["default"].createElement("div",{style:{boxSizing:"border-box",height:"100%"}},_react2["default"].createElement(_FilterPanel2["default"],filterProps),_react2["default"].createElement(_Scroller2["default"],{className:"BrandBrowser ",bufferBefore:2,items:items,bufferAfter:4,renderItem:function(brand,idx){var props=_extends({brand:brand},item,{frontLoadDelay:10>idx?0:500,backLoadDelay:10>idx?0:2500});return _react2["default"].createElement(_BrandCard2["default"],props)}}))}}]),BrandBrowser}(_react2["default"].Component),_class2.propTypes={params:object.isRequired,location:shape({query:object}).isRequired,filter:shape({values:object.isRequired}).isRequired,items:array.isRequired,pending:bool.isRequired,
error:any,onSearch:func.isRequired,onItemsChange:func.isRequired,item:shape({onMayPublish:func.isRequired,onPublish:func.isRequired,onUnpublish:func.isRequired}).isRequired},_class=_temp))||_class)||_class);exports["default"]=BrandBrowser;exports.BrandBrowserAppBar=(_dec3=(0,_reactRedux.connect)(bridalapp.brands.connector),_dec3((_temp2=_class4=function(_Component){function BrandBrowserAppBar(){var _Object$getPrototypeO;_classCallCheck(this,BrandBrowserAppBar);for(var _len=arguments.length,args=Array(_len),_key=0;_len>_key;_key++)args[_key]=arguments[_key];var _this2=_possibleConstructorReturn(this,(_Object$getPrototypeO=Object.getPrototypeOf(BrandBrowserAppBar)).call.apply(_Object$getPrototypeO,[this].concat(args)));return _this2.filterClicked=_this2.filterClicked.bind(_this2),_this2}return _inherits(BrandBrowserAppBar,_Component),_createClass(BrandBrowserAppBar,[{key:"filterClicked",value:function(event){_picolog2["default"].log("filterClicked",event),event&&event.preventDefault();var _props$filter=this.props.filter,open=_props$filter.open,onActivate=_props$filter.onActivate,onCancel=_props$filter.onCancel;open?onCancel():onActivate()}},{key:"render",value:function(){return _react2["default"].createElement(_mdlExtras.Badge,{className:"mdl-navigation__link",text:""+this.props.items.length,onClick:this.filterClicked},_react2["default"].createElement(_reactMdl.Icon,{name:"search"}))}}]),BrandBrowserAppBar}(_react.Component),_class4.propTypes={filter:shape({open:bool.isRequired,onActivate:func.isRequired,onCancel:func.isRequired}).isRequired,items:array.isRequired},_class3=_temp2))||_class3)},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _objectWithoutProperties(obj,keys){var target={};for(var i in obj)keys.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(obj,i)&&(target[i]=obj[i]);return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.BrandCard=void 0;var _class,_temp,_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_picolog=__webpack_require__(1),_react=(_interopRequireDefault(_picolog),__webpack_require__(2)),_react2=_interopRequireDefault(_react),_classnames=__webpack_require__(8),_classnames2=_interopRequireDefault(_classnames),_ws=__webpack_require__(4),_reactMdl=(_interopRequireDefault(_ws),__webpack_require__(6)),_mdlExtras=__webpack_require__(7),_Publication2=__webpack_require__(19),any=_react.PropTypes.any,string=(_react.PropTypes.bool,_react.PropTypes.string),func=(_react.PropTypes.object,_react.PropTypes.func),shape=_react.PropTypes.shape,BrandCard=exports.BrandCard=(_temp=_class=function(_Publication){function BrandCard(){var _Object$getPrototypeO;_classCallCheck(this,BrandCard);for(var _len=arguments.length,props=Array(_len),_key=0;_len>_key;_key++)props[_key]=arguments[_key];var _this=_possibleConstructorReturn(this,(_Object$getPrototypeO=Object.getPrototypeOf(BrandCard)).call.apply(_Object$getPrototypeO,[this].concat(props)));return _this.state={size:{height:"100%"}},_this}return _inherits(BrandCard,_Publication),_createClass(BrandCard,[{key:"componentDidMount",value:function(){this.setState({size:window.innerWidth<480?{width:"100%"}:{height:"100%"}})}},{key:"thumbnailClicked",value:function(images,index,event){var onOpenLightbox=this.context.lightbox.onOpenLightbox;onOpenLightbox(images,index,event),event&&(event.preventDefault(),event.stopPropagation())}},{key:"render",value:function(){var _this2=this,_props=this.props,brand=_props.brand,others=_objectWithoutProperties(_props,["brand"]),id=brand.id,name=brand.name,published=brand.published,size=this.state.size,bid=id.toString(),img="data:image/gif;base64,R0lGODlhAgADAIAAAP///////yH5BAEKAAEALAAAAAACAAMAAAICjF8AOw==",prdUrl="https://cdn.rawgit.com/Download/bridalapp-static/1.0.16/products/"+bid+"/Brand",brandUrl="https://cdn.rawgit.com/Download/bridalapp-static/1.0.16/brands/"+bid+"/logo-brand-name.png",thumbs=prdUrl+"/thumbs.jpg",thumbnail="data:image/gif;base64,R0lGODlhAgADAIAAAP///////yH5BAEKAAEALAAAAAACAAMAAAICjF8AOw==",images=[{src:prdUrl+"/back-large.jpg",className:"back",alt:{src:img,style:_extends({},size,{backgroundImage:"url("+thumbs+")",backgroundSize:"300%",backgroundPosition:"100% 0"})}},{src:prdUrl+"/front-large.jpg",className:"front",alt:{src:img,style:_extends({},size,{backgroundImage:"url("+thumbs+")",backgroundSize:"150%",backgroundPosition:"0 0"})}},{src:prdUrl+"/detail-1-large.jpg",className:"detail-1",alt:{src:img,style:_extends({},size,{backgroundImage:"url("+thumbs+")",backgroundSize:"600%",backgroundPosition:"200% 200%"})}},{src:prdUrl+"/detail-2-large.jpg",className:"detail-2",alt:{src:img,style:_extends({},size,{backgroundImage:"url("+thumbs+")",backgroundSize:"600%",backgroundPosition:"100% 200%"})}},{src:prdUrl+"/detail-3-large.jpg",className:"detail-3",alt:{src:img,style:_extends({},size,{backgroundImage:"url("+thumbs+")",backgroundSize:"600%",backgroundPosition:"200% 100%"})}}],classes=(0,_classnames2["default"])("Product",{unpublished:!published});return _react2["default"].createElement(_mdlExtras.StatefulFlipCard,_extends({className:classes,key:bid},others),_react2["default"].createElement(_mdlExtras.FrontFace,null,_react2["default"].createElement("div",{className:"content"},_react2["default"].createElement("img",{className:"ProductImage",src:img,style:{backgroundImage:"url("+thumbs+")",height:"100%"}}),this.mayPublish(brand)?_react2["default"].createElement("div",{className:"ModActions"},published?_react2["default"].createElement(_reactMdl.FABButton,{className:"Unpublish",onClick:this.unpublishClicked.bind(this,brand)},_react2["default"].createElement(_reactMdl.Icon,{name:"visibility_off"})):_react2["default"].createElement(_reactMdl.FABButton,{className:"Publish",onClick:this.publishClicked.bind(this,brand)},_react2["default"].createElement(_reactMdl.Icon,{name:"visibility"}))):"")),_react2["default"].createElement(_mdlExtras.BackFace,null,_react2["default"].createElement(_reactMdl.CardTitle,null,_react2["default"].createElement("img",{className:"BrandLogo",src:brandUrl}),_react2["default"].createElement("h3",{className:"ProductName"},name)),_react2["default"].createElement("div",{className:"ProductGallery"},_react2["default"].createElement("div",{className:"thumbs"},images.map(function(_ref,i){var className=(_ref.src,_ref.className);return _react2["default"].createElement("img",{key:i,className:(0,_classnames2["default"])(className,"thumb"),src:thumbnail,onClick:_this2.thumbnailClicked.bind(_this2,images,i),style:{backgroundImage:"url("+thumbs+")"}})})))))}}]),BrandCard}(_Publication2.Publication),_class.propTypes={brand:shape({id:any,name:string}).isRequired},_class.contextTypes={lightbox:shape({onOpenLightbox:func.isRequired}).isRequired},_temp);exports["default"]=BrandCard},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.BrandsApi=void 0;var _class,_class2,_temp,_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_picolog=__webpack_require__(1),_reduxFetchApi=(_interopRequireDefault(_picolog),__webpack_require__(5),__webpack_require__(9)),_api=__webpack_require__(20),_api2=_interopRequireDefault(_api),_Brand=__webpack_require__(27),BrandsApi=(_interopRequireDefault(_Brand),exports.BrandsApi=(0,_reduxFetchApi.remote)((_temp=_class2=function(_PublicationApi){function BrandsApi(){var state=arguments.length<=0||void 0===arguments[0]?BrandsApi.INITIAL_STATE:arguments[0];_classCallCheck(this,BrandsApi);var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(BrandsApi).call(this,state));return _this.setHandler(BrandsApi.SET_MANAGED_BRANDS,function(state,_ref){var payload=_ref.payload;return _extends({},state,{managedBrands:payload})}),_this.setHandler(BrandsApi.SET_MANAGED_BRAND_INDEX,function(state,_ref2){var payload=_ref2.payload;return _extends({},state,{managedBrandIndex:payload})}),Object.defineProperties(_this,{managedBrands:{enumerable:!0,get:function(){return _this.getState().managedBrands}},managedBrandIndex:{enumerable:!0,get:function(){return _this.getState().managedBrandIndex}},managedBrand:{enumerable:!0,get:function(){return _this.managedBrands[_this.managedBrandIndex]}}}),_this}return _inherits(BrandsApi,_PublicationApi),_createClass(BrandsApi,[{key:"setManagedBrands",value:function(brands){return this.dispatch(this.createAction(BrandsApi.SET_MANAGED_BRANDS)(brands))}},{key:"setManagedBrandIndex",value:function(index){return this.dispatch(this.createAction(BrandsApi.SET_MANAGED_BRAND_INDEX)(index))}}]),BrandsApi}(_api2["default"]),_class2.INITIAL_STATE=_extends({},_api2["default"].INITIAL_STATE,{managedBrands:[],managedBrandIndex:0}),_class2.SET_MANAGED_BRANDS="SET_MANAGED_BRANDS",_class2.SET_MANAGED_BRAND_INDEX="SET_MANAGED_BRAND_INDEX",_class=_temp))||_class);exports["default"]=BrandsApi},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.FilterFields=void 0;var _class,_temp,_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_picolog=__webpack_require__(1),_picolog2=_interopRequireDefault(_picolog),_react=__webpack_require__(2),_react2=_interopRequireDefault(_react),_classnames=__webpack_require__(8),_classnames2=_interopRequireDefault(_classnames),_reactMdl=__webpack_require__(6),_mdlExtras=__webpack_require__(7),object=(__webpack_require__(3),_react.PropTypes.object),func=_react.PropTypes.func,shape=_react.PropTypes.shape,FilterFields=exports.FilterFields=(_temp=_class=function(_Component){function FilterFields(){return _classCallCheck(this,FilterFields),_possibleConstructorReturn(this,Object.getPrototypeOf(FilterFields).apply(this,arguments))}return _inherits(FilterFields,_Component),_createClass(FilterFields,[{key:"clearField",value:function(field,event){_picolog2["default"].info("clearField",field,event),event.preventDefault();var _props=this.props;_props.onApplyFields,_props.onSearch;field.onChange("")}},{key:"render",value:function(){var _props2=this.props,fields=_props2.fields,className=_props2.className,children=_props2.children,classes=(0,_classnames2["default"])("FilterFields",className);return _react2["default"].createElement(_reactMdl.CardText,{className:classes},_react2["default"].createElement("div",{className:"FilterField q"},_react2["default"].createElement(_mdlExtras.Textfield,_extends({},fields.q,{placeholder:"Type here..."})),_react2["default"].createElement("a",{className:"clear-button",href:"#",onClick:this.clearField.bind(this,fields.q)},_react2["default"].createElement(_reactMdl.Icon,{name:"clear"}))),children)}}]),FilterFields}(_react.Component),_class.propTypes={fields:shape({q:object.isRequired}).isRequired,onApplyFields:func.isRequired,onSearch:func.isRequired},_temp);exports["default"]=FilterFields},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.EntityApi=exports.FilterApi=exports.FilterFields=void 0;var _class,_temp,_class2,_class3,_temp2,_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_picolog=__webpack_require__(1),_picolog2=_interopRequireDefault(_picolog),_reduxApis=__webpack_require__(5),_reduxAsyncApi=__webpack_require__(34),_reduxFetchApi=__webpack_require__(9),_shallowEqual=__webpack_require__(14),_shallowEqual2=_interopRequireDefault(_shallowEqual),_api=__webpack_require__(18),_Entity=__webpack_require__(3),FilterFields=exports.FilterFields=function(_Api){function FilterFields(state){_classCallCheck(this,FilterFields);var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(FilterFields).call(this,state));return _this.q=(0,_reduxApis.link)(_this,new _api.TextfieldApi),_this.q.type="text",_this}return _inherits(FilterFields,_Api),FilterFields}(_reduxApis.Api),FilterApi=exports.FilterApi=(_temp=_class=function(_Api2){function FilterApi(){var state=arguments.length<=0||void 0===arguments[0]?FilterApi.INITIAL_STATE:arguments[0];_classCallCheck(this,FilterApi);var _this2=_possibleConstructorReturn(this,Object.getPrototypeOf(FilterApi).call(this,state));return _this2.setHandler(FilterApi.ACTIVATE,function(state){return _extends({},state,{open:!0})}),_this2.setHandler(FilterApi.CANCEL,function(state){return _extends({},state,{open:!1})}),_this2.setHandler(FilterApi.SET_VALUES,function(state,_ref){var payload=_ref.payload;return _extends({},state,{values:payload})}),_this2.setHandler(FilterApi.APPLY_FIELDS,function(state){for(var key,changed=!1,values=_extends({},_this2.values),keys=Object.keys(_this2.fields),i=0;key=keys[i];i++)_this2.fields[key].value!==values[key]&&(changed=!0,values[key]=_this2.fields[key].value);return changed?_extends({},state,{values:values}):state}),Object.defineProperties(_this2,{open:{enumerable:!0,get:function(){return _this2.getState().open}},values:{enumerable:!0,get:function(){return _this2.getState().values}}}),_this2.fields=_this2.createFields(),_this2.onActivate=_this2.activate.bind(_this2),_this2.onCancel=_this2.cancel.bind(_this2),_this2.onApplyFields=_this2.applyFields.bind(_this2),_this2}return _inherits(FilterApi,_Api2),_createClass(FilterApi,[{key:"activate",value:function(){this.dispatch(this.createAction(FilterApi.ACTIVATE)())}},{key:"cancel",value:function(){this.dispatch(this.createAction(FilterApi.CANCEL)())}},{key:"applyFields",value:function(){return this.dispatch(this.createAction(FilterApi.APPLY_FIELDS)()),this.values}},{key:"setValues",value:function(values){var _this3=this;this.dispatch(this.createAction(FilterApi.SET_VALUES)(values)),Object.keys(this.fields).forEach(function(key){return _this3.fields[key].setValue(values[key])})}},{key:"createFields",value:function(){return(0,_reduxApis.link)(this,new FilterFields)}}]),FilterApi}(_reduxApis.Api),_class.INITIAL_STATE={open:!1,values:{}},_class.ACTIVATE="ACTIVATE",_class.CANCEL="CANCEL",_class.SET_VALUES="SET_VALUES",_class.APPLY_FIELDS="APPLY_FIELDS",_temp),EntityApi=exports.EntityApi=(0,_reduxFetchApi.remote)((_temp2=_class3=function(_Async){function EntityApi(){var state=arguments.length<=0||void 0===arguments[0]?EntityApi.INITIAL_STATE:arguments[0];_classCallCheck(this,EntityApi);var _this4=_possibleConstructorReturn(this,Object.getPrototypeOf(EntityApi).call(this,state));return _this4.setHandler(EntityApi.SET_FILTER,function(state,action){return _extends({},state,{filter:action.payload})}),_this4.setHandler(EntityApi.SET_ITEMS,function(state,action){return _extends({},state,{items:action.payload})}),_this4.setHandler(EntityApi.SET_PROCESSING,function(state,action){return _extends({},state,{processing:action.payload})}),Object.defineProperties(_this4,{items:{enumerable:!0,get:function(){return _this4.getState().items}},itemStates:{enumerable:!0,get:function(){return _this4.getState().itemStates}}}),_this4.onSearch=function(){return _this4.search()},_this4.onItemsChange=_this4.setItems.bind(_this4),_this4.onItemStatesChange=_this4.setItemStates.bind(_this4),_this4.item={itemState:_this4.itemState.bind(_this4),onItemStateChange:_this4.setItemState.bind(_this4),onItemSave:_this4.save.bind(_this4)},_this4.filter=_this4.createFilter(),_this4}return _inherits(EntityApi,_Async),_createClass(EntityApi,[{key:"itemState",value:function(item){return this.items[item.id]||_reduxAsyncApi.Async.DONE}},{key:"setItemState",value:function(item,newState){var newStates=_extends({},this.itemStates);return newState!=DONE?newStates[item.id]=newState:delete newStates[item.id],this.setItemStates(newStates),this}},{key:"save",value:function(item){var _this5=this;_picolog2["default"].log("save",item);var result=Promise.resolve(item);return this.itemState(item)!==_reduxAsyncApi.Async.BUSY&&(this.itemState(item,_reduxAsyncApi.Async.BUSY),result=this.fetch("",{method:"POST",headers:{"Content-Type":"application/json"},body:(0,_Entity.toJSON)(item)}).then(function(response){return response&&200==response.status?response.text():response.text().then(function(text){var error=Error(text);throw error.status=response.status,error.statusText=response.statusText,error})}).then(function(text){return _this5.itemState(item,_reduxAsyncApi.Async.DONE),(0,_Entity.fromJSON)(text)})["catch"](function(error){throw _this5.itemState(item,error),error})),result}},{key:"setItems",value:function(items){_picolog2["default"].debug("setItems",items),this.dispatch(this.createAction(EntityApi.SET_ITEMS)(items))}},{key:"setItemStates",value:function(itemStates){_picolog2["default"].debug("setItemStates",itemStates),this.dispatch(this.createAction(EntityApi.SET_ITEM_STATES)(itemStates))}},{key:"searchUrl",value:function(filter){for(var key,keys=Object.keys(filter),result="",i=0;key=keys[i];i++)result+=result?"&":"?",result+=encodeURIComponent(key)+"="+encodeURIComponent(filter[key]);return result}},{key:"search",value:function(params){var _this6=this;params&&!(0,_shallowEqual2["default"])(this.filter.values,params)&&this.filter.setValues(params);var url=this.searchUrl(this.filter.values);return _picolog2["default"].log("search",url),this.setBusy(),new Promise(function(resolve,reject){_this6.fetch(url).then(function(response){return response&&200===response.status?response.text():new Promise(function(ok,err){response.text().then(function(text){var error=Error(text);error.message=text,error.status=response.status,error.statusText=response.statusText,err(error)})})}).then(function(text){return(0,_Entity.fromJSON)(text)}).then(function(json){return _picolog2["default"].debug("search: OK got "+json.length+" results"),_this6.setItems(json),_this6.setDone(),json}).then(resolve)["catch"](function(error){_picolog2["default"].info("search: error=",error),_this6.setError(error),reject(error)})})}},{key:"createFilter",value:function(){return(0,_reduxApis.link)(this,new FilterApi)}}]),EntityApi}(_reduxAsyncApi.Async),_class3.INITIAL_STATE=_extends({},_reduxAsyncApi.Async.INITIAL_STATE,{items:[],itemStates:{}}),_class3.SET_FILTER="SET_FILTER",_class3.SET_ITEMS="SET_ITEMS",_class3.SET_ITEM_STATES="SET_ITEM_STATES",_class2=_temp2))||_class2;exports["default"]=EntityApi},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_react=__webpack_require__(2),_react2=_interopRequireDefault(_react),Home=function(_React$Component){function Home(){return _classCallCheck(this,Home),_possibleConstructorReturn(this,Object.getPrototypeOf(Home).apply(this,arguments))}return _inherits(Home,_React$Component),_createClass(Home,[{key:"render",value:function(){return _react2["default"].createElement("div",{className:"Home"},_react2["default"].createElement("h1",null,"BRIDAL APP"),"Allrighty :) thenn")}}]),Home}(_react2["default"].Component);exports["default"]=Home},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function load(params){return _picolog2["default"].log("load",params),bridalapp.products.search(params).then(function(results){return _picolog2["default"].debug("load: search returned "+results.length+" products."),results})["catch"](function(error){return _picolog2["default"].error("Searching products failed.",error),error})}Object.defineProperty(exports,"__esModule",{value:!0}),exports.ProductBrowserAppBar=exports.ProductBrowser=void 0;var _dec,_dec2,_class,_class2,_temp,_dec3,_class3,_class4,_temp2,_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_picolog=__webpack_require__(1),_picolog2=_interopRequireDefault(_picolog),_react=__webpack_require__(2),_react2=_interopRequireDefault(_react),_shallowEqual=__webpack_require__(14),_shallowEqual2=_interopRequireDefault(_shallowEqual),_reactRedux=__webpack_require__(13),_reduxLoadApi=__webpack_require__(22),_reactMdl=__webpack_require__(6),_store=__webpack_require__(12),_api=(_interopRequireDefault(_store),__webpack_require__(11)),_Entity=(_interopRequireDefault(_api),__webpack_require__(3)),_FilterPanel=__webpack_require__(17),_FilterPanel2=_interopRequireDefault(_FilterPanel),_mdlExtras=__webpack_require__(7),_Scroller=__webpack_require__(21),_Scroller2=_interopRequireDefault(_Scroller),_ProductCard=__webpack_require__(52),_ProductCard2=_interopRequireDefault(_ProductCard),bool=_react.PropTypes.bool,array=_react.PropTypes.array,object=_react.PropTypes.object,func=_react.PropTypes.func,shape=_react.PropTypes.shape,any=_react.PropTypes.any,ANIMATION_TIME=510,ProductBrowser=exports.ProductBrowser=(_dec=(0,_reduxLoadApi.onload)(load),_dec2=(0,_reactRedux.connect)(bridalapp.products.connector),_dec(_class=_dec2((_temp=_class2=function(_React$Component){function ProductBrowser(){var _Object$getPrototypeO;_classCallCheck(this,ProductBrowser);for(var _len=arguments.length,args=Array(_len),_key=0;_len>_key;_key++)args[_key]=arguments[_key];var _this=_possibleConstructorReturn(this,(_Object$getPrototypeO=Object.getPrototypeOf(ProductBrowser)).call.apply(_Object$getPrototypeO,[this].concat(args)));return _this.state={removing:{},filterPanelOpen:!1},_this}return _inherits(ProductBrowser,_React$Component),_createClass(ProductBrowser,[{key:"componentDidMount",value:function(){_picolog2["default"].debug("componentDidMount()");var _props=this.props,params=_props.params,query=_props.location.query,pending=_props.pending,error=_props.error;(pending||error)&&load(_extends({},query,params))}},{key:"componentWillReceiveProps",value:function(nextProps){_picolog2["default"].debug("componentWillReceiveProps",nextProps);var newFilter=_extends({},nextProps.location.query,nextProps.params),pathChanged=nextProps.location.pathname!==this.props.location.pathname,queryChanged=!(0,_shallowEqual2["default"])(nextProps.location.query,this.props.location.query);(pathChanged||queryChanged||nextProps.pending&&!this.props.pending)&&(Object.keys(this.state.removing).length>0&&this.setState({removing:{}}),load(newFilter))}},{key:"dislike",value:function(product){var _this2=this;_picolog2["default"].log("dislike",product);var pid=product.id.toString();if(bridalapp.auth.loggedIn){var removing=_extends({},this.state.removing);removing[pid]="disliked",this.setState(_extends({},this.state,{removing:removing}))}var timer=new Promise(function(resolve){return setTimeout(function(){return resolve()},ANIMATION_TIME)});return Promise.all([timer,this.props.item.onDislike(product)]).then(function(){var _props2=_this2.props,items=_props2.items,onItemsChange=_props2.onItemsChange,idx=(0,_Entity.indexOf)(items,product);idx>=0&&onItemsChange(items.slice(0,idx).concat(items.slice(idx+1)));var removing=_extends({},_this2.state.removing);delete removing[pid],_this2.setState(_extends({},_this2.state,{removing:removing}))})}},{key:"love",value:function(product){var _this3=this;_picolog2["default"].log("love",product);var pid=product.id.toString();if(bridalapp.auth.loggedIn){var removing=_extends({},this.state.removing);removing[pid]="loved",this.setState(_extends({},this.state,{removing:removing}))}var timer=new Promise(function(resolve){return setTimeout(function(){return resolve()},ANIMATION_TIME)});return Promise.all([timer,this.props.item.onLove(product)]).then(function(){var _props3=_this3.props,items=_props3.items,onItemsChange=_props3.onItemsChange,idx=(0,
_Entity.indexOf)(items,product);idx>=0&&onItemsChange(items.slice(0,idx).concat(items.slice(idx+1)));var removing=_extends({},_this3.state.removing);delete removing[pid],_this3.setState(_extends({},_this3.state,{removing:removing}))})}},{key:"undoRating",value:function(product){var _this4=this;_picolog2["default"].log("undoRating",product);var pid=product.id.toString();if(bridalapp.auth.loggedIn){var removing=_extends({},this.state.removing);removing[pid]="undoRating",this.setState(_extends({},this.state,{removing:removing}))}var timer=new Promise(function(resolve){return setTimeout(function(){return resolve()},ANIMATION_TIME)});return Promise.all([timer,this.props.item.onUndoRating(product)]).then(function(){var _props4=_this4.props,items=_props4.items,onItemsChange=_props4.onItemsChange,idx=(0,_Entity.indexOf)(items,product);idx>=0&&onItemsChange(items.slice(0,idx).concat(items.slice(idx+1)))})}},{key:"render",value:function(){var _this5=this,_props5=this.props,location=(_props5.params,_props5.location),filter=_props5.filter,onSearch=_props5.onSearch,items=(_props5.pending,_props5.error,_props5.items),stockedItems=(_props5.onItemsChange,_props5.stockedItems);_picolog2["default"].debug("render",Object.keys(stockedItems).join(" "));var item=_extends({},this.props.item,{onDislike:this.dislike.bind(this),onLove:this.love.bind(this),onUndoRating:this.undoRating.bind(this)}),state=Object.keys(stockedItems).join(" ")+", "+Object.keys(this.state.removing).join(" "),filterProps=_extends({onSearch:onSearch,location:location},filter);return _react2["default"].createElement("div",{style:{boxSizing:"border-box",height:"100%"}},_react2["default"].createElement(_FilterPanel2["default"],filterProps),_react2["default"].createElement(_Scroller2["default"],{className:"ProductBrowser "+filter.values.category,bufferBefore:4,items:items,itemSize:580,bufferAfter:16,renderItem:function(product,idx){var pid=product.id.toString(),props=_extends({product:product},item,{rating:filter.values.rating,stocked:!!stockedItems[pid],removing:_this5.state.removing[pid],frontLoadDelay:10>idx?0:500,backLoadDelay:10>idx?0:2500});return _react2["default"].createElement(_ProductCard2["default"],props)},state:state}))}}]),ProductBrowser}(_react2["default"].Component),_class2.propTypes={params:object.isRequired,location:shape({query:object}).isRequired,filter:shape({values:object.isRequired}).isRequired,items:array.isRequired,stockedItems:object.isRequired,pending:bool.isRequired,error:any,onSearch:func.isRequired,onItemsChange:func.isRequired,item:shape({onMayPublish:func.isRequired,onPublish:func.isRequired,onUnpublish:func.isRequired,onLove:func.isRequired,onDislike:func.isRequired,onUndoRating:func.isRequired,onMayToggleStock:func.isRequired,onIsStocked:func.isRequired,onToggleStock:func.isRequired}).isRequired},_class=_temp))||_class)||_class);exports["default"]=ProductBrowser;exports.ProductBrowserAppBar=(_dec3=(0,_reactRedux.connect)(bridalapp.products.connector),_dec3((_temp2=_class4=function(_Component){function ProductBrowserAppBar(){var _Object$getPrototypeO2;_classCallCheck(this,ProductBrowserAppBar);for(var _len2=arguments.length,args=Array(_len2),_key2=0;_len2>_key2;_key2++)args[_key2]=arguments[_key2];var _this6=_possibleConstructorReturn(this,(_Object$getPrototypeO2=Object.getPrototypeOf(ProductBrowserAppBar)).call.apply(_Object$getPrototypeO2,[this].concat(args)));return _this6.filterClicked=_this6.filterClicked.bind(_this6),_this6}return _inherits(ProductBrowserAppBar,_Component),_createClass(ProductBrowserAppBar,[{key:"filterClicked",value:function(event){_picolog2["default"].log("filterClicked",event),event&&event.preventDefault();var _props$filter=this.props.filter,open=_props$filter.open,onActivate=_props$filter.onActivate,onCancel=_props$filter.onCancel;open?onCancel():onActivate()}},{key:"render",value:function(){return _react2["default"].createElement(_mdlExtras.Badge,{className:"mdl-navigation__link",text:""+this.props.items.length,onClick:this.filterClicked},_react2["default"].createElement(_reactMdl.Icon,{name:"search"}))}}]),ProductBrowserAppBar}(_react.Component),_class4.propTypes={filter:shape({open:bool.isRequired,onActivate:func.isRequired,onCancel:func.isRequired}).isRequired,items:array.isRequired},_class3=_temp2))||_class3)},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _objectWithoutProperties(obj,keys){var target={};for(var i in obj)keys.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(obj,i)&&(target[i]=obj[i]);return target}function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}return Array.from(arr)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.ProductCard=void 0;var _class,_temp,_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol?"symbol":typeof obj},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_picolog=__webpack_require__(1),_picolog2=_interopRequireDefault(_picolog),_react=__webpack_require__(2),_react2=_interopRequireDefault(_react),_classnames=__webpack_require__(8),_classnames2=_interopRequireDefault(_classnames),_ws=__webpack_require__(4),_ws2=_interopRequireDefault(_ws),_reactMdl=__webpack_require__(6),_mdlExtras=__webpack_require__(7),_Publication2=__webpack_require__(19),_Publication3=_interopRequireDefault(_Publication2),any=_react.PropTypes.any,bool=_react.PropTypes.bool,string=_react.PropTypes.string,func=(_react.PropTypes.object,_react.PropTypes.func),shape=_react.PropTypes.shape,ProductCard=exports.ProductCard=(_temp=_class=function(_Publication){function ProductCard(){var _Object$getPrototypeO;_classCallCheck(this,ProductCard);for(var _len=arguments.length,props=Array(_len),_key=0;_len>_key;_key++)props[_key]=arguments[_key];var _this=_possibleConstructorReturn(this,(_Object$getPrototypeO=Object.getPrototypeOf(ProductCard)).call.apply(_Object$getPrototypeO,[this].concat(props)));return _this.state={size:{height:"100%"}},_this}return _inherits(ProductCard,_Publication),_createClass(ProductCard,[{key:"componentDidMount",value:function(){this.setState.apply(this,_toConsumableArray(this.state).concat([{size:window.innerWidth<480?{width:"100%"}:{height:"100%"}}]))}},{key:"componentWillReceiveProps",value:function(nextProps){if("object"==("undefined"==typeof window?"undefined":_typeof(window))&&nextProps.removing){var node=ReactDOM.findDOMNode(this),newState=_extends({},this.state,{rect:node.getBoundingClientRect(),win:window.innerWidth});this.setState(newState),_picolog2["default"].debug("componentWillReceiveProps: state=",this.state,", newState=",newState)}}},{key:"thumbnailClicked",value:function(images,index,event){_picolog2["default"].log("thumbnailClicked",images,index,event);var onOpenLightbox=this.context.lightbox.onOpenLightbox;event&&(event.preventDefault(),event.stopPropagation()),onOpenLightbox(images,index,event)}},{key:"dislikeClicked",value:function(product,event){return _picolog2["default"].log("dislikeClicked",product,event),event&&(event.preventDefault(),event.stopPropagation()),this.props.onDislike(product)}},{key:"loveClicked",value:function(product,event){return _picolog2["default"].log("loveClicked",product,event),event&&(event.preventDefault(),event.stopPropagation()),this.props.onLove(product)}},{key:"undoRatingClicked",value:function(product,event){return _picolog2["default"].log("undoRatingClicked",product,event),event&&(event.preventDefault(),event.stopPropagation()),this.props.onUndoRating(product)}},{key:"mayToggleStock",value:function(product){_picolog2["default"].trace("mayToggleStock",product);var result=this.props.onMayToggleStock(product);return _picolog2["default"].trace("mayToggleStock => "+result),result}},{key:"isStocked",value:function(product){_picolog2["default"].trace("isStocked",product);var result=this.props.onIsStocked(product);return _picolog2["default"].trace("isStocked => "+result),result}},{key:"toggleStockClicked",value:function(product,event){return _picolog2["default"].log("toggleStockClicked",product,event),event&&(event.preventDefault(),event.stopPropagation()),this.props.onToggleStock(product)}},{key:"render",value:function(){var _this2=this;_picolog2["default"].debug("render",this.props);var _props=this.props,className=_props.className,product=_props.product,rating=_props.rating,stocked=_props.stocked,removing=(_props.onLove,_props.onDislike,_props.onUndoRating,_props.removing),others=_objectWithoutProperties(_props,["className","product","rating","stocked","onLove","onDislike","onUndoRating","removing"]);stocked&&_picolog2["default"].debug("render: stocked ",product.id.toString());var id=product.id,name=product.name,brandId=product.brandId,description=(product.brandName,product.description),published=product.published,_state=this.state,size=_state.size,rect=_state.rect,win=_state.win,bid=((0,_ws2["default"])(id).toString(),(0,_ws2["default"])(brandId).toString()),img=(this.refs.flipCard,"data:image/gif;base64,R0lGODlhAgADAIAAAP///////yH5BAEKAAEALAAAAAACAAMAAAICjF8AOw=="),prdUrl="https://cdn.rawgit.com/Download/bridalapp-static/1.0.16/products/"+bid+"/"+encodeURIComponent(name),brandUrl="https://cdn.rawgit.com/Download/bridalapp-static/1.0.16/brands/"+bid+"/logo-brand-name.png",thumbs=prdUrl+"/thumbs.jpg",thumbnail="data:image/gif;base64,R0lGODlhAgADAIAAAP///////yH5BAEKAAEALAAAAAACAAMAAAICjF8AOw==",images=[{src:prdUrl+"/back-large.jpg",className:"back",alt:{src:img,style:_extends({},size,{backgroundImage:"url("+thumbs+")",backgroundSize:"300%",backgroundPosition:"100% 0"})}},{src:prdUrl+"/front-large.jpg",className:"front",alt:{src:img,style:_extends({},size,{backgroundImage:"url("+thumbs+")",backgroundSize:"150%",backgroundPosition:"0 0"})}},{src:prdUrl+"/detail-1-large.jpg",className:"detail-1",alt:{src:img,style:_extends({},size,{backgroundImage:"url("+thumbs+")",backgroundSize:"600%",backgroundPosition:"200% 200%"})}},{src:prdUrl+"/detail-2-large.jpg",className:"detail-2",alt:{src:img,style:_extends({},size,{backgroundImage:"url("+thumbs+")",backgroundSize:"600%",backgroundPosition:"100% 200%"})}},{src:prdUrl+"/detail-3-large.jpg",className:"detail-3",alt:{src:img,style:_extends({},size,{backgroundImage:"url("+thumbs+")",backgroundSize:"600%",backgroundPosition:"200% 100%"})}}],classes=(0,_classnames2["default"])("Product",className,{unpublished:!published,removing:removing,loved:"loved"===removing,disliked:"disliked"===removing}),width=rect?rect.right-rect.left:0,height=rect?rect.bottom-rect.top:0,trans="disliked"===removing||"undoRating"===removing?0-rect.left-width:"loved"===removing?win-rect.left:"",transform="translate3d("+trans+"px, 0, 10px) scale3d(0.2, 0.2, 0.2)",style=removing?{width:width,height:height,transform:transform,WebkitTransform:transform}:{};return _react2["default"].createElement(_mdlExtras.StatefulFlipCard,_extends({className:classes,key:id,style:style},others),_react2["default"].createElement(_mdlExtras.FrontFace,null,_react2["default"].createElement("div",{className:"content"},_react2["default"].createElement("img",{className:"ProductImage",src:img,style:{backgroundImage:"url("+thumbs+")",height:"100%"}}),rating?_react2["default"].createElement("div",{className:"RatingActions"},_react2["default"].createElement(_reactMdl.Button,{onClick:this.undoRatingClicked.bind(this,product)},"disliked"==rating?_react2["default"].createElement(_mdlExtras.Sprite,{name:"broken-heart"}):_react2["default"].createElement(_reactMdl.Icon,{name:"favorite"}),"undo")):_react2["default"].createElement("div",{className:"RatingActions"},_react2["default"].createElement(_reactMdl.FABButton,{colored:!0,className:"Rate disliked danger",onClick:this.dislikeClicked.bind(this,product)},_react2["default"].createElement(_mdlExtras.Sprite,{name:"broken-heart"})),_react2["default"].createElement(_reactMdl.FABButton,{colored:!0,className:"Rate loved",onClick:this.loveClicked.bind(this,product)},_react2["default"].createElement(_reactMdl.Icon,{name:"favorite"}))),this.mayPublish(product)?_react2["default"].createElement("div",{className:"ModActions"},published?_react2["default"].createElement(_reactMdl.FABButton,{className:"Unpublish",onClick:this.unpublishClicked.bind(this,product)},_react2["default"].createElement(_reactMdl.Icon,{name:"visibility_off"})):_react2["default"].createElement(_reactMdl.FABButton,{className:"Publish",onClick:this.publishClicked.bind(this,product)},_react2["default"].createElement(_reactMdl.Icon,{name:"visibility"}))):"",this.mayToggleStock(product)?_react2["default"].createElement("div",{className:"ActorActions"},_react2["default"].createElement(_mdlExtras.Switch,{on:stocked,name:"stock"+product.id,sprite:"stock",onChange:this.toggleStockClicked.bind(this,product)})):"")),_react2["default"].createElement(_mdlExtras.BackFace,null,_react2["default"].createElement(_reactMdl.CardTitle,null,_react2["default"].createElement("img",{className:"BrandLogo",src:brandUrl}),_react2["default"].createElement("h3",{className:"ProductName"},name||"Loading...")),_react2["default"].createElement("div",{className:"ProductGallery"},_react2["default"].createElement("div",{className:"thumbs"},images.map(function(_ref,i){var className=(_ref.src,_ref.className);return _react2["default"].createElement("img",{key:i,className:(0,_classnames2["default"])(className,"thumb"),src:thumbnail,onClick:_this2.thumbnailClicked.bind(_this2,images,i),style:{backgroundImage:"url("+thumbs+")"}})}))),_react2["default"].createElement(_reactMdl.CardText,{className:"ProductDescription"},description||"")))}}]),ProductCard}(_Publication3["default"]),_class.propTypes={className:string,product:shape({id:any,name:string,brandId:any,brandName:string,description:string,published:bool}).isRequired,rating:string,stocked:bool,onLove:func.isRequired,onDislike:func.isRequired,onUndoRating:func.isRequired,onMayToggleStock:func.isRequired,onToggleStock:func.isRequired,removing:string},_class.defaultProps={removing:""},_class.contextTypes={lightbox:shape({onOpenLightbox:func.isRequired}).isRequired},_temp);exports["default"]=ProductCard},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.ProductsApi=void 0;var _class,_class2,_temp,_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_get=function get(object,property,receiver){null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(void 0===desc){var parent=Object.getPrototypeOf(object);return null===parent?void 0:get(parent,property,receiver)}if("value"in desc)return desc.value;var getter=desc.get;if(void 0!==getter)return getter.call(receiver)},_picolog=__webpack_require__(1),_picolog2=_interopRequireDefault(_picolog),_reduxFetchApi=(__webpack_require__(5),__webpack_require__(9)),_ws=__webpack_require__(4),_ws2=_interopRequireDefault(_ws),_Entity=__webpack_require__(3),_Role=__webpack_require__(10),_api=__webpack_require__(20),_StockItem=(__webpack_require__(28),__webpack_require__(30)),_Rating=__webpack_require__(29),ProductsApi=exports.ProductsApi=(0,_reduxFetchApi.remote)((_temp=_class2=function(_PublicationApi){function ProductsApi(){var state=arguments.length<=0||void 0===arguments[0]?ProductsApi.INITIAL_STATE:arguments[0];_classCallCheck(this,ProductsApi);var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(ProductsApi).call(this,state));return _this.setHandler(ProductsApi.SET_STOCK,function(state,_ref){var payload=_ref.payload;return _extends({},state,{stockedItems:payload})}),Object.defineProperties(_this,{stockedItems:{enumerable:!0,get:function(){return _this.getState().stockedItems}}}),_this.item.onLove=_this.love.bind(_this),_this.item.onDislike=_this.dislike.bind(_this),_this.item.onUndoRating=_this.undoRating.bind(_this),_this.item.onMayToggleStock=_this.mayToggleStock.bind(_this),_this.item.onIsStocked=_this.isStocked.bind(_this),_this.item.onToggleStock=_this.toggleStock.bind(_this),_this}return _inherits(ProductsApi,_PublicationApi),_createClass(ProductsApi,[{key:"searchUrl",value:function(filter){var result=filter.category?"/"+filter.category:"/Wedding+Dresses",clone=_extends({},filter);return delete clone.category,result+_get(Object.getPrototypeOf(ProductsApi.prototype),"searchUrl",this).call(this,clone)}},{key:"search",value:function(params){var _this2=this;_picolog2["default"].log("search");var store=this.getParent().stores.managedStore,storeLoaded=store?Promise.resolve(store):this.auth.isAny(_Role.Role.STORE_ROLES)?this.getParent().stores.loadManagedStores().then(function(){return _this2.getParent().stores.managedStore}):Promise.resolve(null),stockLoaded=storeLoaded.then(function(store){return _picolog2["default"].debug("storeLoaded: ",store),store?_this2.loadStock(store):Promise.resolve({})});return stockLoaded.then(function(stock){return _picolog2["default"].debug("stockLoaded: ",stock),_get(Object.getPrototypeOf(ProductsApi.prototype),"search",_this2).call(_this2,params)})}},{key:"rate",value:function(product,rating){return _picolog2["default"].log("rate",product,rating),this.fetch("/ratings",{method:"POST",headers:{"Content-Type":"application/json"},body:(0,_Entity.toJSON)(rating)}).then(function(response){return response&&200===response.status?response.text():(0,_Entity.toError)(response)}).then(function(text){return(0,_Entity.fromJSON)(text)})["catch"](function(error){_picolog2["default"].error("Unable to create rating for product "+product.id.toString()+" "+product.name+" by "+product.brandName+".",error)})}},{key:"unrate",value:function(product){return _picolog2["default"].log("unrate",product),this.fetch("/ratings",{method:"DELETE",headers:{"Content-Type":"application/json"},body:(0,_Entity.toJSON)(product)}).then(function(response){return response&&200===response.status?response.text():(0,_Entity.toError)(response)}).then(function(text){return(0,_Entity.fromJSON)(text)})["catch"](function(error){_picolog2["default"].error("Unable to delete rating for product "+product.id.toString()+" "+product.name+" by "+product.brandName+".",error)})}},{key:"love",value:function(product){var _this3=this;return _picolog2["default"].log("love",product),this.authenticated().then(function(session){_picolog2["default"].debug("authenticated",session);var rating={id:_ws2["default"].next(),productId:product.id,accountId:session.user.id,score:"loved"};return _this3.rate(product,new _Rating.Rating(rating))})["catch"](function(error){return _picolog2["default"].log("authentication failed.",error)})}},{key:"dislike",value:function(product){var _this4=this;return _picolog2["default"].log("dislike",product),this.authenticated().then(function(session){return _this4.rate(product,new _Rating.Rating({id:_ws2["default"].next(),productId:product.id,accountId:session.user.id,score:"disliked"}))})}},{key:"undoRating",value:function(product){return _picolog2["default"].log("undoRating",product),this.unrate(product)}},{key:"loadStock",value:function(store){var _this5=this;return _picolog2["default"].debug("loadStock",store),this.fetch("/stock?storeId="+store.id.toString()).then(function(response){return response&&200===response.status?response.text():(0,_Entity.toError)(response)}).then(function(text){return(0,_Entity.fromJSON)(text)}).then(function(json){_picolog2["default"].log("loadStock: OK got "+json.length+" results");for(var stockItem,stock={},i=0;stockItem=json[i];i++)stock[stockItem.productId.toString()]=stockItem;return _this5.setStock(stock),_picolog2["default"].debug("loadStock: this.stockedItems=",_this5.stockedItems),stock})["catch"](function(error){return _picolog2["default"].error("loadStock: error=",error)})}},{key:"setStock",value:function(stock){return _picolog2["default"].debug("setStock",stock),this.dispatch(this.createAction(ProductsApi.SET_STOCK)(stock))}},{key:"mayToggleStock",value:function(product){_picolog2["default"].trace("mayToggleStock",product);var result=!(!this.getSession().user||!this.getParent().stores.managedStore);return _picolog2["default"].trace("mayToggleStock => "+result),result}},{key:"isStocked",value:function(product){_picolog2["default"].trace("isStocked",product);var result=!!this.stockedItems[product.id.toString()];return _picolog2["default"].trace("isStocked => "+result),result}},{key:"toggleStock",value:function(product){var _this6=this,pid=product.id.toString(),store=this.getParent().stores.managedStore;if(!store)return Promise.reject(new Error("No managed store selected"));var isStocked=this.isStocked(product);_picolog2["default"].debug("toggleStock",!isStocked,pid,store);var stockItem=isStocked?this.stockedItems[pid]:new _StockItem.StockItem({id:_ws2["default"].next(),storeId:store.id,productId:product.id});_picolog2["default"].debug("toggleStock: stockItem=",stockItem);var newStock=_extends({},this.stockedItems);return isStocked?delete newStock[pid]:newStock[pid]=stockItem,this.setStock(newStock),_picolog2["default"].debug("toggleStock: OPTIMISTIC: newStock=",newStock),this.fetch("/stock",{method:isStocked?"DELETE":"POST",headers:{"Content-Type":"application/json"},body:(0,_Entity.toJSON)(stockItem)}).then(function(response){return response&&200===response.status?response.text():(0,_Entity.toError)(response)}).then(function(text){return(0,_Entity.fromJSON)(text)}).then(function(stockItem){return _picolog2["default"].debug("toggleStock: COMMIT: newStock=",newStock),isStocked||_this6.setStock(_extends({},_this6.stockedItems,_defineProperty({},pid,stockItem))),stockItem})["catch"](function(error){_picolog2["default"].error("Unable to toggle stock for product "+product.id.toString()+" "+product.name+" by "+product.brandName+".",error);var newStock=_extends({},_this6.stockedItems);isStocked?newStock[pid]=stockItem:delete newStock[pid],_this6.setStock(newStock)})}}]),ProductsApi}(_api.PublicationApi),_class2.SET_STOCK="SET_STOCK",_class2.INITIAL_STATE=_extends({},_api.PublicationApi.INITIAL_STATE,{stockedItems:{}}),_class=_temp))||_class;exports["default"]=ProductsApi},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function load(params){return _picolog2["default"].log("load",params),bridalapp.stores.search(params).then(function(results){return _picolog2["default"].log("load: search returned "+results.length+" stores."),results})["catch"](function(error){return _picolog2["default"].error("Searching stores failed.",error),error})}Object.defineProperty(exports,"__esModule",{value:!0}),exports.StoreBrowserAppBar=exports.StoreBrowser=void 0;var _dec,_dec2,_class,_class2,_temp,_dec3,_class3,_class4,_temp2,_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_picolog=__webpack_require__(1),_picolog2=_interopRequireDefault(_picolog),_react=__webpack_require__(2),_react2=_interopRequireDefault(_react),_shallowEqual=__webpack_require__(14),_shallowEqual2=_interopRequireDefault(_shallowEqual),_reactRedux=__webpack_require__(13),_reduxLoadApi=__webpack_require__(22),_reactMdl=__webpack_require__(6),_store=__webpack_require__(12),_api=(_interopRequireDefault(_store),__webpack_require__(11)),_FilterPanel=(_interopRequireDefault(_api),__webpack_require__(17)),_FilterPanel2=_interopRequireDefault(_FilterPanel),_mdlExtras=__webpack_require__(7),_Scroller=__webpack_require__(21),_Scroller2=_interopRequireDefault(_Scroller),_StoreCard=__webpack_require__(55),_StoreCard2=_interopRequireDefault(_StoreCard),bool=_react.PropTypes.bool,object=_react.PropTypes.object,func=_react.PropTypes.func,array=_react.PropTypes.array,shape=_react.PropTypes.shape,any=_react.PropTypes.any,StoreBrowser=exports.StoreBrowser=(_dec=(0,_reduxLoadApi.onload)(load),_dec2=(0,_reactRedux.connect)(bridalapp.stores.connector),_dec(_class=_dec2((_temp=_class2=function(_React$Component){function StoreBrowser(){return _classCallCheck(this,StoreBrowser),_possibleConstructorReturn(this,Object.getPrototypeOf(StoreBrowser).apply(this,arguments))}return _inherits(StoreBrowser,_React$Component),_createClass(StoreBrowser,[{key:"componentDidMount",value:function(){_picolog2["default"].debug("componentDidMount()");var _props=this.props,pending=_props.pending,error=_props.error,params=_props.params;(pending||error)&&load(params)}},{key:"componentWillReceiveProps",value:function(nextProps){_picolog2["default"].debug("componentWillReceiveProps",nextProps);var newFilter=_extends({},nextProps.location.query,nextProps.params),pathChanged=nextProps.location.pathname!==this.props.location.pathname,queryChanged=!(0,_shallowEqual2["default"])(nextProps.location.query,this.props.location.query);(pathChanged||queryChanged||nextProps.pending&&!this.props.pending)&&load(newFilter)}},{key:"render",value:function(){_picolog2["default"].debug("render",this.props);var _props2=this.props,location=(_props2.params,_props2.location),filter=_props2.filter,onSearch=_props2.onSearch,items=(_props2.pending,_props2.error,_props2.items),item=(_props2.onItemsChange,_props2.item),filterProps=_extends({onSearch:onSearch,location:location},filter);return _react2["default"].createElement("div",{style:{boxSizing:"border-box",height:"100%"}},_react2["default"].createElement(_FilterPanel2["default"],filterProps),_react2["default"].createElement(_Scroller2["default"],{className:"StoreBrowser",bufferBefore:4,items:items,bufferAfter:8,renderItem:function(store,idx){var props=_extends({store:store},item,{frontLoadDelay:10>idx?0:500,backLoadDelay:10>idx?0:2500});return _react2["default"].createElement(_StoreCard2["default"],props)}}))}}]),StoreBrowser}(_react2["default"].Component),_class2.propTypes={params:object.isRequired,location:shape({query:object}).isRequired,filter:shape({values:object.isRequired}).isRequired,items:array.isRequired,pending:bool.isRequired,error:any,onSearch:func.isRequired,onItemsChange:func.isRequired,item:shape({onMayPublish:func.isRequired,onPublish:func.isRequired,onUnpublish:func.isRequired}).isRequired},_class=_temp))||_class)||_class);exports["default"]=StoreBrowser;exports.StoreBrowserAppBar=(_dec3=(0,_reactRedux.connect)(bridalapp.stores.connector),_dec3((_temp2=_class4=function(_Component){function StoreBrowserAppBar(){var _Object$getPrototypeO;_classCallCheck(this,StoreBrowserAppBar);for(var _len=arguments.length,args=Array(_len),_key=0;_len>_key;_key++)args[_key]=arguments[_key];var _this2=_possibleConstructorReturn(this,(_Object$getPrototypeO=Object.getPrototypeOf(StoreBrowserAppBar)).call.apply(_Object$getPrototypeO,[this].concat(args)));return _this2.filterClicked=_this2.filterClicked.bind(_this2),_this2}return _inherits(StoreBrowserAppBar,_Component),_createClass(StoreBrowserAppBar,[{key:"filterClicked",value:function(event){_picolog2["default"].log("filterClicked",event),event&&event.preventDefault();var _props$filter=this.props.filter,open=_props$filter.open,onActivate=_props$filter.onActivate,onCancel=_props$filter.onCancel;open?onCancel():onActivate()}},{key:"render",value:function(){return _react2["default"].createElement(_mdlExtras.Badge,{className:"mdl-navigation__link",text:""+this.props.items.length,onClick:this.filterClicked},_react2["default"].createElement(_reactMdl.Icon,{name:"search"}))}}]),StoreBrowserAppBar}(_react.Component),_class4.propTypes={filter:shape({open:bool.isRequired,
onActivate:func.isRequired,onCancel:func.isRequired}).isRequired,items:array.isRequired},_class3=_temp2))||_class3)},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.StoreCard=void 0;var _class,_temp,_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_picolog=__webpack_require__(1),_picolog2=_interopRequireDefault(_picolog),_react=__webpack_require__(2),_react2=_interopRequireDefault(_react),_classnames=__webpack_require__(8),_classnames2=_interopRequireDefault(_classnames),_reactMdl=__webpack_require__(6),_ws=__webpack_require__(4),_mdlExtras=(_interopRequireDefault(_ws),__webpack_require__(7)),_Publication2=__webpack_require__(19),_Publication3=_interopRequireDefault(_Publication2),any=_react.PropTypes.any,bool=_react.PropTypes.bool,string=_react.PropTypes.string,func=(_react.PropTypes.object,_react.PropTypes.func),shape=_react.PropTypes.shape,StoreCard=exports.StoreCard=(_temp=_class=function(_Publication){function StoreCard(){var _Object$getPrototypeO;_classCallCheck(this,StoreCard);for(var _len=arguments.length,props=Array(_len),_key=0;_len>_key;_key++)props[_key]=arguments[_key];var _this=_possibleConstructorReturn(this,(_Object$getPrototypeO=Object.getPrototypeOf(StoreCard)).call.apply(_Object$getPrototypeO,[this].concat(props)));return _this.state={logoMissing:!1,thumbMissing:!1},_this}return _inherits(StoreCard,_Publication),_createClass(StoreCard,[{key:"impersonateClicked",value:function(store,event){_picolog2["default"].log("impersonate",store,event),event.preventDefault(),this.props.onImpersonate(store)}},{key:"render",value:function(){var _this2=this;_picolog2["default"].debug("render",this.props);var _props=this.props,store=_props.store,mayImpersonate=_props.mayImpersonate,id=store.id,name=store.name,description=store.description,address1=store.address1,address2=store.address2,city=(store.postalCode,store.city),premium=(store.state,store.countryCode,store.telephone,store.website,store.premium),published=store.published,sid=id.toString(),logo="https://cdn.rawgit.com/Download/bridalapp-static/1.0.16/stores/"+sid+"/logo.png",thumb="https://cdn.rawgit.com/Download/bridalapp-static/1.0.16/stores/"+sid+"/thumb.jpg",classes=(0,_classnames2["default"])("Store",{premium:premium,unpublished:!published}),publishButton=this.mayPublish(store)?published?_react2["default"].createElement(_reactMdl.FABButton,{className:"Unpublish",onClick:this.unpublishClicked.bind(this,store)},_react2["default"].createElement(_reactMdl.Icon,{name:"visibility_off"})):_react2["default"].createElement(_reactMdl.FABButton,{className:"Publish",onClick:this.publishClicked.bind(this,store)},_react2["default"].createElement(_reactMdl.Icon,{name:"visibility"})):"",impersonateButton=mayImpersonate?_react2["default"].createElement(_reactMdl.FABButton,{className:"Impersonate",onClick:this.impersonateClicked.bind(this,store)},_react2["default"].createElement(_reactMdl.Icon,{name:"verified_user"})):"";return _react2["default"].createElement(_mdlExtras.StatefulFlipCard,{className:classes,key:sid},_react2["default"].createElement(_mdlExtras.FrontFace,null,_react2["default"].createElement(_reactMdl.CardTitle,null,this.state.logoMissing?_react2["default"].createElement("h3",{className:"StoreLogoAlt"},name):_react2["default"].createElement("img",{className:"StoreLogo",src:logo,onError:function(){return _this2.setState(_extends({},_this2.state,{logoMissing:!0}))}})),_react2["default"].createElement("div",{className:"mdl-card__content"},this.state.thumbMissing?_react2["default"].createElement("div",{className:"StoreThumbAlt"}):_react2["default"].createElement("img",{className:"StoreThumb",src:thumb,onError:function(){return _this2.setState(_extends({},_this2.state,{thumbMissing:!0}))}}),_react2["default"].createElement(_reactMdl.CardText,{className:"StoreDescription"},description)),mayImpersonate||this.mayPublish(store)?_react2["default"].createElement("div",{className:"ModActions"},publishButton,impersonateButton):""),_react2["default"].createElement(_mdlExtras.BackFace,null,_react2["default"].createElement(_reactMdl.CardTitle,null,this.state.logoMissing?_react2["default"].createElement("h3",{className:"StoreLogoAlt"},name):_react2["default"].createElement("img",{style:{filter:"grayscale(1)"},className:"StoreLogo",src:logo,onError:function(){return _this2.setState(_extends({},_this2.state,{logoMissing:!0}))}})),_react2["default"].createElement("p",null,description),_react2["default"].createElement("address",null,address1,_react2["default"].createElement("br",null),address2,_react2["default"].createElement("br",null),city)))}}]),StoreCard}(_Publication3["default"]),_class.propTypes={store:shape({id:any,name:string,description:string,address1:string,address2:string,postalCode:string,city:string,state:string,countryCode:string,telephone:string,website:string,email:string,premium:bool.isRequired}).isRequired,mayImpersonate:bool.isRequired,onImpersonate:func.isRequired},_temp);exports["default"]=StoreCard},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.StoresApi=void 0;var _class,_class2,_temp,_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_picolog=__webpack_require__(1),_picolog2=_interopRequireDefault(_picolog),_reduxFetchApi=(__webpack_require__(5),__webpack_require__(9)),_Role=__webpack_require__(10),_api=__webpack_require__(16),_api2=__webpack_require__(20),_Entity=__webpack_require__(3),_Store=__webpack_require__(31),StoresApi=(_interopRequireDefault(_Store),exports.StoresApi=(0,_reduxFetchApi.remote)(_class=(0,_api.authenticated)((_temp=_class2=function(_PublicationApi){function StoresApi(){var state=arguments.length<=0||void 0===arguments[0]?StoresApi.INITIAL_STATE:arguments[0];_classCallCheck(this,StoresApi);var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(StoresApi).call(this,state));return _this.setHandler(StoresApi.SET_MANAGED_STORES,function(state,_ref){var payload=_ref.payload;return _extends({},state,{managedStores:payload})}),_this.setHandler(StoresApi.SET_MANAGED_STORE_INDEX,function(state,_ref2){var payload=_ref2.payload;return _extends({},state,{managedStoreIndex:payload})}),Object.defineProperties(_this,{managedStores:{enumerable:!0,get:function(){return _this.getState().managedStores}},managedStoreIndex:{enumerable:!0,get:function(){return _this.getState().managedStoreIndex}},managedStore:{enumerable:!0,get:function(){return _this.managedStores[_this.managedStoreIndex]}}}),Object.defineProperties(_this.item,{mayImpersonate:{enumerable:!0,get:function(){return _this.auth.is(_Role.Role.ADMINISTRATOR)||_this.auth.isAny(_Role.Role.BRAUTSCHLOSS_ROLES)}},onImpersonate:{enumerable:!0,value:_this.impersonate.bind(_this)}}),_this}return _inherits(StoresApi,_PublicationApi),_createClass(StoresApi,[{key:"setManagedStores",value:function(stores){return this.dispatch(this.createAction(StoresApi.SET_MANAGED_STORES)(stores))}},{key:"setManagedStoreIndex",value:function(index){return this.dispatch(this.createAction(StoresApi.SET_MANAGED_STORE_INDEX)(index))}},{key:"loadManagedStores",value:function(){var _this2=this;return _picolog2["default"].debug("loadManagedStores"),this.fetch("/managed").then(function(response){return response&&200===response.status?response.text():response.text().then(function(text){return(0,_Entity.toError)(text)})}).then(function(text){return(0,_Entity.fromJSON)(text)}).then(function(json){return _picolog2["default"].debug("loadManagedStores: OK got "+json.length+" results"),_this2.setManagedStores(json),_picolog2["default"].debug("loadManagedStores: this.managedStores=",_this2.managedStores),json})["catch"](function(error){_picolog2["default"].error("loadManagedStores: error=",error)})}},{key:"impersonate",value:function(store){this.setManagedStores([store]),this.setManagedStoreIndex(0),this.getParent().products.loadStock(this.managedStore)}}]),StoresApi}(_api2.PublicationApi),_class2.INITIAL_STATE=_extends({},_api2.PublicationApi.INITIAL_STATE,{managedStores:[],managedStoreIndex:0}),_class2.SET_MANAGED_STORES="SET_MANAGED_STORES",_class2.SET_MANAGED_STORE_INDEX="SET_MANAGED_STORE_INDEX",_class=_temp))||_class)||_class);exports["default"]=StoresApi},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.routes=void 0;var _picolog=__webpack_require__(1),_react=(_interopRequireDefault(_picolog),__webpack_require__(2)),_react2=_interopRequireDefault(_react),_reactRouter=__webpack_require__(15),_App=__webpack_require__(41),_App2=_interopRequireDefault(_App),_Home=__webpack_require__(50),_ProductBrowser=(_interopRequireDefault(_Home),__webpack_require__(51)),_ProductBrowser2=_interopRequireDefault(_ProductBrowser),_BrandBrowser=__webpack_require__(45),_BrandBrowser2=_interopRequireDefault(_BrandBrowser),_StoreBrowser=__webpack_require__(54),_StoreBrowser2=_interopRequireDefault(_StoreBrowser),routes=exports.routes=_react2["default"].createElement(_reactRouter.Route,{path:"/",component:_App2["default"]},"// redirect to 'Wedding Dresses' for the time being // until we get a decent homepage",_react2["default"].createElement(_reactRouter.IndexRedirect,{to:"/Wedding+Dresses"}),_react2["default"].createElement(_reactRouter.Route,{path:"/brands",components:{appbarComponent:_BrandBrowser.BrandBrowserAppBar,mainComponent:_BrandBrowser2["default"]}}),_react2["default"].createElement(_reactRouter.Route,{path:"/stores",components:{appbarComponent:_StoreBrowser.StoreBrowserAppBar,mainComponent:_StoreBrowser2["default"]}}),"// products are mounted at the root, but you must always specify // a category, so as long as category names do not conflict with // root paths, this will work. // so don't create a category 'stores'  :) // TODO, probably if we hardcode the only two ratings, // 'loved' and 'disliked', we will open up more options // for short URLs, such as // '/:category/:country' // '/:category/:country/:city'",_react2["default"].createElement(_reactRouter.Route,{path:"/:rating/:category",components:{appbarComponent:_ProductBrowser.ProductBrowserAppBar,mainComponent:_ProductBrowser2["default"]}}),_react2["default"].createElement(_reactRouter.Route,{path:"/:category",components:{appbarComponent:_ProductBrowser.ProductBrowserAppBar,mainComponent:_ProductBrowser2["default"]}}));exports["default"]=routes},function(module,exports){"use strict";var REACT_STATICS={childContextTypes:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,mixins:!0,propTypes:!0,type:!0},KNOWN_STATICS={name:!0,length:!0,prototype:!0,caller:!0,arguments:!0,arity:!0};module.exports=function(targetComponent,sourceComponent){for(var keys=Object.getOwnPropertyNames(sourceComponent),i=0;i<keys.length;++i)if(!REACT_STATICS[keys[i]]&&!KNOWN_STATICS[keys[i]])try{targetComponent[keys[i]]=sourceComponent[keys[i]]}catch(error){}return targetComponent}},function(module,exports,__webpack_require__){"use strict";var invariant=function(condition,format,a,b,c,d,e,f){if(!condition){var error;if(void 0===format)error=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var args=[a,b,c,d,e,f],argIndex=0;error=new Error(format.replace(/%s/g,function(){return args[argIndex++]})),error.name="Invariant Violation"}throw error.framesToPop=1,error}};module.exports=invariant},function(module,exports){function cleanUpNextTick(){draining=!1,currentQueue.length?queue=currentQueue.concat(queue):queueIndex=-1,queue.length&&drainQueue()}function drainQueue(){if(!draining){var timeout=setTimeout(cleanUpNextTick);draining=!0;for(var len=queue.length;len;){for(currentQueue=queue,queue=[];++queueIndex<len;)currentQueue&&currentQueue[queueIndex].run();queueIndex=-1,len=queue.length}currentQueue=null,draining=!1,clearTimeout(timeout)}}function Item(fun,array){this.fun=fun,this.array=array}function noop(){}var currentQueue,process=module.exports={},queue=[],draining=!1,queueIndex=-1;process.nextTick=function(fun){var args=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)args[i-1]=arguments[i];queue.push(new Item(fun,args)),1!==queue.length||draining||setTimeout(drainQueue,0)},Item.prototype.run=function(){this.fun.apply(null,this.array)},process.title="browser",process.browser=!0,process.env={},process.argv=[],process.version="",process.versions={},process.on=noop,process.addListener=noop,process.once=noop,process.off=noop,process.removeListener=noop,process.removeAllListeners=noop,process.emit=noop,process.binding=function(name){throw new Error("process.binding is not supported")},process.cwd=function(){return"/"},process.chdir=function(dir){throw new Error("process.chdir is not supported")},process.umask=function(){return 0}},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.__esModule=!0,exports["default"]=void 0;var _react=__webpack_require__(2),_storeShape=__webpack_require__(32),_storeShape2=_interopRequireDefault(_storeShape),_warning=__webpack_require__(33),Provider=(_interopRequireDefault(_warning),function(_Component){function Provider(props,context){_classCallCheck(this,Provider);var _this=_possibleConstructorReturn(this,_Component.call(this,props,context));return _this.store=props.store,_this}return _inherits(Provider,_Component),Provider.prototype.getChildContext=function(){return{store:this.store}},Provider.prototype.render=function(){var children=this.props.children;return _react.Children.only(children)},Provider}(_react.Component));exports["default"]=Provider,Provider.propTypes={store:_storeShape2["default"].isRequired,children:_react.PropTypes.element.isRequired},Provider.childContextTypes={store:_storeShape2["default"].isRequired}},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function getDisplayName(WrappedComponent){return WrappedComponent.displayName||WrappedComponent.name||"Component"}function tryCatch(fn,ctx){try{return fn.apply(ctx)}catch(e){return errorObject.value=e,errorObject}}function connect(mapStateToProps,mapDispatchToProps,mergeProps){var options=arguments.length<=3||void 0===arguments[3]?{}:arguments[3],shouldSubscribe=Boolean(mapStateToProps),mapState=mapStateToProps||defaultMapStateToProps,mapDispatch=void 0;mapDispatch="function"==typeof mapDispatchToProps?mapDispatchToProps:mapDispatchToProps?(0,_wrapActionCreators2["default"])(mapDispatchToProps):defaultMapDispatchToProps;var finalMergeProps=mergeProps||defaultMergeProps,_options$pure=options.pure,pure=void 0===_options$pure?!0:_options$pure,_options$withRef=options.withRef,withRef=void 0===_options$withRef?!1:_options$withRef,checkMergedEquals=pure&&finalMergeProps!==defaultMergeProps,version=nextVersion++;return function(WrappedComponent){function computeMergedProps(stateProps,dispatchProps,parentProps){var mergedProps=finalMergeProps(stateProps,dispatchProps,parentProps);return mergedProps}var connectDisplayName="Connect("+getDisplayName(WrappedComponent)+")",Connect=function(_Component){function Connect(props,context){_classCallCheck(this,Connect);var _this=_possibleConstructorReturn(this,_Component.call(this,props,context));_this.version=version,_this.store=props.store||context.store,(0,_invariant2["default"])(_this.store,'Could not find "store" in either the context or '+('props of "'+connectDisplayName+'". ')+"Either wrap the root component in a <Provider>, "+('or explicitly pass "store" as a prop to "'+connectDisplayName+'".'));var storeState=_this.store.getState();return _this.state={storeState:storeState},_this.clearCache(),_this}return _inherits(Connect,_Component),Connect.prototype.shouldComponentUpdate=function(){return!pure||this.haveOwnPropsChanged||this.hasStoreStateChanged},Connect.prototype.computeStateProps=function(store,props){if(!this.finalMapStateToProps)return this.configureFinalMapState(store,props);var state=store.getState(),stateProps=this.doStatePropsDependOnOwnProps?this.finalMapStateToProps(state,props):this.finalMapStateToProps(state);return stateProps},Connect.prototype.configureFinalMapState=function(store,props){var mappedState=mapState(store.getState(),props),isFactory="function"==typeof mappedState;return this.finalMapStateToProps=isFactory?mappedState:mapState,this.doStatePropsDependOnOwnProps=1!==this.finalMapStateToProps.length,isFactory?this.computeStateProps(store,props):mappedState},Connect.prototype.computeDispatchProps=function(store,props){if(!this.finalMapDispatchToProps)return this.configureFinalMapDispatch(store,props);var dispatch=store.dispatch,dispatchProps=this.doDispatchPropsDependOnOwnProps?this.finalMapDispatchToProps(dispatch,props):this.finalMapDispatchToProps(dispatch);return dispatchProps},Connect.prototype.configureFinalMapDispatch=function(store,props){var mappedDispatch=mapDispatch(store.dispatch,props),isFactory="function"==typeof mappedDispatch;return this.finalMapDispatchToProps=isFactory?mappedDispatch:mapDispatch,this.doDispatchPropsDependOnOwnProps=1!==this.finalMapDispatchToProps.length,isFactory?this.computeDispatchProps(store,props):mappedDispatch},Connect.prototype.updateStatePropsIfNeeded=function(){var nextStateProps=this.computeStateProps(this.store,this.props);return this.stateProps&&(0,_shallowEqual2["default"])(nextStateProps,this.stateProps)?!1:(this.stateProps=nextStateProps,!0)},Connect.prototype.updateDispatchPropsIfNeeded=function(){var nextDispatchProps=this.computeDispatchProps(this.store,this.props);return this.dispatchProps&&(0,_shallowEqual2["default"])(nextDispatchProps,this.dispatchProps)?!1:(this.dispatchProps=nextDispatchProps,!0)},Connect.prototype.updateMergedPropsIfNeeded=function(){var nextMergedProps=computeMergedProps(this.stateProps,this.dispatchProps,this.props);return this.mergedProps&&checkMergedEquals&&(0,_shallowEqual2["default"])(nextMergedProps,this.mergedProps)?!1:(this.mergedProps=nextMergedProps,!0)},Connect.prototype.isSubscribed=function(){return"function"==typeof this.unsubscribe},Connect.prototype.trySubscribe=function(){shouldSubscribe&&!this.unsubscribe&&(this.unsubscribe=this.store.subscribe(this.handleChange.bind(this)),this.handleChange())},Connect.prototype.tryUnsubscribe=function(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null)},Connect.prototype.componentDidMount=function(){this.trySubscribe()},Connect.prototype.componentWillReceiveProps=function(nextProps){pure&&(0,_shallowEqual2["default"])(nextProps,this.props)||(this.haveOwnPropsChanged=!0)},Connect.prototype.componentWillUnmount=function(){this.tryUnsubscribe(),this.clearCache()},Connect.prototype.clearCache=function(){this.dispatchProps=null,this.stateProps=null,this.mergedProps=null,this.haveOwnPropsChanged=!0,this.hasStoreStateChanged=!0,this.haveStatePropsBeenPrecalculated=!1,this.statePropsPrecalculationError=null,this.renderedElement=null,this.finalMapDispatchToProps=null,this.finalMapStateToProps=null},Connect.prototype.handleChange=function(){if(this.unsubscribe){var storeState=this.store.getState(),prevStoreState=this.state.storeState;if(!pure||prevStoreState!==storeState){if(pure&&!this.doStatePropsDependOnOwnProps){var haveStatePropsChanged=tryCatch(this.updateStatePropsIfNeeded,this);if(!haveStatePropsChanged)return;haveStatePropsChanged===errorObject&&(this.statePropsPrecalculationError=errorObject.value),this.haveStatePropsBeenPrecalculated=!0}this.hasStoreStateChanged=!0,this.setState({storeState:storeState})}}},Connect.prototype.getWrappedInstance=function(){return(0,_invariant2["default"])(withRef,"To access the wrapped instance, you need to specify { withRef: true } as the fourth argument of the connect() call."),this.refs.wrappedInstance},Connect.prototype.render=function(){var haveOwnPropsChanged=this.haveOwnPropsChanged,hasStoreStateChanged=this.hasStoreStateChanged,haveStatePropsBeenPrecalculated=this.haveStatePropsBeenPrecalculated,statePropsPrecalculationError=this.statePropsPrecalculationError,renderedElement=this.renderedElement;if(this.haveOwnPropsChanged=!1,this.hasStoreStateChanged=!1,this.haveStatePropsBeenPrecalculated=!1,this.statePropsPrecalculationError=null,statePropsPrecalculationError)throw statePropsPrecalculationError;var shouldUpdateStateProps=!0,shouldUpdateDispatchProps=!0;pure&&renderedElement&&(shouldUpdateStateProps=hasStoreStateChanged||haveOwnPropsChanged&&this.doStatePropsDependOnOwnProps,shouldUpdateDispatchProps=haveOwnPropsChanged&&this.doDispatchPropsDependOnOwnProps);var haveStatePropsChanged=!1,haveDispatchPropsChanged=!1;haveStatePropsBeenPrecalculated?haveStatePropsChanged=!0:shouldUpdateStateProps&&(haveStatePropsChanged=this.updateStatePropsIfNeeded()),shouldUpdateDispatchProps&&(haveDispatchPropsChanged=this.updateDispatchPropsIfNeeded());var haveMergedPropsChanged=!0;return haveMergedPropsChanged=haveStatePropsChanged||haveDispatchPropsChanged||haveOwnPropsChanged?this.updateMergedPropsIfNeeded():!1,!haveMergedPropsChanged&&renderedElement?renderedElement:(withRef?this.renderedElement=(0,_react.createElement)(WrappedComponent,_extends({},this.mergedProps,{ref:"wrappedInstance"})):this.renderedElement=(0,_react.createElement)(WrappedComponent,this.mergedProps),this.renderedElement)},Connect}(_react.Component);return Connect.displayName=connectDisplayName,Connect.WrappedComponent=WrappedComponent,Connect.contextTypes={store:_storeShape2["default"]},Connect.propTypes={store:_storeShape2["default"]},(0,_hoistNonReactStatics2["default"])(Connect,WrappedComponent)}}var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};exports.__esModule=!0,exports["default"]=connect;var _react=__webpack_require__(2),_storeShape=__webpack_require__(32),_storeShape2=_interopRequireDefault(_storeShape),_shallowEqual=__webpack_require__(63),_shallowEqual2=_interopRequireDefault(_shallowEqual),_wrapActionCreators=__webpack_require__(64),_wrapActionCreators2=_interopRequireDefault(_wrapActionCreators),_warning=__webpack_require__(33),_isPlainObject=(_interopRequireDefault(_warning),__webpack_require__(68)),_hoistNonReactStatics=(_interopRequireDefault(_isPlainObject),__webpack_require__(58)),_hoistNonReactStatics2=_interopRequireDefault(_hoistNonReactStatics),_invariant=__webpack_require__(59),_invariant2=_interopRequireDefault(_invariant),defaultMapStateToProps=function(state){return{}},defaultMapDispatchToProps=function(dispatch){return{dispatch:dispatch}},defaultMergeProps=function(stateProps,dispatchProps,parentProps){return _extends({},parentProps,stateProps,dispatchProps)},errorObject={value:null},nextVersion=0},function(module,exports){"use strict";function shallowEqual(objA,objB){if(objA===objB)return!0;var keysA=Object.keys(objA),keysB=Object.keys(objB);if(keysA.length!==keysB.length)return!1;for(var hasOwn=Object.prototype.hasOwnProperty,i=0;i<keysA.length;i++)if(!hasOwn.call(objB,keysA[i])||objA[keysA[i]]!==objB[keysA[i]])return!1;return!0}exports.__esModule=!0,exports["default"]=shallowEqual},function(module,exports,__webpack_require__){"use strict";function wrapActionCreators(actionCreators){return function(dispatch){return(0,_redux.bindActionCreators)(actionCreators,dispatch)}}exports.__esModule=!0,exports["default"]=wrapActionCreators;var _redux=__webpack_require__(37)},function(module,exports){function getPrototype(value){return nativeGetPrototype(Object(value))}var nativeGetPrototype=Object.getPrototypeOf;module.exports=getPrototype},function(module,exports){function isHostObject(value){var result=!1;if(null!=value&&"function"!=typeof value.toString)try{result=!!(value+"")}catch(e){}return result}module.exports=isHostObject},function(module,exports){function isObjectLike(value){return!!value&&"object"==typeof value}module.exports=isObjectLike},function(module,exports,__webpack_require__){function isPlainObject(value){if(!isObjectLike(value)||objectToString.call(value)!=objectTag||isHostObject(value))return!1;var proto=getPrototype(value);if(null===proto)return!0;var Ctor=hasOwnProperty.call(proto,"constructor")&&proto.constructor;return"function"==typeof Ctor&&Ctor instanceof Ctor&&funcToString.call(Ctor)==objectCtorString}var getPrototype=__webpack_require__(65),isHostObject=__webpack_require__(66),isObjectLike=__webpack_require__(67),objectTag="[object Object]",objectProto=Object.prototype,funcToString=Function.prototype.toString,hasOwnProperty=objectProto.hasOwnProperty,objectCtorString=funcToString.call(Object),objectToString=objectProto.toString;module.exports=isPlainObject},function(module,exports){"use strict";function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}return Array.from(arr)}function _typeof(obj){return obj&&"undefined"!=typeof Symbol&&obj.constructor===Symbol?"symbol":typeof obj}function getLogLevel(level,action,payload,type){switch("undefined"==typeof level?"undefined":_typeof(level)){case"object":return"function"==typeof level[type]?level[type].apply(level,_toConsumableArray(payload)):level[type];case"function":return level(action);default:return level}}function createLogger(){function printBuffer(){logBuffer.forEach(function(logEntry,key){var started=logEntry.started,startedTime=logEntry.startedTime,action=logEntry.action,prevState=logEntry.prevState,error=logEntry.error,took=logEntry.took,nextState=logEntry.nextState,nextEntry=logBuffer[key+1];nextEntry&&(nextState=nextEntry.prevState,took=nextEntry.started-started);var formattedAction=actionTransformer(action),isCollapsed="function"==typeof collapsed?collapsed(function(){return nextState},action):collapsed,formattedTime=formatTime(startedTime),titleCSS=colors.title?"color: "+colors.title(formattedAction)+";":null,title="action "+(timestamp?formattedTime:"")+" "+formattedAction.type+" "+(duration?"(in "+took.toFixed(2)+" ms)":"");try{isCollapsed?colors.title?logger.groupCollapsed("%c "+title,titleCSS):logger.groupCollapsed(title):colors.title?logger.group("%c "+title,titleCSS):logger.group(title)}catch(e){logger.log(title)}var prevStateLevel=getLogLevel(level,formattedAction,[prevState],"prevState"),actionLevel=getLogLevel(level,formattedAction,[formattedAction],"action"),errorLevel=getLogLevel(level,formattedAction,[error,prevState],"error"),nextStateLevel=getLogLevel(level,formattedAction,[nextState],"nextState");prevStateLevel&&(colors.prevState?logger[prevStateLevel]("%c prev state","color: "+colors.prevState(prevState)+"; font-weight: bold",prevState):logger[prevStateLevel]("prev state",prevState)),actionLevel&&(colors.action?logger[actionLevel]("%c action","color: "+colors.action(formattedAction)+"; font-weight: bold",formattedAction):logger[actionLevel]("action",formattedAction)),error&&errorLevel&&(colors.error?logger[errorLevel]("%c error","color: "+colors.error(error,prevState)+"; font-weight: bold",error):logger[errorLevel]("error",error)),nextStateLevel&&(colors.nextState?logger[nextStateLevel]("%c next state","color: "+colors.nextState(nextState)+"; font-weight: bold",nextState):logger[nextStateLevel]("next state",nextState));
try{logger.groupEnd()}catch(e){logger.log("—— log end ——")}}),logBuffer.length=0}var options=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],_options$level=options.level,level=void 0===_options$level?"log":_options$level,_options$logger=options.logger,logger=void 0===_options$logger?console:_options$logger,_options$logErrors=options.logErrors,logErrors=void 0===_options$logErrors?!0:_options$logErrors,collapsed=options.collapsed,predicate=options.predicate,_options$duration=options.duration,duration=void 0===_options$duration?!1:_options$duration,_options$timestamp=options.timestamp,timestamp=void 0===_options$timestamp?!0:_options$timestamp,transformer=options.transformer,_options$stateTransfo=options.stateTransformer,stateTransformer=void 0===_options$stateTransfo?function(state){return state}:_options$stateTransfo,_options$actionTransf=options.actionTransformer,actionTransformer=void 0===_options$actionTransf?function(actn){return actn}:_options$actionTransf,_options$errorTransfo=options.errorTransformer,errorTransformer=void 0===_options$errorTransfo?function(error){return error}:_options$errorTransfo,_options$colors=options.colors,colors=void 0===_options$colors?{title:function(){return"#000000"},prevState:function(){return"#9E9E9E"},action:function(){return"#03A9F4"},nextState:function(){return"#4CAF50"},error:function(){return"#F20404"}}:_options$colors;if("undefined"==typeof logger)return function(){return function(next){return function(action){return next(action)}}};transformer&&console.error("Option 'transformer' is deprecated, use stateTransformer instead");var logBuffer=[];return function(_ref){var getState=_ref.getState;return function(next){return function(action){if("function"==typeof predicate&&!predicate(getState,action))return next(action);var logEntry={};logBuffer.push(logEntry),logEntry.started=timer.now(),logEntry.startedTime=new Date,logEntry.prevState=stateTransformer(getState()),logEntry.action=action;var returnedValue=void 0;if(logErrors)try{returnedValue=next(action)}catch(e){logEntry.error=errorTransformer(e)}else returnedValue=next(action);if(logEntry.took=timer.now()-logEntry.started,logEntry.nextState=stateTransformer(getState()),printBuffer(),logEntry.error)throw logEntry.error;return returnedValue}}}}var repeat=function(str,times){return new Array(times+1).join(str)},pad=function(num,maxLength){return repeat("0",maxLength-num.toString().length)+num},formatTime=function(time){return"@ "+pad(time.getHours(),2)+":"+pad(time.getMinutes(),2)+":"+pad(time.getSeconds(),2)+"."+pad(time.getMilliseconds(),3)},timer="undefined"!=typeof performance&&"function"==typeof performance.now?performance:Date;module.exports=createLogger},function(module,exports){"use strict";function thunkMiddleware(_ref){var dispatch=_ref.dispatch,getState=_ref.getState;return function(next){return function(action){return"function"==typeof action?action(dispatch,getState):next(action)}}}exports.__esModule=!0,exports["default"]=thunkMiddleware},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function applyMiddleware(){for(var _len=arguments.length,middlewares=Array(_len),_key=0;_len>_key;_key++)middlewares[_key]=arguments[_key];return function(createStore){return function(reducer,initialState,enhancer){var store=createStore(reducer,initialState,enhancer),_dispatch=store.dispatch,chain=[],middlewareAPI={getState:store.getState,dispatch:function(action){return _dispatch(action)}};return chain=middlewares.map(function(middleware){return middleware(middlewareAPI)}),_dispatch=_compose2["default"].apply(void 0,chain)(store.dispatch),_extends({},store,{dispatch:_dispatch})}}}exports.__esModule=!0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};exports["default"]=applyMiddleware;var _compose=__webpack_require__(35),_compose2=_interopRequireDefault(_compose)},function(module,exports){"use strict";function bindActionCreator(actionCreator,dispatch){return function(){return dispatch(actionCreator.apply(void 0,arguments))}}function bindActionCreators(actionCreators,dispatch){if("function"==typeof actionCreators)return bindActionCreator(actionCreators,dispatch);if("object"!=typeof actionCreators||null===actionCreators)throw new Error("bindActionCreators expected an object or a function, instead received "+(null===actionCreators?"null":typeof actionCreators)+'. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?');for(var keys=Object.keys(actionCreators),boundActionCreators={},i=0;i<keys.length;i++){var key=keys[i],actionCreator=actionCreators[key];"function"==typeof actionCreator&&(boundActionCreators[key]=bindActionCreator(actionCreator,dispatch))}return boundActionCreators}exports.__esModule=!0,exports["default"]=bindActionCreators},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function getUndefinedStateErrorMessage(key,action){var actionType=action&&action.type,actionName=actionType&&'"'+actionType.toString()+'"'||"an action";return"Given action "+actionName+', reducer "'+key+'" returned undefined. To ignore an action, you must explicitly return the previous state.'}function assertReducerSanity(reducers){Object.keys(reducers).forEach(function(key){var reducer=reducers[key],initialState=reducer(void 0,{type:_createStore.ActionTypes.INIT});if("undefined"==typeof initialState)throw new Error('Reducer "'+key+'" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined.');var type="@@redux/PROBE_UNKNOWN_ACTION_"+Math.random().toString(36).substring(7).split("").join(".");if("undefined"==typeof reducer(void 0,{type:type}))throw new Error('Reducer "'+key+'" returned undefined when probed with a random type. '+("Don't try to handle "+_createStore.ActionTypes.INIT+' or other actions in "redux/*" ')+"namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined.")})}function combineReducers(reducers){for(var reducerKeys=Object.keys(reducers),finalReducers={},i=0;i<reducerKeys.length;i++){var key=reducerKeys[i];"function"==typeof reducers[key]&&(finalReducers[key]=reducers[key])}var sanityError,finalReducerKeys=Object.keys(finalReducers);try{assertReducerSanity(finalReducers)}catch(e){sanityError=e}return function(){var state=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],action=arguments[1];if(sanityError)throw sanityError;for(var hasChanged=!1,nextState={},i=0;i<finalReducerKeys.length;i++){var key=finalReducerKeys[i],reducer=finalReducers[key],previousStateForKey=state[key],nextStateForKey=reducer(previousStateForKey,action);if("undefined"==typeof nextStateForKey){var errorMessage=getUndefinedStateErrorMessage(key,action);throw new Error(errorMessage)}nextState[key]=nextStateForKey,hasChanged=hasChanged||nextStateForKey!==previousStateForKey}return hasChanged?nextState:state}}exports.__esModule=!0,exports["default"]=combineReducers;var _createStore=__webpack_require__(36),_isPlainObject=__webpack_require__(39),_warning=(_interopRequireDefault(_isPlainObject),__webpack_require__(38));_interopRequireDefault(_warning)},function(module,exports){function getPrototype(value){return nativeGetPrototype(Object(value))}var nativeGetPrototype=Object.getPrototypeOf;module.exports=getPrototype},function(module,exports){function isHostObject(value){var result=!1;if(null!=value&&"function"!=typeof value.toString)try{result=!!(value+"")}catch(e){}return result}module.exports=isHostObject},function(module,exports){function isObjectLike(value){return!!value&&"object"==typeof value}module.exports=isObjectLike}]);